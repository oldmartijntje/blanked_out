var Ha=Object.defineProperty;var za=(e,r,t)=>r in e?Ha(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t;var Re=(e,r,t)=>(za(e,typeof r!="symbol"?r+"":r,t),t),oi=(e,r,t)=>{if(!r.has(e))throw TypeError("Cannot "+t)};var B=(e,r,t)=>(oi(e,r,"read from private field"),t?t.call(e):r.get(e)),Oe=(e,r,t)=>{if(r.has(e))throw TypeError("Cannot add the same private member more than once");r instanceof WeakSet?r.add(e):r.set(e,t)},Te=(e,r,t,a)=>(oi(e,r,"write to private field"),a?a.call(e,t):r.set(e,t),t);var Pr=(e,r,t,a)=>({set _(h){Te(e,r,h,t)},get _(){return B(e,r,a)}}),Ie=(e,r,t)=>(oi(e,r,"access private method"),t);import"https://unpkg.com/mqtt/dist/mqtt.min.mjs";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))a(h);new MutationObserver(h=>{for(const n of h)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function t(h){const n={};return h.integrity&&(n.integrity=h.integrity),h.referrerPolicy&&(n.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?n.credentials="include":h.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(h){if(h.ep)return;h.ep=!0;const n=t(h);fetch(h.href,n)}})();const $e={baseUrl:"blanked_out",assetsPath:"assets",keys:{upKeys:["ArrowUp","KeyW"],downKeys:["ArrowDown","KeyS"],leftKeys:["ArrowLeft","KeyA"],rightKeys:["ArrowRight","KeyD"]},sizes:{gridSize:64,BackgroundWidth:1280,BackgroundHeight:1280},MQTT:{"brokerUrl+port":"test.mosquitto.org:8081",topicBase:"https://oldmartijntje.github.io/blanked_out/"}};class Va{constructor(){Re(this,"callbacks",[]);Re(this,"nextId",0)}emit(r,t){this.callbacks.forEach(a=>{a.eventName===r&&a.callback(t)})}on(r,t,a){return this.nextId++,this.callbacks.push({id:this.nextId,eventName:r,caller:t,callback:a}),this.nextId}off(r){this.callbacks=this.callbacks.filter(t=>t.id!==r)}unsubscribe(r){this.callbacks=this.callbacks.filter(t=>t.caller!==r)}}const pt=new Va;class Ge{}Re(Ge,"PLAYER_PICK_UP_ITEM","PLAYER_PICK_UP_ITEM"),Re(Ge,"CHANGE_SCENE","CHANGE_SCENE"),Re(Ge,"START_TEXT_BOX","START_TEXT_BOX"),Re(Ge,"END_TEXT_BOX","END_TEXT_BOX"),Re(Ge,"CAMERA_POSITION","CAMERA_POSITION"),Re(Ge,"DO_ACTION_ON_COORDINATE","DO_ACTION_ON_COORDINATE"),Re(Ge,"USER_CLICK_CANVAS","USER_CLICK_CANVAS"),Re(Ge,"USER_DOUBLE_CLICK_CANVAS","USER_DOUBLE_CLICK_CANVAS");const Go="LEFT",Qo="RIGHT",Xo="UP",Jo="DOWN",Ka="Space",io=.05,no=.5,oo=3,Br={UP:$e.keys.upKeys,DOWN:$e.keys.downKeys,LEFT:$e.keys.leftKeys,RIGHT:$e.keys.rightKeys,SPACE:[Ka]},vr=[Go,Qo,Xo,Jo];class Ya{constructor(){this.heldDirections=[],this.keys={},this.lastKeys={},this.canvas,this.isDragging=!1,this.startX=0,this.startY=0,this.lastX=0,this.lastY=0,this.lastTouchDistance=0,this.isZoomLimitReached=!1,this.dragStartTime,document.addEventListener("keydown",r=>{this.keys[r.code]=!0,this.getDirection(r.code,!0)}),document.addEventListener("keyup",r=>{this.keys[r.code]=!1,this.getDirection(r.code,!1)}),document.addEventListener("DOMContentLoaded",()=>{for(const r of Object.keys(Br))for(const t of Br[r]){const a=document.querySelectorAll(`.${t}.gameController`);for(const h of a)h.addEventListener("mousedown",()=>{vr.includes(r)&&this.onKeyPressed(r),this.keys[t]=!0}),h.addEventListener("mouseup",()=>{vr.includes(r)&&this.onKeyReleased(r),this.keys[t]=!1}),h.addEventListener("touchstart",n=>{n.preventDefault(),vr.includes(r)&&this.onKeyPressed(r),this.keys[t]=!0}),h.addEventListener("touchend",n=>{n.preventDefault(),vr.includes(r)&&this.onKeyReleased(r),this.keys[t]=!1})}})}get direction(){return this.heldDirections[0]}getDirection(r,t){for(const a of Object.keys(Br))Br[a].includes(r)&&vr.includes(a)&&(t?this.onKeyPressed(a):this.onKeyReleased(a))}update(){this.lastKeys={...this.keys}}getActionJustPressed(r){let t=!1;return this.keys[r]&&!this.lastKeys[r]&&(t=!0),t}onKeyPressed(r){this.heldDirections.includes(r)||this.heldDirections.unshift(r)}onKeyReleased(r){const t=this.heldDirections.indexOf(r);t>-1&&this.heldDirections.splice(t,1)}onPointerDown(r){this.isDragging=!0,r.touches?(this.lastX=r.touches[0].clientX,this.lastY=r.touches[0].clientY):(this.lastX=r.clientX,this.lastY=r.clientY),this.dragStartTime=new Date().getTime()}onPointerMove(r,t){if(!this.isDragging)return;let a,h;r.touches?(a=r.touches[0].clientX,h=r.touches[0].clientY):(a=r.clientX,h=r.clientY);const n=(a-this.lastX)/t.zoom,i=(h-this.lastY)/t.zoom;t.position.x+=n,t.position.y+=i,this.lastX=a,this.lastY=h}onPointerUp(r,t){new Date().getTime()-this.dragStartTime<200&&!this.isZoomLimitReached&&this.handleClick(r,t),this.isDragging=!1}onWheel(r,t){r.preventDefault();const a=r.deltaY<0?1+io:1-io;t.zoom*=a,t.zoom=Math.max(no,Math.min(oo,t.zoom))}onTouchStart(r){if(r.touches.length===2){r.preventDefault();const t=r.touches[0],a=r.touches[1];this.lastTouchDistance=Math.hypot(a.clientX-t.clientX,a.clientY-t.clientY)}else r.touches.length===1&&(this.isDragging=!0,this.lastX=r.touches[0].clientX,this.lastY=r.touches[0].clientY,this.dragStartTime=new Date().getTime())}onTouchMove(r,t){if(r.touches.length===2){r.preventDefault();const a=r.touches[0],h=r.touches[1],n=Math.hypot(h.clientX-a.clientX,h.clientY-a.clientY);if(this.lastTouchDistance>0){const i=n/this.lastTouchDistance,s=t.zoom*i;if(s>=no&&s<=oo){canvas.getBoundingClientRect();const o=(a.clientX+h.clientX)/2,l=(a.clientY+h.clientY)/2,c=(o-canvas.width/2)/t.zoom+t.position.x,d=(l-canvas.height/2)/t.zoom+t.position.y;t.zoom=s;const g=(o-canvas.width/2)/t.zoom+t.position.x,m=(l-canvas.height/2)/t.zoom+t.position.y;t.position.x+=c-g,t.position.y+=d-m}}this.lastTouchDistance=n}else if(r.touches.length===1&&this.isDragging){const a=r.touches[0].clientX,h=r.touches[0].clientY,n=(a-this.lastX)/t.zoom,i=(h-this.lastY)/t.zoom;t.position.x+=n,t.position.y+=i,this.lastX=a,this.lastY=h}}onTouchEnd(r,t){r.touches.length<2&&(this.lastTouchDistance=0,this.isZoomLimitReached=!1),new Date().getTime()-this.dragStartTime<200&&!this.isZoomLimitReached&&r.touches.length===0&&this.handleClick(r,t),r.touches.length===0&&(this.isDragging=!1)}handleClick(r,t,a=Ge.USER_CLICK_CANVAS){if(!this.canvas)return;const h=this.canvas.getBoundingClientRect(),n=(r.clientX||r.touches[0].clientX)-h.left,i=(r.clientY||r.touches[0].clientY)-h.top,s=(n-this.canvas.width/2)/t.zoom-t.position.x,o=(i-this.canvas.height/2)/t.zoom-t.position.y;pt.emit(a,{x:s,y:o})}registerMouseMovement(r,t){this.canvas=r,r.addEventListener("mousedown",a=>{this.onPointerDown(a)}),r.addEventListener("mousemove",a=>{this.onPointerMove(a,t)}),r.addEventListener("mouseup",a=>{this.onPointerUp(a,t)}),r.addEventListener("mouseleave",a=>{this.onPointerUp(a,t)}),r.addEventListener("dblclick",a=>{this.handleClick(a,t,Ge.USER_DOUBLE_CLICK_CANVAS)}),r.addEventListener("wheel",a=>{this.onWheel(a,t)},{passive:!1}),r.addEventListener("touchstart",a=>{this.onTouchStart(a)},{passive:!1}),r.addEventListener("touchmove",a=>{this.onTouchMove(a,t)},{passive:!1}),r.addEventListener("touchend",a=>{this.onTouchEnd(a,t)})}}class Fe{constructor(r=0,t=0){this.x=r,this.y=t}duplicate(){return new Fe(this.x,this.y)}matches(r){return this.x===r.x&&this.y===r.y}toString(){return`Vector2(${this.x}, ${this.y})`}toNeighbor(r){let t=this.x,a=this.y;switch(r){case Xo:a-=$e.sizes.gridSize;break;case Jo:a+=$e.sizes.gridSize;break;case Go:t-=$e.sizes.gridSize;break;case Qo:t+=$e.sizes.gridSize;break}if(t==this.x&&a==this.y)throw new Error("Invalid direction "+r+" for "+this.toString());return new Fe(t,a)}}class Ga{constructor(r,t){Re(this,"mainLoop",r=>{if(!this.isRunning)return;let t=r-this.lastFrameTime;for(this.lastFrameTime=r,this.accumulatedTime+=t;this.accumulatedTime>=this.timeStep;)this.update(this.timeStep),this.accumulatedTime-=this.timeStep;this.render(),this.rafId=requestAnimationFrame(this.mainLoop)});this.lastFrameTime=0,this.accumulatedTime=0,this.timeStep=1e3/60,this.update=r,this.render=t,this.rafId=null,this.isRunning=!1}start(){this.isRunning||(this.isRunning=!0,this.rafId=requestAnimationFrame(this.mainLoop))}stop(){this.rafId||cancelAnimationFrame(this.rafId),this.isRunning=!1}}class mr{constructor({position:r}){this.position=r??new Fe(0,0),this.children=[],this.parent=null,this.hasBeenInitiated=!1,this.isSolid=!1,this.drawLayer=null}stepEntry(r,t){this.children.forEach(a=>a.stepEntry(r,t)),this.hasBeenInitiated||(this.hasBeenInitiated=!0,this.onInit()),this.step(r,t)}onInit(){}step(r){}draw(r,t,a){const h=t+this.position.x,n=a+this.position.y;this.drawImage(r,h,n),this.getDrawChildrenOrdered().forEach(i=>i.draw(r,h,n))}getDrawChildrenOrdered(){return[...this.children].sort((r,t)=>t.drawLayer==="FLOOR"||r.position.y>t.position.y?1:-1)}drawImage(r,t,a){}destroy(){this.children.forEach(r=>r.destroy()),this.parent&&this.parent.removeChild(this)}addChild(r){r.parent=this,this.children.push(r)}removeChild(r){pt.unsubscribe(r),this.children=this.children.filter(t=>t!==r)}}class Qa extends mr{constructor(){super({});Re(this,"zoom",1);this.zoom=1,this.offset=new Fe(0,0),this.onInit()}onInit(){pt.on(Ge.CAMERA_POSITION,this,t=>{t.focus&&this.centerPositionOnTarget(t.position)}),pt.on(Ge.CHANGE_SCENE,this,t=>{this.centerPositionOnTarget(t.heroStartPosition)})}centerPositionOnTarget(t){this.position=new Fe(-t.x+632,-t.y+632)}}class Xa{constructor(){this.flags=new Map}add(r){this.flags.set(r,!0)}remove(r){this.flags.delete(r)}getRelevantScenario(r=[]){return r.find(t=>{const a=t.bypass??[];for(let n=0;n<a.length;n++){const i=a[n];if(this.flags.has(i))return!1}const h=t.requires??[];for(let n=0;n<h.length;n++){const i=h[n];if(!this.flags.has(i))return!1}return!0})}}const so=new Xa;class Ja{constructor(){this.toLoad={hero:"sprites/hero-sheet.png",shadow:"sprites/shadow.png",rod:"sprites/rod.png",exit:"sprites/exit.png",sky:"sprites/sky.png",ground:"sprites/ground.png",cave:"sprites/cave.png",caveGround:"sprites/cave-ground.png",knight:"sprites/knight-sheet-1.png",textBox:"sprites/text-box.png",portraits:"sprites/portraits-sheet.png",fontWhite:"sprites/sprite-font-white.png"},this.images={};var r="";try{r="/"+$e.baseUrl+"/"+$e.assetsPath+"/"}catch(t){console.log(t),r="/"+$e.baseUrl+"/"+$e.assetsPath+"/"}console.log(`"${r}"`),Object.keys(this.toLoad).forEach(t=>{const a=new Image;a.src=r+this.toLoad[t],this.images[t]={image:a,isLoaded:!1},a.onload=()=>{this.images[t].isLoaded=!0}})}}const Cr=new Ja;class nr extends mr{constructor({resource:r,frameSize:t,hFrames:a,vFrames:h,frame:n,scale:i,position:s,animations:o}){super({position:s??new Fe(0,0)}),this.resource=r,this.frameSize=t??new Fe($e.sizes.gridSize,$e.sizes.gridSize),this.hFrames=a??1,this.vFrames=h??1,this.frame=n??0,this.frameMap=new Map,this.scale=i??1,this.position=s??new Fe(0,0),this.animations=o??null,this.buildFrameMap()}buildFrameMap(){let r=0;for(let t=0;t<this.vFrames;t++)for(let a=0;a<this.hFrames;a++)this.frameMap.set(r,new Fe(a*this.frameSize.x,t*this.frameSize.y)),r++}step(r){this.animations&&(this.animations.step(r),this.frame=this.animations.frame)}drawImage(r,t,a){if(!this.resource.isLoaded)return;let h=0,n=0;const i=this.frameMap.get(this.frame);i&&(h=i.x,n=i.y);const s=this.frameSize.x,o=this.frameSize.y;r.drawImage(this.resource.image,h,n,s,o,t,a,s*this.scale,o*this.scale)}}class Za extends mr{constructor(){super({position:new Fe(0,1)}),this.items=[],this.drawLayer="HUD",this.nextId=0,this.renderInventory()}renderInventory(){this.children.forEach(r=>r.destroy()),this.items.forEach((r,t)=>{const a=new nr({resource:r.image,position:new Fe(t*12,0)});this.addChild(a)})}removeFromInventory(r){this.items=this.items.filter(t=>t.id!==r),this.renderInventory()}onInit(){pt.on(Ge.PLAYER_PICK_UP_ITEM,this,r=>{this.items.push({id:this.nextId++,image:r.image}),console.log(this.items),this.renderInventory()})}}const el=5,Ze=new Map;Ze.set("i",2);Ze.set("j",4);Ze.set("l",3);Ze.set("r",4);Ze.set("t",4);Ze.set("u",4);Ze.set("v",4);Ze.set("x",4);Ze.set("y",4);Ze.set("z",4);Ze.set("E",4);Ze.set("F",4);Ze.set("M",7);Ze.set("W",7);Ze.set(" ",3);Ze.set("'",2);Ze.set("!",1);const tl=e=>Ze.get(e)??el,Zo=new Map;["abcdefghijklmnopqrstuvwxyz","ABCDEFGHIJKLMNOPQRSTUVWXYZ","0123456789 __",".!-,?'"].join("").split("").forEach((e,r)=>{Zo.set(e,r)});const rl=e=>Zo.get(e)??null,il=4,nl=1,ol=3,sl=20,al=1,ll=1;class hl extends mr{constructor(r={}){super({position:new Fe(32,108)}),this.drawLayer="HUD";const t=r.string??"Default Text";this.words=t.split(" ").map(a=>{let h=0;const n=a.split("").map(i=>{const s=tl(i);return h+=s,{width:s,sprite:new nr({resource:Cr.images.fontWhite,hFrames:13,vFrames:6,frame:rl(i)})}});return{wordWidth:h,chars:n}}),this.backdrop=new nr({resource:Cr.images.textBox,frameSize:new Fe(256,64)}),r.portraitFrame!==null&&r.portraitFrame!==void 0?this.portrait=new nr({resource:Cr.images.portraits,hFrames:4,vFrames:1,frame:r.portraitFrame??0}):this.portrait=null,this.showingIndex=0,this.finalIndex=this.words.reduce((a,h)=>a+h.chars.length,0),this.textSpeed=sl,this.timeUntilNextShow=this.textSpeed}step(r,t){const a=t.input;if(a!=null&&a.getActionJustPressed("Space")){if(this.showingIndex<this.finalIndex){this.showingIndex=this.finalIndex;return}pt.emit(Ge.END_TEXT_BOX)}this.timeUntilNextShow-=r,this.timeUntilNextShow<=0&&(this.showingIndex+=ll,this.timeUntilNextShow+=this.textSpeed)}drawImage(r,t,a){this.backdrop.drawImage(r,t,a),this.portrait&&this.portrait.drawImage(r,t+6,a+6);const i=7,s=7,o=240,l=14,c=18,d=2;let g=i,m=s;this.portrait&&(g+=c,m+=d);let b=t+g,y=a+m,I=0;this.words.forEach(L=>{t+o-b<L.wordWidth&&(b=t+g,y+=l),L.chars.forEach(_=>{if(I>this.showingIndex)return;const{sprite:N,width:j}=_,O=b-il;N.draw(r,O,y),b+=j+nl,I+=al}),b+=ol})}}class ul extends mr{constructor(){super({}),this.level=null,this.input=new Ya,this.camera=new Qa}onInit(){pt.on(Ge.USER_CLICK_CANVAS,this,t=>{console.log(t,1)}),pt.on(Ge.USER_DOUBLE_CLICK_CANVAS,this,t=>{console.log(t,2)});const r=new Za;this.addChild(r),pt.on(Ge.CHANGE_SCENE,this,t=>{this.setLevel(t)}),pt.on(Ge.DO_ACTION_ON_COORDINATE,this,t=>{if(typeof t.getContent=="function"){const a=t.getContent();if(!a)return;a.addsFlags&&a.addsFlags.forEach(s=>{so.add(s)}),a.removesFlags&&a.removesFlags.forEach(s=>{so.remove(s)});const h={string:a.string,portraitFrame:a.portraitFrame??null};let n=null;n=new hl(h),this.addChild(n),pt.emit(Ge.START_TEXT_BOX);const i=pt.on(Ge.END_TEXT_BOX,this,()=>{n.destroy(),pt.off(i)})}})}registerMouseMovement(r){this.input.registerMouseMovement(r,this.camera)}setLevel(r){this.level&&this.level.destroy(),this.level=r,this.addChild(this.level)}drawBackground(r){var t;(t=this.level)==null||t.background.drawImage(r,0,0)}drawObjects(r){this.children.forEach(t=>{t.drawLayer!=="HUD"&&t.draw(r,0,0)})}drawForeground(r){this.children.forEach(t=>{t.drawLayer==="HUD"&&t.draw(r,0,0)})}}class cl extends mr{constructor(){super({}),this.background=null,this.walls=new Set}}class Qe{}Re(Qe,"CIRCLE","circle"),Re(Qe,"SQUARE","square"),Re(Qe,"TRIANGLE","triangle"),Re(Qe,"HEXAGON","hexagon"),Re(Qe,"PENTAGON","pentagon"),Re(Qe,"CUSTOM","custom");class fr extends nr{constructor({color:r,width:t,height:a,figure:h,position:n,customShapeDrawingFunction:i}){super({position:n??new Fe(0,0),resource:null}),this.color=r??"orange",this.width=t??$e.sizes.gridSize,this.height=a??$e.sizes.gridSize,this.figure=h??Qe.SQUARE,this.customShapeDrawingFunction=i??null}drawImage(r,t,a){r.fillStyle=this.color,this.figure==Qe.CUSTOM&&this.customShapeDrawingFunction?this.customShapeDrawingFunction(r,t,a):this.figure==Qe.SQUARE?r.fillRect(t,a,this.width,this.height):this.figure==Qe.CIRCLE?(r.beginPath(),r.arc(t+this.width/2,a+this.width/2,this.width/2,0,2*Math.PI),r.fill()):this.figure==Qe.TRIANGLE?(r.beginPath(),r.moveTo(t,a),r.lineTo(t+this.width,a),r.lineTo(t+this.width/2,a+this.height),r.fill()):this.figure==Qe.HEXAGON?(r.beginPath(),r.moveTo(t+this.width/4,a),r.lineTo(t+this.width*3/4,a),r.lineTo(t+this.width,a+this.height/2),r.lineTo(t+this.width*3/4,a+this.height),r.lineTo(t+this.width/4,a+this.height),r.lineTo(t,a+this.height/2),r.fill()):this.figure==Qe.PENTAGON&&(r.beginPath(),r.moveTo(t+this.width/2,a),r.lineTo(t+this.width,a+this.height*2/5),r.lineTo(t+this.width*3/4,a+this.height),r.lineTo(t+this.width/4,a+this.height),r.lineTo(t,a+this.height*2/5),r.fill())}}const es={};for(let e=0;e<8;e++)for(let r=0;r<8;r++)es[`${e}-${r}`]={x:e,y:r,color:(e+r)%2===0?"white":"black",occupied:!1};console.log(es);class fl extends cl{constructor(r={}){super({}),this.background=new nr({resource:Cr.images.sky,frameSize:new Fe($e.sizes.BackgroundWidth,$e.sizes.BackgroundHeight),scale:8});const t=new nr({resource:Cr.images.ground,frameSize:new Fe($e.sizes.BackgroundWidth,$e.sizes.BackgroundHeight),scale:4}),a=new fr({color:"blue",width:64,height:64,figure:Qe.SQUARE,position:new Fe(0,0)}),h=new fr({color:"red",width:64,height:64,figure:Qe.CIRCLE,position:new Fe(64,0)}),n=new fr({color:"green",width:64,height:64,figure:Qe.TRIANGLE,position:new Fe(128,0)}),i=new fr({color:"yellow",width:64,height:64,figure:Qe.HEXAGON,position:new Fe(192,0)}),s=new fr({color:"black",width:64,height:64,figure:Qe.PENTAGON,position:new Fe(256,0)}),o=new fr({figure:Qe.CUSTOM,position:new Fe(0,64),customShapeDrawingFunction:(l,c,d)=>{l.beginPath(),l.moveTo(c+32,d),l.lineTo(c+64,d+64),l.lineTo(c,d+640),l.fill()}});this.addChild(t),this.addChild(a),this.addChild(h),this.addChild(n),this.addChild(i),this.addChild(s),this.addChild(o)}onInit(){}}var qn=Object.defineProperty,dl=Object.getOwnPropertyDescriptor,pl=Object.getOwnPropertyNames,gl=Object.prototype.hasOwnProperty,tt=(e,r)=>()=>(e&&(r=e(e=0)),r),me=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports),lr=(e,r)=>{for(var t in r)qn(e,t,{get:r[t],enumerable:!0})},ml=(e,r,t,a)=>{if(r&&typeof r=="object"||typeof r=="function")for(let h of pl(r))!gl.call(e,h)&&h!==t&&qn(e,h,{get:()=>r[h],enumerable:!(a=dl(r,h))||a.enumerable});return e},Ue=e=>ml(qn({},"__esModule",{value:!0}),e),oe=tt(()=>{}),Be={};lr(Be,{_debugEnd:()=>Ji,_debugProcess:()=>Xi,_events:()=>pn,_eventsCount:()=>gn,_exiting:()=>Ni,_fatalExceptions:()=>Yi,_getActiveHandles:()=>as,_getActiveRequests:()=>ss,_kill:()=>Fi,_linkedBinding:()=>ns,_maxListeners:()=>dn,_preload_modules:()=>cn,_rawDebug:()=>xi,_startProfilerIdleNotifier:()=>Zi,_stopProfilerIdleNotifier:()=>en,_tickCallback:()=>Qi,abort:()=>on,addListener:()=>mn,allowedNodeEnvironmentFlags:()=>Vi,arch:()=>_i,argv:()=>Ai,argv0:()=>un,assert:()=>ls,binding:()=>Ri,chdir:()=>Bi,config:()=>ji,cpuUsage:()=>Ir,cwd:()=>Pi,debugPort:()=>hn,default:()=>zn,dlopen:()=>os,domain:()=>Ui,emit:()=>_n,emitWarning:()=>Ci,env:()=>Si,execArgv:()=>Ii,execPath:()=>ln,exit:()=>Hi,features:()=>Ki,hasUncaughtExceptionCaptureCallback:()=>hs,hrtime:()=>Dr,kill:()=>qi,listeners:()=>cs,memoryUsage:()=>$i,moduleLoadList:()=>Li,nextTick:()=>rs,off:()=>yn,on:()=>kt,once:()=>bn,openStdin:()=>zi,pid:()=>sn,platform:()=>Ei,ppid:()=>an,prependListener:()=>En,prependOnceListener:()=>Sn,reallyExit:()=>Di,release:()=>Mi,removeAllListeners:()=>vn,removeListener:()=>wn,resourceUsage:()=>Wi,setSourceMapsEnabled:()=>fn,setUncaughtExceptionCaptureCallback:()=>Gi,stderr:()=>rn,stdin:()=>nn,stdout:()=>tn,title:()=>vi,umask:()=>Oi,uptime:()=>us,version:()=>Ti,versions:()=>ki});function Hn(e){throw new Error("Node.js process "+e+" is not supported by JSPM core outside of Node.js")}function bl(){!or||!rr||(or=!1,rr.length?St=rr.concat(St):Rr=-1,St.length&&ts())}function ts(){if(!or){var e=setTimeout(bl,0);or=!0;for(var r=St.length;r;){for(rr=St,St=[];++Rr<r;)rr&&rr[Rr].run();Rr=-1,r=St.length}rr=null,or=!1,clearTimeout(e)}}function rs(e){var r=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)r[t-1]=arguments[t];St.push(new is(e,r)),St.length===1&&!or&&setTimeout(ts,0)}function is(e,r){this.fun=e,this.array=r}function ot(){}function ns(e){Hn("_linkedBinding")}function os(e){Hn("dlopen")}function ss(){return[]}function as(){return[]}function ls(e,r){if(!e)throw new Error(r||"assertion error")}function hs(){return!1}function us(){return Pt.now()/1e3}function Dr(e){var r=Math.floor((Date.now()-Pt.now())*.001),t=Pt.now()*.001,a=Math.floor(t)+r,h=Math.floor(t%1*1e9);return e&&(a=a-e[0],h=h-e[1],h<0&&(a--,h+=Fr)),[a,h]}function kt(){return zn}function cs(e){return[]}var St,or,rr,Rr,vi,_i,Ei,Si,Ai,Ii,Ti,ki,Ci,Ri,Oi,Pi,Bi,Mi,xi,Li,Ui,Ni,ji,Di,Fi,Ir,Wi,$i,qi,Hi,zi,Vi,Ki,Yi,Gi,Qi,Xi,Ji,Zi,en,tn,rn,nn,on,sn,an,ln,hn,un,cn,fn,Pt,si,Fr,dn,pn,gn,mn,bn,yn,wn,vn,_n,En,Sn,zn,yl=tt(()=>{oe(),ae(),se(),St=[],or=!1,Rr=-1,is.prototype.run=function(){this.fun.apply(null,this.array)},vi="browser",_i="x64",Ei="browser",Si={PATH:"/usr/bin",LANG:navigator.language+".UTF-8",PWD:"/",HOME:"/home",TMP:"/tmp"},Ai=["/usr/bin/node"],Ii=[],Ti="v16.8.0",ki={},Ci=function(e,r){console.warn((r?r+": ":"")+e)},Ri=function(e){Hn("binding")},Oi=function(e){return 0},Pi=function(){return"/"},Bi=function(e){},Mi={name:"node",sourceUrl:"",headersUrl:"",libUrl:""},xi=ot,Li=[],Ui={},Ni=!1,ji={},Di=ot,Fi=ot,Ir=function(){return{}},Wi=Ir,$i=Ir,qi=ot,Hi=ot,zi=ot,Vi={},Ki={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},Yi=ot,Gi=ot,Qi=ot,Xi=ot,Ji=ot,Zi=ot,en=ot,tn=void 0,rn=void 0,nn=void 0,on=ot,sn=2,an=1,ln="/bin/usr/node",hn=9229,un="node",cn=[],fn=ot,Pt={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0},Pt.now===void 0&&(si=Date.now(),Pt.timing&&Pt.timing.navigationStart&&(si=Pt.timing.navigationStart),Pt.now=()=>Date.now()-si),Fr=1e9,Dr.bigint=function(e){var r=Dr(e);return typeof BigInt>"u"?r[0]*Fr+r[1]:BigInt(r[0]*Fr)+BigInt(r[1])},dn=10,pn={},gn=0,mn=kt,bn=kt,yn=kt,wn=kt,vn=kt,_n=ot,En=kt,Sn=kt,zn={version:Ti,versions:ki,arch:_i,platform:Ei,release:Mi,_rawDebug:xi,moduleLoadList:Li,binding:Ri,_linkedBinding:ns,_events:pn,_eventsCount:gn,_maxListeners:dn,on:kt,addListener:mn,once:bn,off:yn,removeListener:wn,removeAllListeners:vn,emit:_n,prependListener:En,prependOnceListener:Sn,listeners:cs,domain:Ui,_exiting:Ni,config:ji,dlopen:os,uptime:us,_getActiveRequests:ss,_getActiveHandles:as,reallyExit:Di,_kill:Fi,cpuUsage:Ir,resourceUsage:Wi,memoryUsage:$i,kill:qi,exit:Hi,openStdin:zi,allowedNodeEnvironmentFlags:Vi,assert:ls,features:Ki,_fatalExceptions:Yi,setUncaughtExceptionCaptureCallback:Gi,hasUncaughtExceptionCaptureCallback:hs,emitWarning:Ci,nextTick:rs,_tickCallback:Qi,_debugProcess:Xi,_debugEnd:Ji,_startProfilerIdleNotifier:Zi,_stopProfilerIdleNotifier:en,stdout:tn,stdin:nn,stderr:rn,abort:on,umask:Oi,chdir:Bi,cwd:Pi,env:Si,title:vi,argv:Ai,execArgv:Ii,pid:sn,ppid:an,execPath:ln,debugPort:hn,hrtime:Dr,argv0:un,_preload_modules:cn,setSourceMapsEnabled:fn}}),se=tt(()=>{yl()}),rt={};lr(rt,{Buffer:()=>Kr,INSPECT_MAX_BYTES:()=>fs,default:()=>Ct,kMaxLength:()=>ds});function wl(){if(An)return pr;An=!0,pr.byteLength=s,pr.toByteArray=l,pr.fromByteArray=g;for(var e=[],r=[],t=typeof Uint8Array<"u"?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,n=a.length;h<n;++h)e[h]=a[h],r[a.charCodeAt(h)]=h;r[45]=62,r[95]=63;function i(m){var b=m.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var y=m.indexOf("=");y===-1&&(y=b);var I=y===b?0:4-y%4;return[y,I]}function s(m){var b=i(m),y=b[0],I=b[1];return(y+I)*3/4-I}function o(m,b,y){return(b+y)*3/4-y}function l(m){var b,y=i(m),I=y[0],L=y[1],k=new t(o(m,I,L)),_=0,N=L>0?I-4:I,j;for(j=0;j<N;j+=4)b=r[m.charCodeAt(j)]<<18|r[m.charCodeAt(j+1)]<<12|r[m.charCodeAt(j+2)]<<6|r[m.charCodeAt(j+3)],k[_++]=b>>16&255,k[_++]=b>>8&255,k[_++]=b&255;return L===2&&(b=r[m.charCodeAt(j)]<<2|r[m.charCodeAt(j+1)]>>4,k[_++]=b&255),L===1&&(b=r[m.charCodeAt(j)]<<10|r[m.charCodeAt(j+1)]<<4|r[m.charCodeAt(j+2)]>>2,k[_++]=b>>8&255,k[_++]=b&255),k}function c(m){return e[m>>18&63]+e[m>>12&63]+e[m>>6&63]+e[m&63]}function d(m,b,y){for(var I,L=[],k=b;k<y;k+=3)I=(m[k]<<16&16711680)+(m[k+1]<<8&65280)+(m[k+2]&255),L.push(c(I));return L.join("")}function g(m){for(var b,y=m.length,I=y%3,L=[],k=16383,_=0,N=y-I;_<N;_+=k)L.push(d(m,_,_+k>N?N:_+k));return I===1?(b=m[y-1],L.push(e[b>>2]+e[b<<4&63]+"==")):I===2&&(b=(m[y-2]<<8)+m[y-1],L.push(e[b>>10]+e[b>>4&63]+e[b<<2&63]+"=")),L.join("")}return pr}function vl(){return In?Tr:(In=!0,Tr.read=function(e,r,t,a,h){var n,i,s=h*8-a-1,o=(1<<s)-1,l=o>>1,c=-7,d=t?h-1:0,g=t?-1:1,m=e[r+d];for(d+=g,n=m&(1<<-c)-1,m>>=-c,c+=s;c>0;n=n*256+e[r+d],d+=g,c-=8);for(i=n&(1<<-c)-1,n>>=-c,c+=a;c>0;i=i*256+e[r+d],d+=g,c-=8);if(n===0)n=1-l;else{if(n===o)return i?NaN:(m?-1:1)*(1/0);i=i+Math.pow(2,a),n=n-l}return(m?-1:1)*i*Math.pow(2,n-a)},Tr.write=function(e,r,t,a,h,n){var i,s,o,l=n*8-h-1,c=(1<<l)-1,d=c>>1,g=h===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=a?0:n-1,b=a?1:-1,y=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(s=isNaN(r)?1:0,i=c):(i=Math.floor(Math.log(r)/Math.LN2),r*(o=Math.pow(2,-i))<1&&(i--,o*=2),i+d>=1?r+=g/o:r+=g*Math.pow(2,1-d),r*o>=2&&(i++,o/=2),i+d>=c?(s=0,i=c):i+d>=1?(s=(r*o-1)*Math.pow(2,h),i=i+d):(s=r*Math.pow(2,d-1)*Math.pow(2,h),i=0));h>=8;e[t+m]=s&255,m+=b,s/=256,h-=8);for(i=i<<h|s,l+=h;l>0;e[t+m]=i&255,m+=b,i/=256,l-=8);e[t+m-b]|=y*128},Tr)}function _l(){if(Tn)return Wt;Tn=!0;let e=wl(),r=vl(),t=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Wt.Buffer=i,Wt.SlowBuffer=L,Wt.INSPECT_MAX_BYTES=50;let a=2147483647;Wt.kMaxLength=a,i.TYPED_ARRAY_SUPPORT=h(),!i.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function h(){try{let f=new Uint8Array(1),u={foo:function(){return 42}};return Object.setPrototypeOf(u,Uint8Array.prototype),Object.setPrototypeOf(f,u),f.foo()===42}catch{return!1}}Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.byteOffset}});function n(f){if(f>a)throw new RangeError('The value "'+f+'" is invalid for option "size"');let u=new Uint8Array(f);return Object.setPrototypeOf(u,i.prototype),u}function i(f,u,p){if(typeof f=="number"){if(typeof u=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return c(f)}return s(f,u,p)}i.poolSize=8192;function s(f,u,p){if(typeof f=="string")return d(f,u);if(ArrayBuffer.isView(f))return m(f);if(f==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f);if(z(f,ArrayBuffer)||f&&z(f.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(z(f,SharedArrayBuffer)||f&&z(f.buffer,SharedArrayBuffer)))return b(f,u,p);if(typeof f=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let v=f.valueOf&&f.valueOf();if(v!=null&&v!==f)return i.from(v,u,p);let T=y(f);if(T)return T;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof f[Symbol.toPrimitive]=="function")return i.from(f[Symbol.toPrimitive]("string"),u,p);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f)}i.from=function(f,u,p){return s(f,u,p)},Object.setPrototypeOf(i.prototype,Uint8Array.prototype),Object.setPrototypeOf(i,Uint8Array);function o(f){if(typeof f!="number")throw new TypeError('"size" argument must be of type number');if(f<0)throw new RangeError('The value "'+f+'" is invalid for option "size"')}function l(f,u,p){return o(f),f<=0?n(f):u!==void 0?typeof p=="string"?n(f).fill(u,p):n(f).fill(u):n(f)}i.alloc=function(f,u,p){return l(f,u,p)};function c(f){return o(f),n(f<0?0:I(f)|0)}i.allocUnsafe=function(f){return c(f)},i.allocUnsafeSlow=function(f){return c(f)};function d(f,u){if((typeof u!="string"||u==="")&&(u="utf8"),!i.isEncoding(u))throw new TypeError("Unknown encoding: "+u);let p=k(f,u)|0,v=n(p),T=v.write(f,u);return T!==p&&(v=v.slice(0,T)),v}function g(f){let u=f.length<0?0:I(f.length)|0,p=n(u);for(let v=0;v<u;v+=1)p[v]=f[v]&255;return p}function m(f){if(z(f,Uint8Array)){let u=new Uint8Array(f);return b(u.buffer,u.byteOffset,u.byteLength)}return g(f)}function b(f,u,p){if(u<0||f.byteLength<u)throw new RangeError('"offset" is outside of buffer bounds');if(f.byteLength<u+(p||0))throw new RangeError('"length" is outside of buffer bounds');let v;return u===void 0&&p===void 0?v=new Uint8Array(f):p===void 0?v=new Uint8Array(f,u):v=new Uint8Array(f,u,p),Object.setPrototypeOf(v,i.prototype),v}function y(f){if(i.isBuffer(f)){let u=I(f.length)|0,p=n(u);return p.length===0||f.copy(p,0,0,u),p}if(f.length!==void 0)return typeof f.length!="number"||we(f.length)?n(0):g(f);if(f.type==="Buffer"&&Array.isArray(f.data))return g(f.data)}function I(f){if(f>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return f|0}function L(f){return+f!=f&&(f=0),i.alloc(+f)}i.isBuffer=function(f){return f!=null&&f._isBuffer===!0&&f!==i.prototype},i.compare=function(f,u){if(z(f,Uint8Array)&&(f=i.from(f,f.offset,f.byteLength)),z(u,Uint8Array)&&(u=i.from(u,u.offset,u.byteLength)),!i.isBuffer(f)||!i.isBuffer(u))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(f===u)return 0;let p=f.length,v=u.length;for(let T=0,w=Math.min(p,v);T<w;++T)if(f[T]!==u[T]){p=f[T],v=u[T];break}return p<v?-1:v<p?1:0},i.isEncoding=function(f){switch(String(f).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(f,u){if(!Array.isArray(f))throw new TypeError('"list" argument must be an Array of Buffers');if(f.length===0)return i.alloc(0);let p;if(u===void 0)for(u=0,p=0;p<f.length;++p)u+=f[p].length;let v=i.allocUnsafe(u),T=0;for(p=0;p<f.length;++p){let w=f[p];if(z(w,Uint8Array))T+w.length>v.length?(i.isBuffer(w)||(w=i.from(w)),w.copy(v,T)):Uint8Array.prototype.set.call(v,w,T);else if(i.isBuffer(w))w.copy(v,T);else throw new TypeError('"list" argument must be an Array of Buffers');T+=w.length}return v};function k(f,u){if(i.isBuffer(f))return f.length;if(ArrayBuffer.isView(f)||z(f,ArrayBuffer))return f.byteLength;if(typeof f!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof f);let p=f.length,v=arguments.length>2&&arguments[2]===!0;if(!v&&p===0)return 0;let T=!1;for(;;)switch(u){case"ascii":case"latin1":case"binary":return p;case"utf8":case"utf-8":return F(f).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return p*2;case"hex":return p>>>1;case"base64":return G(f).length;default:if(T)return v?-1:F(f).length;u=(""+u).toLowerCase(),T=!0}}i.byteLength=k;function _(f,u,p){let v=!1;if((u===void 0||u<0)&&(u=0),u>this.length||((p===void 0||p>this.length)&&(p=this.length),p<=0)||(p>>>=0,u>>>=0,p<=u))return"";for(f||(f="utf8");;)switch(f){case"hex":return $(this,u,p);case"utf8":case"utf-8":return q(this,u,p);case"ascii":return ge(this,u,p);case"latin1":case"binary":return ne(this,u,p);case"base64":return S(this,u,p);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return be(this,u,p);default:if(v)throw new TypeError("Unknown encoding: "+f);f=(f+"").toLowerCase(),v=!0}}i.prototype._isBuffer=!0;function N(f,u,p){let v=f[u];f[u]=f[p],f[p]=v}i.prototype.swap16=function(){let f=this.length;if(f%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let u=0;u<f;u+=2)N(this,u,u+1);return this},i.prototype.swap32=function(){let f=this.length;if(f%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let u=0;u<f;u+=4)N(this,u,u+3),N(this,u+1,u+2);return this},i.prototype.swap64=function(){let f=this.length;if(f%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let u=0;u<f;u+=8)N(this,u,u+7),N(this,u+1,u+6),N(this,u+2,u+5),N(this,u+3,u+4);return this},i.prototype.toString=function(){let f=this.length;return f===0?"":arguments.length===0?q(this,0,f):_.apply(this,arguments)},i.prototype.toLocaleString=i.prototype.toString,i.prototype.equals=function(f){if(!i.isBuffer(f))throw new TypeError("Argument must be a Buffer");return this===f?!0:i.compare(this,f)===0},i.prototype.inspect=function(){let f="",u=Wt.INSPECT_MAX_BYTES;return f=this.toString("hex",0,u).replace(/(.{2})/g,"$1 ").trim(),this.length>u&&(f+=" ... "),"<Buffer "+f+">"},t&&(i.prototype[t]=i.prototype.inspect),i.prototype.compare=function(f,u,p,v,T){if(z(f,Uint8Array)&&(f=i.from(f,f.offset,f.byteLength)),!i.isBuffer(f))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof f);if(u===void 0&&(u=0),p===void 0&&(p=f?f.length:0),v===void 0&&(v=0),T===void 0&&(T=this.length),u<0||p>f.length||v<0||T>this.length)throw new RangeError("out of range index");if(v>=T&&u>=p)return 0;if(v>=T)return-1;if(u>=p)return 1;if(u>>>=0,p>>>=0,v>>>=0,T>>>=0,this===f)return 0;let w=T-v,P=p-u,H=Math.min(w,P),fe=this.slice(v,T),ie=f.slice(u,p);for(let ye=0;ye<H;++ye)if(fe[ye]!==ie[ye]){w=fe[ye],P=ie[ye];break}return w<P?-1:P<w?1:0};function j(f,u,p,v,T){if(f.length===0)return-1;if(typeof p=="string"?(v=p,p=0):p>2147483647?p=2147483647:p<-2147483648&&(p=-2147483648),p=+p,we(p)&&(p=T?0:f.length-1),p<0&&(p=f.length+p),p>=f.length){if(T)return-1;p=f.length-1}else if(p<0)if(T)p=0;else return-1;if(typeof u=="string"&&(u=i.from(u,v)),i.isBuffer(u))return u.length===0?-1:O(f,u,p,v,T);if(typeof u=="number")return u=u&255,typeof Uint8Array.prototype.indexOf=="function"?T?Uint8Array.prototype.indexOf.call(f,u,p):Uint8Array.prototype.lastIndexOf.call(f,u,p):O(f,[u],p,v,T);throw new TypeError("val must be string, number or Buffer")}function O(f,u,p,v,T){let w=1,P=f.length,H=u.length;if(v!==void 0&&(v=String(v).toLowerCase(),v==="ucs2"||v==="ucs-2"||v==="utf16le"||v==="utf-16le")){if(f.length<2||u.length<2)return-1;w=2,P/=2,H/=2,p/=2}function fe(ye,Se){return w===1?ye[Se]:ye.readUInt16BE(Se*w)}let ie;if(T){let ye=-1;for(ie=p;ie<P;ie++)if(fe(f,ie)===fe(u,ye===-1?0:ie-ye)){if(ye===-1&&(ye=ie),ie-ye+1===H)return ye*w}else ye!==-1&&(ie-=ie-ye),ye=-1}else for(p+H>P&&(p=P-H),ie=p;ie>=0;ie--){let ye=!0;for(let Se=0;Se<H;Se++)if(fe(f,ie+Se)!==fe(u,Se)){ye=!1;break}if(ye)return ie}return-1}i.prototype.includes=function(f,u,p){return this.indexOf(f,u,p)!==-1},i.prototype.indexOf=function(f,u,p){return j(this,f,u,p,!0)},i.prototype.lastIndexOf=function(f,u,p){return j(this,f,u,p,!1)};function C(f,u,p,v){p=Number(p)||0;let T=f.length-p;v?(v=Number(v),v>T&&(v=T)):v=T;let w=u.length;v>w/2&&(v=w/2);let P;for(P=0;P<v;++P){let H=parseInt(u.substr(P*2,2),16);if(we(H))return P;f[p+P]=H}return P}function x(f,u,p,v){return U(F(u,f.length-p),f,p,v)}function W(f,u,p,v){return U(D(u),f,p,v)}function Q(f,u,p,v){return U(G(u),f,p,v)}function ee(f,u,p,v){return U(te(u,f.length-p),f,p,v)}i.prototype.write=function(f,u,p,v){if(u===void 0)v="utf8",p=this.length,u=0;else if(p===void 0&&typeof u=="string")v=u,p=this.length,u=0;else if(isFinite(u))u=u>>>0,isFinite(p)?(p=p>>>0,v===void 0&&(v="utf8")):(v=p,p=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let T=this.length-u;if((p===void 0||p>T)&&(p=T),f.length>0&&(p<0||u<0)||u>this.length)throw new RangeError("Attempt to write outside buffer bounds");v||(v="utf8");let w=!1;for(;;)switch(v){case"hex":return C(this,f,u,p);case"utf8":case"utf-8":return x(this,f,u,p);case"ascii":case"latin1":case"binary":return W(this,f,u,p);case"base64":return Q(this,f,u,p);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ee(this,f,u,p);default:if(w)throw new TypeError("Unknown encoding: "+v);v=(""+v).toLowerCase(),w=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function S(f,u,p){return u===0&&p===f.length?e.fromByteArray(f):e.fromByteArray(f.slice(u,p))}function q(f,u,p){p=Math.min(f.length,p);let v=[],T=u;for(;T<p;){let w=f[T],P=null,H=w>239?4:w>223?3:w>191?2:1;if(T+H<=p){let fe,ie,ye,Se;switch(H){case 1:w<128&&(P=w);break;case 2:fe=f[T+1],(fe&192)===128&&(Se=(w&31)<<6|fe&63,Se>127&&(P=Se));break;case 3:fe=f[T+1],ie=f[T+2],(fe&192)===128&&(ie&192)===128&&(Se=(w&15)<<12|(fe&63)<<6|ie&63,Se>2047&&(Se<55296||Se>57343)&&(P=Se));break;case 4:fe=f[T+1],ie=f[T+2],ye=f[T+3],(fe&192)===128&&(ie&192)===128&&(ye&192)===128&&(Se=(w&15)<<18|(fe&63)<<12|(ie&63)<<6|ye&63,Se>65535&&Se<1114112&&(P=Se))}}P===null?(P=65533,H=1):P>65535&&(P-=65536,v.push(P>>>10&1023|55296),P=56320|P&1023),v.push(P),T+=H}return K(v)}let Z=4096;function K(f){let u=f.length;if(u<=Z)return String.fromCharCode.apply(String,f);let p="",v=0;for(;v<u;)p+=String.fromCharCode.apply(String,f.slice(v,v+=Z));return p}function ge(f,u,p){let v="";p=Math.min(f.length,p);for(let T=u;T<p;++T)v+=String.fromCharCode(f[T]&127);return v}function ne(f,u,p){let v="";p=Math.min(f.length,p);for(let T=u;T<p;++T)v+=String.fromCharCode(f[T]);return v}function $(f,u,p){let v=f.length;(!u||u<0)&&(u=0),(!p||p<0||p>v)&&(p=v);let T="";for(let w=u;w<p;++w)T+=_e[f[w]];return T}function be(f,u,p){let v=f.slice(u,p),T="";for(let w=0;w<v.length-1;w+=2)T+=String.fromCharCode(v[w]+v[w+1]*256);return T}i.prototype.slice=function(f,u){let p=this.length;f=~~f,u=u===void 0?p:~~u,f<0?(f+=p,f<0&&(f=0)):f>p&&(f=p),u<0?(u+=p,u<0&&(u=0)):u>p&&(u=p),u<f&&(u=f);let v=this.subarray(f,u);return Object.setPrototypeOf(v,i.prototype),v};function re(f,u,p){if(f%1!==0||f<0)throw new RangeError("offset is not uint");if(f+u>p)throw new RangeError("Trying to access beyond buffer length")}i.prototype.readUintLE=i.prototype.readUIntLE=function(f,u,p){f=f>>>0,u=u>>>0,p||re(f,u,this.length);let v=this[f],T=1,w=0;for(;++w<u&&(T*=256);)v+=this[f+w]*T;return v},i.prototype.readUintBE=i.prototype.readUIntBE=function(f,u,p){f=f>>>0,u=u>>>0,p||re(f,u,this.length);let v=this[f+--u],T=1;for(;u>0&&(T*=256);)v+=this[f+--u]*T;return v},i.prototype.readUint8=i.prototype.readUInt8=function(f,u){return f=f>>>0,u||re(f,1,this.length),this[f]},i.prototype.readUint16LE=i.prototype.readUInt16LE=function(f,u){return f=f>>>0,u||re(f,2,this.length),this[f]|this[f+1]<<8},i.prototype.readUint16BE=i.prototype.readUInt16BE=function(f,u){return f=f>>>0,u||re(f,2,this.length),this[f]<<8|this[f+1]},i.prototype.readUint32LE=i.prototype.readUInt32LE=function(f,u){return f=f>>>0,u||re(f,4,this.length),(this[f]|this[f+1]<<8|this[f+2]<<16)+this[f+3]*16777216},i.prototype.readUint32BE=i.prototype.readUInt32BE=function(f,u){return f=f>>>0,u||re(f,4,this.length),this[f]*16777216+(this[f+1]<<16|this[f+2]<<8|this[f+3])},i.prototype.readBigUInt64LE=Ae(function(f){f=f>>>0,X(f,"offset");let u=this[f],p=this[f+7];(u===void 0||p===void 0)&&ue(f,this.length-8);let v=u+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24,T=this[++f]+this[++f]*2**8+this[++f]*2**16+p*2**24;return BigInt(v)+(BigInt(T)<<BigInt(32))}),i.prototype.readBigUInt64BE=Ae(function(f){f=f>>>0,X(f,"offset");let u=this[f],p=this[f+7];(u===void 0||p===void 0)&&ue(f,this.length-8);let v=u*2**24+this[++f]*2**16+this[++f]*2**8+this[++f],T=this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+p;return(BigInt(v)<<BigInt(32))+BigInt(T)}),i.prototype.readIntLE=function(f,u,p){f=f>>>0,u=u>>>0,p||re(f,u,this.length);let v=this[f],T=1,w=0;for(;++w<u&&(T*=256);)v+=this[f+w]*T;return T*=128,v>=T&&(v-=Math.pow(2,8*u)),v},i.prototype.readIntBE=function(f,u,p){f=f>>>0,u=u>>>0,p||re(f,u,this.length);let v=u,T=1,w=this[f+--v];for(;v>0&&(T*=256);)w+=this[f+--v]*T;return T*=128,w>=T&&(w-=Math.pow(2,8*u)),w},i.prototype.readInt8=function(f,u){return f=f>>>0,u||re(f,1,this.length),this[f]&128?(255-this[f]+1)*-1:this[f]},i.prototype.readInt16LE=function(f,u){f=f>>>0,u||re(f,2,this.length);let p=this[f]|this[f+1]<<8;return p&32768?p|4294901760:p},i.prototype.readInt16BE=function(f,u){f=f>>>0,u||re(f,2,this.length);let p=this[f+1]|this[f]<<8;return p&32768?p|4294901760:p},i.prototype.readInt32LE=function(f,u){return f=f>>>0,u||re(f,4,this.length),this[f]|this[f+1]<<8|this[f+2]<<16|this[f+3]<<24},i.prototype.readInt32BE=function(f,u){return f=f>>>0,u||re(f,4,this.length),this[f]<<24|this[f+1]<<16|this[f+2]<<8|this[f+3]},i.prototype.readBigInt64LE=Ae(function(f){f=f>>>0,X(f,"offset");let u=this[f],p=this[f+7];(u===void 0||p===void 0)&&ue(f,this.length-8);let v=this[f+4]+this[f+5]*2**8+this[f+6]*2**16+(p<<24);return(BigInt(v)<<BigInt(32))+BigInt(u+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24)}),i.prototype.readBigInt64BE=Ae(function(f){f=f>>>0,X(f,"offset");let u=this[f],p=this[f+7];(u===void 0||p===void 0)&&ue(f,this.length-8);let v=(u<<24)+this[++f]*2**16+this[++f]*2**8+this[++f];return(BigInt(v)<<BigInt(32))+BigInt(this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+p)}),i.prototype.readFloatLE=function(f,u){return f=f>>>0,u||re(f,4,this.length),r.read(this,f,!0,23,4)},i.prototype.readFloatBE=function(f,u){return f=f>>>0,u||re(f,4,this.length),r.read(this,f,!1,23,4)},i.prototype.readDoubleLE=function(f,u){return f=f>>>0,u||re(f,8,this.length),r.read(this,f,!0,52,8)},i.prototype.readDoubleBE=function(f,u){return f=f>>>0,u||re(f,8,this.length),r.read(this,f,!1,52,8)};function ve(f,u,p,v,T,w){if(!i.isBuffer(f))throw new TypeError('"buffer" argument must be a Buffer instance');if(u>T||u<w)throw new RangeError('"value" argument is out of bounds');if(p+v>f.length)throw new RangeError("Index out of range")}i.prototype.writeUintLE=i.prototype.writeUIntLE=function(f,u,p,v){if(f=+f,u=u>>>0,p=p>>>0,!v){let P=Math.pow(2,8*p)-1;ve(this,f,u,p,P,0)}let T=1,w=0;for(this[u]=f&255;++w<p&&(T*=256);)this[u+w]=f/T&255;return u+p},i.prototype.writeUintBE=i.prototype.writeUIntBE=function(f,u,p,v){if(f=+f,u=u>>>0,p=p>>>0,!v){let P=Math.pow(2,8*p)-1;ve(this,f,u,p,P,0)}let T=p-1,w=1;for(this[u+T]=f&255;--T>=0&&(w*=256);)this[u+T]=f/w&255;return u+p},i.prototype.writeUint8=i.prototype.writeUInt8=function(f,u,p){return f=+f,u=u>>>0,p||ve(this,f,u,1,255,0),this[u]=f&255,u+1},i.prototype.writeUint16LE=i.prototype.writeUInt16LE=function(f,u,p){return f=+f,u=u>>>0,p||ve(this,f,u,2,65535,0),this[u]=f&255,this[u+1]=f>>>8,u+2},i.prototype.writeUint16BE=i.prototype.writeUInt16BE=function(f,u,p){return f=+f,u=u>>>0,p||ve(this,f,u,2,65535,0),this[u]=f>>>8,this[u+1]=f&255,u+2},i.prototype.writeUint32LE=i.prototype.writeUInt32LE=function(f,u,p){return f=+f,u=u>>>0,p||ve(this,f,u,4,4294967295,0),this[u+3]=f>>>24,this[u+2]=f>>>16,this[u+1]=f>>>8,this[u]=f&255,u+4},i.prototype.writeUint32BE=i.prototype.writeUInt32BE=function(f,u,p){return f=+f,u=u>>>0,p||ve(this,f,u,4,4294967295,0),this[u]=f>>>24,this[u+1]=f>>>16,this[u+2]=f>>>8,this[u+3]=f&255,u+4};function A(f,u,p,v,T){J(u,v,T,f,p,7);let w=Number(u&BigInt(4294967295));f[p++]=w,w=w>>8,f[p++]=w,w=w>>8,f[p++]=w,w=w>>8,f[p++]=w;let P=Number(u>>BigInt(32)&BigInt(4294967295));return f[p++]=P,P=P>>8,f[p++]=P,P=P>>8,f[p++]=P,P=P>>8,f[p++]=P,p}function Y(f,u,p,v,T){J(u,v,T,f,p,7);let w=Number(u&BigInt(4294967295));f[p+7]=w,w=w>>8,f[p+6]=w,w=w>>8,f[p+5]=w,w=w>>8,f[p+4]=w;let P=Number(u>>BigInt(32)&BigInt(4294967295));return f[p+3]=P,P=P>>8,f[p+2]=P,P=P>>8,f[p+1]=P,P=P>>8,f[p]=P,p+8}i.prototype.writeBigUInt64LE=Ae(function(f,u=0){return A(this,f,u,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeBigUInt64BE=Ae(function(f,u=0){return Y(this,f,u,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeIntLE=function(f,u,p,v){if(f=+f,u=u>>>0,!v){let H=Math.pow(2,8*p-1);ve(this,f,u,p,H-1,-H)}let T=0,w=1,P=0;for(this[u]=f&255;++T<p&&(w*=256);)f<0&&P===0&&this[u+T-1]!==0&&(P=1),this[u+T]=(f/w>>0)-P&255;return u+p},i.prototype.writeIntBE=function(f,u,p,v){if(f=+f,u=u>>>0,!v){let H=Math.pow(2,8*p-1);ve(this,f,u,p,H-1,-H)}let T=p-1,w=1,P=0;for(this[u+T]=f&255;--T>=0&&(w*=256);)f<0&&P===0&&this[u+T+1]!==0&&(P=1),this[u+T]=(f/w>>0)-P&255;return u+p},i.prototype.writeInt8=function(f,u,p){return f=+f,u=u>>>0,p||ve(this,f,u,1,127,-128),f<0&&(f=255+f+1),this[u]=f&255,u+1},i.prototype.writeInt16LE=function(f,u,p){return f=+f,u=u>>>0,p||ve(this,f,u,2,32767,-32768),this[u]=f&255,this[u+1]=f>>>8,u+2},i.prototype.writeInt16BE=function(f,u,p){return f=+f,u=u>>>0,p||ve(this,f,u,2,32767,-32768),this[u]=f>>>8,this[u+1]=f&255,u+2},i.prototype.writeInt32LE=function(f,u,p){return f=+f,u=u>>>0,p||ve(this,f,u,4,2147483647,-2147483648),this[u]=f&255,this[u+1]=f>>>8,this[u+2]=f>>>16,this[u+3]=f>>>24,u+4},i.prototype.writeInt32BE=function(f,u,p){return f=+f,u=u>>>0,p||ve(this,f,u,4,2147483647,-2147483648),f<0&&(f=4294967295+f+1),this[u]=f>>>24,this[u+1]=f>>>16,this[u+2]=f>>>8,this[u+3]=f&255,u+4},i.prototype.writeBigInt64LE=Ae(function(f,u=0){return A(this,f,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),i.prototype.writeBigInt64BE=Ae(function(f,u=0){return Y(this,f,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ce(f,u,p,v,T,w){if(p+v>f.length)throw new RangeError("Index out of range");if(p<0)throw new RangeError("Index out of range")}function Ee(f,u,p,v,T){return u=+u,p=p>>>0,T||ce(f,u,p,4),r.write(f,u,p,v,23,4),p+4}i.prototype.writeFloatLE=function(f,u,p){return Ee(this,f,u,!0,p)},i.prototype.writeFloatBE=function(f,u,p){return Ee(this,f,u,!1,p)};function he(f,u,p,v,T){return u=+u,p=p>>>0,T||ce(f,u,p,8),r.write(f,u,p,v,52,8),p+8}i.prototype.writeDoubleLE=function(f,u,p){return he(this,f,u,!0,p)},i.prototype.writeDoubleBE=function(f,u,p){return he(this,f,u,!1,p)},i.prototype.copy=function(f,u,p,v){if(!i.isBuffer(f))throw new TypeError("argument should be a Buffer");if(p||(p=0),!v&&v!==0&&(v=this.length),u>=f.length&&(u=f.length),u||(u=0),v>0&&v<p&&(v=p),v===p||f.length===0||this.length===0)return 0;if(u<0)throw new RangeError("targetStart out of bounds");if(p<0||p>=this.length)throw new RangeError("Index out of range");if(v<0)throw new RangeError("sourceEnd out of bounds");v>this.length&&(v=this.length),f.length-u<v-p&&(v=f.length-u+p);let T=v-p;return this===f&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(u,p,v):Uint8Array.prototype.set.call(f,this.subarray(p,v),u),T},i.prototype.fill=function(f,u,p,v){if(typeof f=="string"){if(typeof u=="string"?(v=u,u=0,p=this.length):typeof p=="string"&&(v=p,p=this.length),v!==void 0&&typeof v!="string")throw new TypeError("encoding must be a string");if(typeof v=="string"&&!i.isEncoding(v))throw new TypeError("Unknown encoding: "+v);if(f.length===1){let w=f.charCodeAt(0);(v==="utf8"&&w<128||v==="latin1")&&(f=w)}}else typeof f=="number"?f=f&255:typeof f=="boolean"&&(f=Number(f));if(u<0||this.length<u||this.length<p)throw new RangeError("Out of range index");if(p<=u)return this;u=u>>>0,p=p===void 0?this.length:p>>>0,f||(f=0);let T;if(typeof f=="number")for(T=u;T<p;++T)this[T]=f;else{let w=i.isBuffer(f)?f:i.from(f,v),P=w.length;if(P===0)throw new TypeError('The value "'+f+'" is invalid for argument "value"');for(T=0;T<p-u;++T)this[T+u]=w[T%P]}return this};let M={};function E(f,u,p){M[f]=class extends p{constructor(){super(),Object.defineProperty(this,"message",{value:u.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${f}]`,this.stack,delete this.name}get code(){return f}set code(v){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:v,writable:!0})}toString(){return`${this.name} [${f}]: ${this.message}`}}}E("ERR_BUFFER_OUT_OF_BOUNDS",function(f){return f?`${f} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),E("ERR_INVALID_ARG_TYPE",function(f,u){return`The "${f}" argument must be of type number. Received type ${typeof u}`},TypeError),E("ERR_OUT_OF_RANGE",function(f,u,p){let v=`The value of "${f}" is out of range.`,T=p;return Number.isInteger(p)&&Math.abs(p)>2**32?T=V(String(p)):typeof p=="bigint"&&(T=String(p),(p>BigInt(2)**BigInt(32)||p<-(BigInt(2)**BigInt(32)))&&(T=V(T)),T+="n"),v+=` It must be ${u}. Received ${T}`,v},RangeError);function V(f){let u="",p=f.length,v=f[0]==="-"?1:0;for(;p>=v+4;p-=3)u=`_${f.slice(p-3,p)}${u}`;return`${f.slice(0,p)}${u}`}function le(f,u,p){X(u,"offset"),(f[u]===void 0||f[u+p]===void 0)&&ue(u,f.length-(p+1))}function J(f,u,p,v,T,w){if(f>p||f<u){let P=typeof u=="bigint"?"n":"",H;throw u===0||u===BigInt(0)?H=`>= 0${P} and < 2${P} ** ${(w+1)*8}${P}`:H=`>= -(2${P} ** ${(w+1)*8-1}${P}) and < 2 ** ${(w+1)*8-1}${P}`,new M.ERR_OUT_OF_RANGE("value",H,f)}le(v,T,w)}function X(f,u){if(typeof f!="number")throw new M.ERR_INVALID_ARG_TYPE(u,"number",f)}function ue(f,u,p){throw Math.floor(f)!==f?(X(f,p),new M.ERR_OUT_OF_RANGE("offset","an integer",f)):u<0?new M.ERR_BUFFER_OUT_OF_BOUNDS:new M.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${u}`,f)}let de=/[^+/0-9A-Za-z-_]/g;function R(f){if(f=f.split("=")[0],f=f.trim().replace(de,""),f.length<2)return"";for(;f.length%4!==0;)f=f+"=";return f}function F(f,u){u=u||1/0;let p,v=f.length,T=null,w=[];for(let P=0;P<v;++P){if(p=f.charCodeAt(P),p>55295&&p<57344){if(!T){if(p>56319){(u-=3)>-1&&w.push(239,191,189);continue}else if(P+1===v){(u-=3)>-1&&w.push(239,191,189);continue}T=p;continue}if(p<56320){(u-=3)>-1&&w.push(239,191,189),T=p;continue}p=(T-55296<<10|p-56320)+65536}else T&&(u-=3)>-1&&w.push(239,191,189);if(T=null,p<128){if((u-=1)<0)break;w.push(p)}else if(p<2048){if((u-=2)<0)break;w.push(p>>6|192,p&63|128)}else if(p<65536){if((u-=3)<0)break;w.push(p>>12|224,p>>6&63|128,p&63|128)}else if(p<1114112){if((u-=4)<0)break;w.push(p>>18|240,p>>12&63|128,p>>6&63|128,p&63|128)}else throw new Error("Invalid code point")}return w}function D(f){let u=[];for(let p=0;p<f.length;++p)u.push(f.charCodeAt(p)&255);return u}function te(f,u){let p,v,T,w=[];for(let P=0;P<f.length&&!((u-=2)<0);++P)p=f.charCodeAt(P),v=p>>8,T=p%256,w.push(T),w.push(v);return w}function G(f){return e.toByteArray(R(f))}function U(f,u,p,v){let T;for(T=0;T<v&&!(T+p>=u.length||T>=f.length);++T)u[T+p]=f[T];return T}function z(f,u){return f instanceof u||f!=null&&f.constructor!=null&&f.constructor.name!=null&&f.constructor.name===u.name}function we(f){return f!==f}let _e=function(){let f="0123456789abcdef",u=new Array(256);for(let p=0;p<16;++p){let v=p*16;for(let T=0;T<16;++T)u[v+T]=f[p]+f[T]}return u}();function Ae(f){return typeof BigInt>"u"?Pe:f}function Pe(){throw new Error("BigInt not supported")}return Wt}var pr,An,Tr,In,Wt,Tn,Ct,Kr,fs,ds,it=tt(()=>{oe(),ae(),se(),pr={},An=!1,Tr={},In=!1,Wt={},Tn=!1,Ct=_l(),Ct.Buffer,Ct.SlowBuffer,Ct.INSPECT_MAX_BYTES,Ct.kMaxLength,Kr=Ct.Buffer,fs=Ct.INSPECT_MAX_BYTES,ds=Ct.kMaxLength}),ae=tt(()=>{it()}),El=me(e=>{oe(),ae(),se(),Object.defineProperty(e,"__esModule",{value:!0});var r=class{constructor(t){this.aliasToTopic={},this.max=t}put(t,a){return a===0||a>this.max?!1:(this.aliasToTopic[a]=t,this.length=Object.keys(this.aliasToTopic).length,!0)}getTopicByAlias(t){return this.aliasToTopic[t]}clear(){this.aliasToTopic={}}};e.default=r}),Xe=me((e,r)=>{oe(),ae(),se(),r.exports={ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,a){return t.includes(a)},ArrayPrototypeIndexOf(t,a){return t.indexOf(a)},ArrayPrototypeJoin(t,a){return t.join(a)},ArrayPrototypeMap(t,a){return t.map(a)},ArrayPrototypePop(t,a){return t.pop(a)},ArrayPrototypePush(t,a){return t.push(a)},ArrayPrototypeSlice(t,a,h){return t.slice(a,h)},Error,FunctionPrototypeCall(t,a,...h){return t.call(a,...h)},FunctionPrototypeSymbolHasInstance(t,a){return Function.prototype[Symbol.hasInstance].call(t,a)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,a){return Object.defineProperties(t,a)},ObjectDefineProperty(t,a,h){return Object.defineProperty(t,a,h)},ObjectGetOwnPropertyDescriptor(t,a){return Object.getOwnPropertyDescriptor(t,a)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,a){return Object.setPrototypeOf(t,a)},Promise,PromisePrototypeCatch(t,a){return t.catch(a)},PromisePrototypeThen(t,a,h){return t.then(a,h)},PromiseReject(t){return Promise.reject(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,a){return t.test(a)},SafeSet:Set,String,StringPrototypeSlice(t,a,h){return t.slice(a,h)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,TypedArrayPrototypeSet(t,a,h){return t.set(a,h)},Uint8Array}}),xt=me((e,r)=>{oe(),ae(),se();var t=(it(),Ue(rt)),a=Object.getPrototypeOf(async function(){}).constructor,h=globalThis.Blob||t.Blob,n=typeof h<"u"?function(s){return s instanceof h}:function(s){return!1},i=class extends Error{constructor(s){if(!Array.isArray(s))throw new TypeError(`Expected input to be an Array, got ${typeof s}`);let o="";for(let l=0;l<s.length;l++)o+=`    ${s[l].stack}
`;super(o),this.name="AggregateError",this.errors=s}};r.exports={AggregateError:i,kEmptyObject:Object.freeze({}),once(s){let o=!1;return function(...l){o||(o=!0,s.apply(this,l))}},createDeferredPromise:function(){let s,o;return{promise:new Promise((l,c)=>{s=l,o=c}),resolve:s,reject:o}},promisify(s){return new Promise((o,l)=>{s((c,...d)=>c?l(c):o(...d))})},debuglog(){return function(){}},format(s,...o){return s.replace(/%([sdifj])/g,function(...[l,c]){let d=o.shift();return c==="f"?d.toFixed(6):c==="j"?JSON.stringify(d):c==="s"&&typeof d=="object"?`${d.constructor!==Object?d.constructor.name:""} {}`.trim():d.toString()})},inspect(s){switch(typeof s){case"string":if(s.includes("'"))if(s.includes('"')){if(!s.includes("`")&&!s.includes("${"))return`\`${s}\``}else return`"${s}"`;return`'${s}'`;case"number":return isNaN(s)?"NaN":Object.is(s,-0)?String(s):s;case"bigint":return`${String(s)}n`;case"boolean":case"undefined":return String(s);case"object":return"{}"}},types:{isAsyncFunction(s){return s instanceof a},isArrayBufferView(s){return ArrayBuffer.isView(s)}},isBlob:n},r.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}),Vn=me((e,r)=>{oe(),ae(),se();var{AbortController:t,AbortSignal:a}=typeof self<"u"?self:typeof window<"u"?window:void 0;r.exports=t,r.exports.AbortSignal=a,r.exports.default=t}),ut=me((e,r)=>{oe(),ae(),se();var{format:t,inspect:a,AggregateError:h}=xt(),n=globalThis.AggregateError||h,i=Symbol("kIsNodeError"),s=["string","function","number","object","Function","Object","boolean","bigint","symbol"],o=/^([A-Z][a-z0-9]*)+$/,l="__node_internal_",c={};function d(k,_){if(!k)throw new c.ERR_INTERNAL_ASSERTION(_)}function g(k){let _="",N=k.length,j=k[0]==="-"?1:0;for(;N>=j+4;N-=3)_=`_${k.slice(N-3,N)}${_}`;return`${k.slice(0,N)}${_}`}function m(k,_,N){if(typeof _=="function")return d(_.length<=N.length,`Code: ${k}; The provided arguments length (${N.length}) does not match the required ones (${_.length}).`),_(...N);let j=(_.match(/%[dfijoOs]/g)||[]).length;return d(j===N.length,`Code: ${k}; The provided arguments length (${N.length}) does not match the required ones (${j}).`),N.length===0?_:t(_,...N)}function b(k,_,N){N||(N=Error);class j extends N{constructor(...C){super(m(k,_,C))}toString(){return`${this.name} [${k}]: ${this.message}`}}Object.defineProperties(j.prototype,{name:{value:N.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${k}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),j.prototype.code=k,j.prototype[i]=!0,c[k]=j}function y(k){let _=l+k.name;return Object.defineProperty(k,"name",{value:_}),k}function I(k,_){if(k&&_&&k!==_){if(Array.isArray(_.errors))return _.errors.push(k),_;let N=new n([_,k],_.message);return N.code=_.code,N}return k||_}var L=class extends Error{constructor(k="The operation was aborted",_=void 0){if(_!==void 0&&typeof _!="object")throw new c.ERR_INVALID_ARG_TYPE("options","Object",_);super(k,_),this.code="ABORT_ERR",this.name="AbortError"}};b("ERR_ASSERTION","%s",Error),b("ERR_INVALID_ARG_TYPE",(k,_,N)=>{d(typeof k=="string","'name' must be a string"),Array.isArray(_)||(_=[_]);let j="The ";k.endsWith(" argument")?j+=`${k} `:j+=`"${k}" ${k.includes(".")?"property":"argument"} `,j+="must be ";let O=[],C=[],x=[];for(let Q of _)d(typeof Q=="string","All expected entries have to be of type string"),s.includes(Q)?O.push(Q.toLowerCase()):o.test(Q)?C.push(Q):(d(Q!=="object",'The value "object" should be written as "Object"'),x.push(Q));if(C.length>0){let Q=O.indexOf("object");Q!==-1&&(O.splice(O,Q,1),C.push("Object"))}if(O.length>0){switch(O.length){case 1:j+=`of type ${O[0]}`;break;case 2:j+=`one of type ${O[0]} or ${O[1]}`;break;default:{let Q=O.pop();j+=`one of type ${O.join(", ")}, or ${Q}`}}(C.length>0||x.length>0)&&(j+=" or ")}if(C.length>0){switch(C.length){case 1:j+=`an instance of ${C[0]}`;break;case 2:j+=`an instance of ${C[0]} or ${C[1]}`;break;default:{let Q=C.pop();j+=`an instance of ${C.join(", ")}, or ${Q}`}}x.length>0&&(j+=" or ")}switch(x.length){case 0:break;case 1:x[0].toLowerCase()!==x[0]&&(j+="an "),j+=`${x[0]}`;break;case 2:j+=`one of ${x[0]} or ${x[1]}`;break;default:{let Q=x.pop();j+=`one of ${x.join(", ")}, or ${Q}`}}if(N==null)j+=`. Received ${N}`;else if(typeof N=="function"&&N.name)j+=`. Received function ${N.name}`;else if(typeof N=="object"){var W;if((W=N.constructor)!==null&&W!==void 0&&W.name)j+=`. Received an instance of ${N.constructor.name}`;else{let Q=a(N,{depth:-1});j+=`. Received ${Q}`}}else{let Q=a(N,{colors:!1});Q.length>25&&(Q=`${Q.slice(0,25)}...`),j+=`. Received type ${typeof N} (${Q})`}return j},TypeError),b("ERR_INVALID_ARG_VALUE",(k,_,N="is invalid")=>{let j=a(_);return j.length>128&&(j=j.slice(0,128)+"..."),`The ${k.includes(".")?"property":"argument"} '${k}' ${N}. Received ${j}`},TypeError),b("ERR_INVALID_RETURN_VALUE",(k,_,N)=>{var j;let O=N!=null&&(j=N.constructor)!==null&&j!==void 0&&j.name?`instance of ${N.constructor.name}`:`type ${typeof N}`;return`Expected ${k} to be returned from the "${_}" function but got ${O}.`},TypeError),b("ERR_MISSING_ARGS",(...k)=>{d(k.length>0,"At least one arg needs to be specified");let _,N=k.length;switch(k=(Array.isArray(k)?k:[k]).map(j=>`"${j}"`).join(" or "),N){case 1:_+=`The ${k[0]} argument`;break;case 2:_+=`The ${k[0]} and ${k[1]} arguments`;break;default:{let j=k.pop();_+=`The ${k.join(", ")}, and ${j} arguments`}break}return`${_} must be specified`},TypeError),b("ERR_OUT_OF_RANGE",(k,_,N)=>{d(_,'Missing "range" argument');let j;return Number.isInteger(N)&&Math.abs(N)>2**32?j=g(String(N)):typeof N=="bigint"?(j=String(N),(N>2n**32n||N<-(2n**32n))&&(j=g(j)),j+="n"):j=a(N),`The value of "${k}" is out of range. It must be ${_}. Received ${j}`},RangeError),b("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),b("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),b("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),b("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),b("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),b("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),b("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),b("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),b("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),b("ERR_STREAM_WRITE_AFTER_END","write after end",Error),b("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),r.exports={AbortError:L,aggregateTwoErrors:y(I),hideStackFrames:y,codes:c}}),Jr=me((e,r)=>{oe(),ae(),se();var{ArrayIsArray:t,ArrayPrototypeIncludes:a,ArrayPrototypeJoin:h,ArrayPrototypeMap:n,NumberIsInteger:i,NumberIsNaN:s,NumberMAX_SAFE_INTEGER:o,NumberMIN_SAFE_INTEGER:l,NumberParseInt:c,ObjectPrototypeHasOwnProperty:d,RegExpPrototypeExec:g,String:m,StringPrototypeToUpperCase:b,StringPrototypeTrim:y}=Xe(),{hideStackFrames:I,codes:{ERR_SOCKET_BAD_PORT:L,ERR_INVALID_ARG_TYPE:k,ERR_INVALID_ARG_VALUE:_,ERR_OUT_OF_RANGE:N,ERR_UNKNOWN_SIGNAL:j}}=ut(),{normalizeEncoding:O}=xt(),{isAsyncFunction:C,isArrayBufferView:x}=xt().types,W={};function Q(U){return U===(U|0)}function ee(U){return U===U>>>0}var S=/^[0-7]+$/,q="must be a 32-bit unsigned integer or an octal string";function Z(U,z,we){if(typeof U>"u"&&(U=we),typeof U=="string"){if(g(S,U)===null)throw new _(z,U,q);U=c(U,8)}return ne(U,z),U}var K=I((U,z,we=l,_e=o)=>{if(typeof U!="number")throw new k(z,"number",U);if(!i(U))throw new N(z,"an integer",U);if(U<we||U>_e)throw new N(z,`>= ${we} && <= ${_e}`,U)}),ge=I((U,z,we=-2147483648,_e=2147483647)=>{if(typeof U!="number")throw new k(z,"number",U);if(!i(U))throw new N(z,"an integer",U);if(U<we||U>_e)throw new N(z,`>= ${we} && <= ${_e}`,U)}),ne=I((U,z,we=!1)=>{if(typeof U!="number")throw new k(z,"number",U);if(!i(U))throw new N(z,"an integer",U);let _e=we?1:0,Ae=4294967295;if(U<_e||U>Ae)throw new N(z,`>= ${_e} && <= ${Ae}`,U)});function $(U,z){if(typeof U!="string")throw new k(z,"string",U)}function be(U,z,we=void 0,_e){if(typeof U!="number")throw new k(z,"number",U);if(we!=null&&U<we||_e!=null&&U>_e||(we!=null||_e!=null)&&s(U))throw new N(z,`${we!=null?`>= ${we}`:""}${we!=null&&_e!=null?" && ":""}${_e!=null?`<= ${_e}`:""}`,U)}var re=I((U,z,we)=>{if(!a(we,U)){let _e="must be one of: "+h(n(we,Ae=>typeof Ae=="string"?`'${Ae}'`:m(Ae)),", ");throw new _(z,U,_e)}});function ve(U,z){if(typeof U!="boolean")throw new k(z,"boolean",U)}function A(U,z,we){return U==null||!d(U,z)?we:U[z]}var Y=I((U,z,we=null)=>{let _e=A(we,"allowArray",!1),Ae=A(we,"allowFunction",!1);if(!A(we,"nullable",!1)&&U===null||!_e&&t(U)||typeof U!="object"&&(!Ae||typeof U!="function"))throw new k(z,"Object",U)}),ce=I((U,z)=>{if(U!=null&&typeof U!="object"&&typeof U!="function")throw new k(z,"a dictionary",U)}),Ee=I((U,z,we=0)=>{if(!t(U))throw new k(z,"Array",U);if(U.length<we){let _e=`must be longer than ${we}`;throw new _(z,U,_e)}});function he(U,z){Ee(U,z);for(let we=0;we<U.length;we++)$(U[we],`${z}[${we}]`)}function M(U,z){Ee(U,z);for(let we=0;we<U.length;we++)ve(U[we],`${z}[${we}]`)}function E(U,z="signal"){if($(U,z),W[U]===void 0)throw W[b(U)]!==void 0?new j(U+" (signals must use all capital letters)"):new j(U)}var V=I((U,z="buffer")=>{if(!x(U))throw new k(z,["Buffer","TypedArray","DataView"],U)});function le(U,z){let we=O(z),_e=U.length;if(we==="hex"&&_e%2!==0)throw new _("encoding",z,`is invalid for data of length ${_e}`)}function J(U,z="Port",we=!0){if(typeof U!="number"&&typeof U!="string"||typeof U=="string"&&y(U).length===0||+U!==+U>>>0||U>65535||U===0&&!we)throw new L(z,U,we);return U|0}var X=I((U,z)=>{if(U!==void 0&&(U===null||typeof U!="object"||!("aborted"in U)))throw new k(z,"AbortSignal",U)}),ue=I((U,z)=>{if(typeof U!="function")throw new k(z,"Function",U)}),de=I((U,z)=>{if(typeof U!="function"||C(U))throw new k(z,"Function",U)}),R=I((U,z)=>{if(U!==void 0)throw new k(z,"undefined",U)});function F(U,z,we){if(!a(we,U))throw new k(z,`('${h(we,"|")}')`,U)}var D=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function te(U,z){if(typeof U>"u"||!g(D,U))throw new _(z,U,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function G(U){if(typeof U=="string")return te(U,"hints"),U;if(t(U)){let z=U.length,we="";if(z===0)return we;for(let _e=0;_e<z;_e++){let Ae=U[_e];te(Ae,"hints"),we+=Ae,_e!==z-1&&(we+=", ")}return we}throw new _("hints",U,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}r.exports={isInt32:Q,isUint32:ee,parseFileMode:Z,validateArray:Ee,validateStringArray:he,validateBooleanArray:M,validateBoolean:ve,validateBuffer:V,validateDictionary:ce,validateEncoding:le,validateFunction:ue,validateInt32:ge,validateInteger:K,validateNumber:be,validateObject:Y,validateOneOf:re,validatePlainFunction:de,validatePort:J,validateSignalName:E,validateString:$,validateUint32:ne,validateUndefined:R,validateUnion:F,validateAbortSignal:X,validateLinkHeaderValue:G}}),hr=me((e,r)=>{oe(),ae(),se();var t=r.exports={},a,h;function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?a=setTimeout:a=n}catch{a=n}try{typeof clearTimeout=="function"?h=clearTimeout:h=i}catch{h=i}})();function s(L){if(a===setTimeout)return setTimeout(L,0);if((a===n||!a)&&setTimeout)return a=setTimeout,setTimeout(L,0);try{return a(L,0)}catch{try{return a.call(null,L,0)}catch{return a.call(this,L,0)}}}function o(L){if(h===clearTimeout)return clearTimeout(L);if((h===i||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(L);try{return h(L)}catch{try{return h.call(null,L)}catch{return h.call(this,L)}}}var l=[],c=!1,d,g=-1;function m(){!c||!d||(c=!1,d.length?l=d.concat(l):g=-1,l.length&&b())}function b(){if(!c){var L=s(m);c=!0;for(var k=l.length;k;){for(d=l,l=[];++g<k;)d&&d[g].run();g=-1,k=l.length}d=null,c=!1,o(L)}}t.nextTick=function(L){var k=new Array(arguments.length-1);if(arguments.length>1)for(var _=1;_<arguments.length;_++)k[_-1]=arguments[_];l.push(new y(L,k)),l.length===1&&!c&&s(b)};function y(L,k){this.fun=L,this.array=k}y.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={};function I(){}t.on=I,t.addListener=I,t.once=I,t.off=I,t.removeListener=I,t.removeAllListeners=I,t.emit=I,t.prependListener=I,t.prependOnceListener=I,t.listeners=function(L){return[]},t.binding=function(L){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(L){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}}),Nt=me((e,r)=>{oe(),ae(),se();var{Symbol:t,SymbolAsyncIterator:a,SymbolIterator:h,SymbolFor:n}=Xe(),i=t("kDestroyed"),s=t("kIsErrored"),o=t("kIsReadable"),l=t("kIsDisturbed"),c=n("nodejs.webstream.isClosedPromise"),d=n("nodejs.webstream.controllerErrorFunction");function g(A,Y=!1){var ce;return!!(A&&typeof A.pipe=="function"&&typeof A.on=="function"&&(!Y||typeof A.pause=="function"&&typeof A.resume=="function")&&(!A._writableState||((ce=A._readableState)===null||ce===void 0?void 0:ce.readable)!==!1)&&(!A._writableState||A._readableState))}function m(A){var Y;return!!(A&&typeof A.write=="function"&&typeof A.on=="function"&&(!A._readableState||((Y=A._writableState)===null||Y===void 0?void 0:Y.writable)!==!1))}function b(A){return!!(A&&typeof A.pipe=="function"&&A._readableState&&typeof A.on=="function"&&typeof A.write=="function")}function y(A){return A&&(A._readableState||A._writableState||typeof A.write=="function"&&typeof A.on=="function"||typeof A.pipe=="function"&&typeof A.on=="function")}function I(A){return!!(A&&!y(A)&&typeof A.pipeThrough=="function"&&typeof A.getReader=="function"&&typeof A.cancel=="function")}function L(A){return!!(A&&!y(A)&&typeof A.getWriter=="function"&&typeof A.abort=="function")}function k(A){return!!(A&&!y(A)&&typeof A.readable=="object"&&typeof A.writable=="object")}function _(A){return I(A)||L(A)||k(A)}function N(A,Y){return A==null?!1:Y===!0?typeof A[a]=="function":Y===!1?typeof A[h]=="function":typeof A[a]=="function"||typeof A[h]=="function"}function j(A){if(!y(A))return null;let Y=A._writableState,ce=A._readableState,Ee=Y||ce;return!!(A.destroyed||A[i]||Ee!=null&&Ee.destroyed)}function O(A){if(!m(A))return null;if(A.writableEnded===!0)return!0;let Y=A._writableState;return Y!=null&&Y.errored?!1:typeof(Y==null?void 0:Y.ended)!="boolean"?null:Y.ended}function C(A,Y){if(!m(A))return null;if(A.writableFinished===!0)return!0;let ce=A._writableState;return ce!=null&&ce.errored?!1:typeof(ce==null?void 0:ce.finished)!="boolean"?null:!!(ce.finished||Y===!1&&ce.ended===!0&&ce.length===0)}function x(A){if(!g(A))return null;if(A.readableEnded===!0)return!0;let Y=A._readableState;return!Y||Y.errored?!1:typeof(Y==null?void 0:Y.ended)!="boolean"?null:Y.ended}function W(A,Y){if(!g(A))return null;let ce=A._readableState;return ce!=null&&ce.errored?!1:typeof(ce==null?void 0:ce.endEmitted)!="boolean"?null:!!(ce.endEmitted||Y===!1&&ce.ended===!0&&ce.length===0)}function Q(A){return A&&A[o]!=null?A[o]:typeof(A==null?void 0:A.readable)!="boolean"?null:j(A)?!1:g(A)&&A.readable&&!W(A)}function ee(A){return typeof(A==null?void 0:A.writable)!="boolean"?null:j(A)?!1:m(A)&&A.writable&&!O(A)}function S(A,Y){return y(A)?j(A)?!0:!((Y==null?void 0:Y.readable)!==!1&&Q(A)||(Y==null?void 0:Y.writable)!==!1&&ee(A)):null}function q(A){var Y,ce;return y(A)?A.writableErrored?A.writableErrored:(Y=(ce=A._writableState)===null||ce===void 0?void 0:ce.errored)!==null&&Y!==void 0?Y:null:null}function Z(A){var Y,ce;return y(A)?A.readableErrored?A.readableErrored:(Y=(ce=A._readableState)===null||ce===void 0?void 0:ce.errored)!==null&&Y!==void 0?Y:null:null}function K(A){if(!y(A))return null;if(typeof A.closed=="boolean")return A.closed;let Y=A._writableState,ce=A._readableState;return typeof(Y==null?void 0:Y.closed)=="boolean"||typeof(ce==null?void 0:ce.closed)=="boolean"?(Y==null?void 0:Y.closed)||(ce==null?void 0:ce.closed):typeof A._closed=="boolean"&&ge(A)?A._closed:null}function ge(A){return typeof A._closed=="boolean"&&typeof A._defaultKeepAlive=="boolean"&&typeof A._removedConnection=="boolean"&&typeof A._removedContLen=="boolean"}function ne(A){return typeof A._sent100=="boolean"&&ge(A)}function $(A){var Y;return typeof A._consuming=="boolean"&&typeof A._dumped=="boolean"&&((Y=A.req)===null||Y===void 0?void 0:Y.upgradeOrConnect)===void 0}function be(A){if(!y(A))return null;let Y=A._writableState,ce=A._readableState,Ee=Y||ce;return!Ee&&ne(A)||!!(Ee&&Ee.autoDestroy&&Ee.emitClose&&Ee.closed===!1)}function re(A){var Y;return!!(A&&((Y=A[l])!==null&&Y!==void 0?Y:A.readableDidRead||A.readableAborted))}function ve(A){var Y,ce,Ee,he,M,E,V,le,J,X;return!!(A&&((Y=(ce=(Ee=(he=(M=(E=A[s])!==null&&E!==void 0?E:A.readableErrored)!==null&&M!==void 0?M:A.writableErrored)!==null&&he!==void 0?he:(V=A._readableState)===null||V===void 0?void 0:V.errorEmitted)!==null&&Ee!==void 0?Ee:(le=A._writableState)===null||le===void 0?void 0:le.errorEmitted)!==null&&ce!==void 0?ce:(J=A._readableState)===null||J===void 0?void 0:J.errored)!==null&&Y!==void 0?Y:!((X=A._writableState)===null||X===void 0)&&X.errored))}r.exports={kDestroyed:i,isDisturbed:re,kIsDisturbed:l,isErrored:ve,kIsErrored:s,isReadable:Q,kIsReadable:o,kIsClosedPromise:c,kControllerErrorFunction:d,isClosed:K,isDestroyed:j,isDuplexNodeStream:b,isFinished:S,isIterable:N,isReadableNodeStream:g,isReadableStream:I,isReadableEnded:x,isReadableFinished:W,isReadableErrored:Z,isNodeStream:y,isWebStream:_,isWritable:ee,isWritableNodeStream:m,isWritableStream:L,isWritableEnded:O,isWritableFinished:C,isWritableErrored:q,isServerRequest:$,isServerResponse:ne,willEmitClose:be,isTransformStream:k}}),Vt=me((e,r)=>{oe(),ae(),se();var t=hr(),{AbortError:a,codes:h}=ut(),{ERR_INVALID_ARG_TYPE:n,ERR_STREAM_PREMATURE_CLOSE:i}=h,{kEmptyObject:s,once:o}=xt(),{validateAbortSignal:l,validateFunction:c,validateObject:d,validateBoolean:g}=Jr(),{Promise:m,PromisePrototypeThen:b}=Xe(),{isClosed:y,isReadable:I,isReadableNodeStream:L,isReadableStream:k,isReadableFinished:_,isReadableErrored:N,isWritable:j,isWritableNodeStream:O,isWritableStream:C,isWritableFinished:x,isWritableErrored:W,isNodeStream:Q,willEmitClose:ee,kIsClosedPromise:S}=Nt();function q($){return $.setHeader&&typeof $.abort=="function"}var Z=()=>{};function K($,be,re){var ve,A;if(arguments.length===2?(re=be,be=s):be==null?be=s:d(be,"options"),c(re,"callback"),l(be.signal,"options.signal"),re=o(re),k($)||C($))return ge($,be,re);if(!Q($))throw new n("stream",["ReadableStream","WritableStream","Stream"],$);let Y=(ve=be.readable)!==null&&ve!==void 0?ve:L($),ce=(A=be.writable)!==null&&A!==void 0?A:O($),Ee=$._writableState,he=$._readableState,M=()=>{$.writable||le()},E=ee($)&&L($)===Y&&O($)===ce,V=x($,!1),le=()=>{V=!0,$.destroyed&&(E=!1),!(E&&(!$.readable||Y))&&(!Y||J)&&re.call($)},J=_($,!1),X=()=>{J=!0,$.destroyed&&(E=!1),!(E&&(!$.writable||ce))&&(!ce||V)&&re.call($)},ue=G=>{re.call($,G)},de=y($),R=()=>{de=!0;let G=W($)||N($);if(G&&typeof G!="boolean")return re.call($,G);if(Y&&!J&&L($,!0)&&!_($,!1))return re.call($,new i);if(ce&&!V&&!x($,!1))return re.call($,new i);re.call($)},F=()=>{de=!0;let G=W($)||N($);if(G&&typeof G!="boolean")return re.call($,G);re.call($)},D=()=>{$.req.on("finish",le)};q($)?($.on("complete",le),E||$.on("abort",R),$.req?D():$.on("request",D)):ce&&!Ee&&($.on("end",M),$.on("close",M)),!E&&typeof $.aborted=="boolean"&&$.on("aborted",R),$.on("end",X),$.on("finish",le),be.error!==!1&&$.on("error",ue),$.on("close",R),de?t.nextTick(R):Ee!=null&&Ee.errorEmitted||he!=null&&he.errorEmitted?E||t.nextTick(F):(!Y&&(!E||I($))&&(V||j($)===!1)||!ce&&(!E||j($))&&(J||I($)===!1)||he&&$.req&&$.aborted)&&t.nextTick(F);let te=()=>{re=Z,$.removeListener("aborted",R),$.removeListener("complete",le),$.removeListener("abort",R),$.removeListener("request",D),$.req&&$.req.removeListener("finish",le),$.removeListener("end",M),$.removeListener("close",M),$.removeListener("finish",le),$.removeListener("end",X),$.removeListener("error",ue),$.removeListener("close",R)};if(be.signal&&!de){let G=()=>{let U=re;te(),U.call($,new a(void 0,{cause:be.signal.reason}))};if(be.signal.aborted)t.nextTick(G);else{let U=re;re=o((...z)=>{be.signal.removeEventListener("abort",G),U.apply($,z)}),be.signal.addEventListener("abort",G)}}return te}function ge($,be,re){let ve=!1,A=Z;if(be.signal)if(A=()=>{ve=!0,re.call($,new a(void 0,{cause:be.signal.reason}))},be.signal.aborted)t.nextTick(A);else{let ce=re;re=o((...Ee)=>{be.signal.removeEventListener("abort",A),ce.apply($,Ee)}),be.signal.addEventListener("abort",A)}let Y=(...ce)=>{ve||t.nextTick(()=>re.apply($,ce))};return b($[S].promise,Y,Y),Z}function ne($,be){var re;let ve=!1;return be===null&&(be=s),(re=be)!==null&&re!==void 0&&re.cleanup&&(g(be.cleanup,"cleanup"),ve=be.cleanup),new m((A,Y)=>{let ce=K($,be,Ee=>{ve&&ce(),Ee?Y(Ee):A()})})}r.exports=K,r.exports.finished=ne}),br=me((e,r)=>{oe(),ae(),se();var t=hr(),{aggregateTwoErrors:a,codes:{ERR_MULTIPLE_CALLBACK:h},AbortError:n}=ut(),{Symbol:i}=Xe(),{kDestroyed:s,isDestroyed:o,isFinished:l,isServerRequest:c}=Nt(),d=i("kDestroy"),g=i("kConstruct");function m(S,q,Z){S&&(S.stack,q&&!q.errored&&(q.errored=S),Z&&!Z.errored&&(Z.errored=S))}function b(S,q){let Z=this._readableState,K=this._writableState,ge=K||Z;return K!=null&&K.destroyed||Z!=null&&Z.destroyed?(typeof q=="function"&&q(),this):(m(S,K,Z),K&&(K.destroyed=!0),Z&&(Z.destroyed=!0),ge.constructed?y(this,S,q):this.once(d,function(ne){y(this,a(ne,S),q)}),this)}function y(S,q,Z){let K=!1;function ge(ne){if(K)return;K=!0;let $=S._readableState,be=S._writableState;m(ne,be,$),be&&(be.closed=!0),$&&($.closed=!0),typeof Z=="function"&&Z(ne),ne?t.nextTick(I,S,ne):t.nextTick(L,S)}try{S._destroy(q||null,ge)}catch(ne){ge(ne)}}function I(S,q){k(S,q),L(S)}function L(S){let q=S._readableState,Z=S._writableState;Z&&(Z.closeEmitted=!0),q&&(q.closeEmitted=!0),(Z!=null&&Z.emitClose||q!=null&&q.emitClose)&&S.emit("close")}function k(S,q){let Z=S._readableState,K=S._writableState;K!=null&&K.errorEmitted||Z!=null&&Z.errorEmitted||(K&&(K.errorEmitted=!0),Z&&(Z.errorEmitted=!0),S.emit("error",q))}function _(){let S=this._readableState,q=this._writableState;S&&(S.constructed=!0,S.closed=!1,S.closeEmitted=!1,S.destroyed=!1,S.errored=null,S.errorEmitted=!1,S.reading=!1,S.ended=S.readable===!1,S.endEmitted=S.readable===!1),q&&(q.constructed=!0,q.destroyed=!1,q.closed=!1,q.closeEmitted=!1,q.errored=null,q.errorEmitted=!1,q.finalCalled=!1,q.prefinished=!1,q.ended=q.writable===!1,q.ending=q.writable===!1,q.finished=q.writable===!1)}function N(S,q,Z){let K=S._readableState,ge=S._writableState;if(ge!=null&&ge.destroyed||K!=null&&K.destroyed)return this;K!=null&&K.autoDestroy||ge!=null&&ge.autoDestroy?S.destroy(q):q&&(q.stack,ge&&!ge.errored&&(ge.errored=q),K&&!K.errored&&(K.errored=q),Z?t.nextTick(k,S,q):k(S,q))}function j(S,q){if(typeof S._construct!="function")return;let Z=S._readableState,K=S._writableState;Z&&(Z.constructed=!1),K&&(K.constructed=!1),S.once(g,q),!(S.listenerCount(g)>1)&&t.nextTick(O,S)}function O(S){let q=!1;function Z(K){if(q){N(S,K??new h);return}q=!0;let ge=S._readableState,ne=S._writableState,$=ne||ge;ge&&(ge.constructed=!0),ne&&(ne.constructed=!0),$.destroyed?S.emit(d,K):K?N(S,K,!0):t.nextTick(C,S)}try{S._construct(K=>{t.nextTick(Z,K)})}catch(K){t.nextTick(Z,K)}}function C(S){S.emit(g)}function x(S){return(S==null?void 0:S.setHeader)&&typeof S.abort=="function"}function W(S){S.emit("close")}function Q(S,q){S.emit("error",q),t.nextTick(W,S)}function ee(S,q){!S||o(S)||(!q&&!l(S)&&(q=new n),c(S)?(S.socket=null,S.destroy(q)):x(S)?S.abort():x(S.req)?S.req.abort():typeof S.destroy=="function"?S.destroy(q):typeof S.close=="function"?S.close():q?t.nextTick(Q,S,q):t.nextTick(W,S),S.destroyed||(S[s]=!0))}r.exports={construct:j,destroyer:ee,destroy:b,undestroy:_,errorOrDestroy:N}});function xe(){xe.init.call(this)}function Wr(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function ps(e){return e._maxListeners===void 0?xe.defaultMaxListeners:e._maxListeners}function ao(e,r,t,a){var h,n,i,s;if(Wr(t),(n=e._events)===void 0?(n=e._events=Object.create(null),e._eventsCount=0):(n.newListener!==void 0&&(e.emit("newListener",r,t.listener?t.listener:t),n=e._events),i=n[r]),i===void 0)i=n[r]=t,++e._eventsCount;else if(typeof i=="function"?i=n[r]=a?[t,i]:[i,t]:a?i.unshift(t):i.push(t),(h=ps(e))>0&&i.length>h&&!i.warned){i.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+i.length+" "+String(r)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=e,o.type=r,o.count=i.length,s=o,console&&console.warn&&console.warn(s)}return e}function Sl(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function lo(e,r,t){var a={fired:!1,wrapFn:void 0,target:e,type:r,listener:t},h=Sl.bind(a);return h.listener=t,a.wrapFn=h,h}function ho(e,r,t){var a=e._events;if(a===void 0)return[];var h=a[r];return h===void 0?[]:typeof h=="function"?t?[h.listener||h]:[h]:t?function(n){for(var i=new Array(n.length),s=0;s<i.length;++s)i[s]=n[s].listener||n[s];return i}(h):gs(h,h.length)}function uo(e){var r=this._events;if(r!==void 0){var t=r[e];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}function gs(e,r){for(var t=new Array(r),a=0;a<r;++a)t[a]=e[a];return t}var co,fo,Yt,ai,li,hi,ft,po=tt(()=>{oe(),ae(),se(),Yt=typeof Reflect=="object"?Reflect:null,ai=Yt&&typeof Yt.apply=="function"?Yt.apply:function(e,r,t){return Function.prototype.apply.call(e,r,t)},fo=Yt&&typeof Yt.ownKeys=="function"?Yt.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)},li=Number.isNaN||function(e){return e!=e},co=xe,xe.EventEmitter=xe,xe.prototype._events=void 0,xe.prototype._eventsCount=0,xe.prototype._maxListeners=void 0,hi=10,Object.defineProperty(xe,"defaultMaxListeners",{enumerable:!0,get:function(){return hi},set:function(e){if(typeof e!="number"||e<0||li(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");hi=e}}),xe.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},xe.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||li(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},xe.prototype.getMaxListeners=function(){return ps(this)},xe.prototype.emit=function(e){for(var r=[],t=1;t<arguments.length;t++)r.push(arguments[t]);var a=e==="error",h=this._events;if(h!==void 0)a=a&&h.error===void 0;else if(!a)return!1;if(a){var n;if(r.length>0&&(n=r[0]),n instanceof Error)throw n;var i=new Error("Unhandled error."+(n?" ("+n.message+")":""));throw i.context=n,i}var s=h[e];if(s===void 0)return!1;if(typeof s=="function")ai(s,this,r);else{var o=s.length,l=gs(s,o);for(t=0;t<o;++t)ai(l[t],this,r)}return!0},xe.prototype.addListener=function(e,r){return ao(this,e,r,!1)},xe.prototype.on=xe.prototype.addListener,xe.prototype.prependListener=function(e,r){return ao(this,e,r,!0)},xe.prototype.once=function(e,r){return Wr(r),this.on(e,lo(this,e,r)),this},xe.prototype.prependOnceListener=function(e,r){return Wr(r),this.prependListener(e,lo(this,e,r)),this},xe.prototype.removeListener=function(e,r){var t,a,h,n,i;if(Wr(r),(a=this._events)===void 0)return this;if((t=a[e])===void 0)return this;if(t===r||t.listener===r)--this._eventsCount==0?this._events=Object.create(null):(delete a[e],a.removeListener&&this.emit("removeListener",e,t.listener||r));else if(typeof t!="function"){for(h=-1,n=t.length-1;n>=0;n--)if(t[n]===r||t[n].listener===r){i=t[n].listener,h=n;break}if(h<0)return this;h===0?t.shift():function(s,o){for(;o+1<s.length;o++)s[o]=s[o+1];s.pop()}(t,h),t.length===1&&(a[e]=t[0]),a.removeListener!==void 0&&this.emit("removeListener",e,i||r)}return this},xe.prototype.off=xe.prototype.removeListener,xe.prototype.removeAllListeners=function(e){var r,t,a;if((t=this._events)===void 0)return this;if(t.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):t[e]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete t[e]),this;if(arguments.length===0){var h,n=Object.keys(t);for(a=0;a<n.length;++a)(h=n[a])!=="removeListener"&&this.removeAllListeners(h);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(r=t[e])=="function")this.removeListener(e,r);else if(r!==void 0)for(a=r.length-1;a>=0;a--)this.removeListener(e,r[a]);return this},xe.prototype.listeners=function(e){return ho(this,e,!0)},xe.prototype.rawListeners=function(e){return ho(this,e,!1)},xe.listenerCount=function(e,r){return typeof e.listenerCount=="function"?e.listenerCount(r):uo.call(e,r)},xe.prototype.listenerCount=uo,xe.prototype.eventNames=function(){return this._eventsCount>0?fo(this._events):[]},ft=co,ft.EventEmitter,ft.defaultMaxListeners,ft.init,ft.listenerCount,ft.EventEmitter,ft.defaultMaxListeners,ft.init,ft.listenerCount}),ur={};lr(ur,{EventEmitter:()=>ms,default:()=>ft,defaultMaxListeners:()=>bs,init:()=>ys,listenerCount:()=>ws,on:()=>vs,once:()=>_s});var ms,bs,ys,ws,vs,_s,yr=tt(()=>{oe(),ae(),se(),po(),po(),ft.once=function(e,r){return new Promise((t,a)=>{function h(...i){n!==void 0&&e.removeListener("error",n),t(i)}let n;r!=="error"&&(n=i=>{e.removeListener(name,h),a(i)},e.once("error",n)),e.once(r,h)})},ft.on=function(e,r){let t=[],a=[],h=null,n=!1,i={async next(){let l=t.shift();if(l)return createIterResult(l,!1);if(h){let c=Promise.reject(h);return h=null,c}return n?createIterResult(void 0,!0):new Promise((c,d)=>a.push({resolve:c,reject:d}))},async return(){e.removeListener(r,s),e.removeListener("error",o),n=!0;for(let l of a)l.resolve(createIterResult(void 0,!0));return createIterResult(void 0,!0)},throw(l){h=l,e.removeListener(r,s),e.removeListener("error",o)},[Symbol.asyncIterator](){return this}};return e.on(r,s),e.on("error",o),i;function s(...l){let c=a.shift();c?c.resolve(createIterResult(l,!1)):t.push(l)}function o(l){n=!0;let c=a.shift();c?c.reject(l):h=l,i.return()}},{EventEmitter:ms,defaultMaxListeners:bs,init:ys,listenerCount:ws,on:vs,once:_s}=ft}),Kn=me((e,r)=>{oe(),ae(),se();var{ArrayIsArray:t,ObjectSetPrototypeOf:a}=Xe(),{EventEmitter:h}=(yr(),Ue(ur));function n(s){h.call(this,s)}a(n.prototype,h.prototype),a(n,h),n.prototype.pipe=function(s,o){let l=this;function c(L){s.writable&&s.write(L)===!1&&l.pause&&l.pause()}l.on("data",c);function d(){l.readable&&l.resume&&l.resume()}s.on("drain",d),!s._isStdio&&(!o||o.end!==!1)&&(l.on("end",m),l.on("close",b));let g=!1;function m(){g||(g=!0,s.end())}function b(){g||(g=!0,typeof s.destroy=="function"&&s.destroy())}function y(L){I(),h.listenerCount(this,"error")===0&&this.emit("error",L)}i(l,"error",y),i(s,"error",y);function I(){l.removeListener("data",c),s.removeListener("drain",d),l.removeListener("end",m),l.removeListener("close",b),l.removeListener("error",y),s.removeListener("error",y),l.removeListener("end",I),l.removeListener("close",I),s.removeListener("close",I)}return l.on("end",I),l.on("close",I),s.on("close",I),s.emit("pipe",l),s};function i(s,o,l){if(typeof s.prependListener=="function")return s.prependListener(o,l);!s._events||!s._events[o]?s.on(o,l):t(s._events[o])?s._events[o].unshift(l):s._events[o]=[l,s._events[o]]}r.exports={Stream:n,prependListener:i}}),Zr=me((e,r)=>{oe(),ae(),se();var{AbortError:t,codes:a}=ut(),{isNodeStream:h,isWebStream:n,kControllerErrorFunction:i}=Nt(),s=Vt(),{ERR_INVALID_ARG_TYPE:o}=a,l=(c,d)=>{if(typeof c!="object"||!("aborted"in c))throw new o(d,"AbortSignal",c)};r.exports.addAbortSignal=function(c,d){if(l(c,"signal"),!h(d)&&!n(d))throw new o("stream",["ReadableStream","WritableStream","Stream"],d);return r.exports.addAbortSignalNoValidate(c,d)},r.exports.addAbortSignalNoValidate=function(c,d){if(typeof c!="object"||!("aborted"in c))return d;let g=h(d)?()=>{d.destroy(new t(void 0,{cause:c.reason}))}:()=>{d[i](new t(void 0,{cause:c.reason}))};return c.aborted?g():(c.addEventListener("abort",g),s(d,()=>c.removeEventListener("abort",g))),d}}),Al=me((e,r)=>{oe(),ae(),se();var{StringPrototypeSlice:t,SymbolIterator:a,TypedArrayPrototypeSet:h,Uint8Array:n}=Xe(),{Buffer:i}=(it(),Ue(rt)),{inspect:s}=xt();r.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(o){let l={data:o,next:null};this.length>0?this.tail.next=l:this.head=l,this.tail=l,++this.length}unshift(o){let l={data:o,next:this.head};this.length===0&&(this.tail=l),this.head=l,++this.length}shift(){if(this.length===0)return;let o=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,o}clear(){this.head=this.tail=null,this.length=0}join(o){if(this.length===0)return"";let l=this.head,c=""+l.data;for(;(l=l.next)!==null;)c+=o+l.data;return c}concat(o){if(this.length===0)return i.alloc(0);let l=i.allocUnsafe(o>>>0),c=this.head,d=0;for(;c;)h(l,c.data,d),d+=c.data.length,c=c.next;return l}consume(o,l){let c=this.head.data;if(o<c.length){let d=c.slice(0,o);return this.head.data=c.slice(o),d}return o===c.length?this.shift():l?this._getString(o):this._getBuffer(o)}first(){return this.head.data}*[a](){for(let o=this.head;o;o=o.next)yield o.data}_getString(o){let l="",c=this.head,d=0;do{let g=c.data;if(o>g.length)l+=g,o-=g.length;else{o===g.length?(l+=g,++d,c.next?this.head=c.next:this.head=this.tail=null):(l+=t(g,0,o),this.head=c,c.data=t(g,o));break}++d}while((c=c.next)!==null);return this.length-=d,l}_getBuffer(o){let l=i.allocUnsafe(o),c=o,d=this.head,g=0;do{let m=d.data;if(o>m.length)h(l,m,c-o),o-=m.length;else{o===m.length?(h(l,m,c-o),++g,d.next?this.head=d.next:this.head=this.tail=null):(h(l,new n(m.buffer,m.byteOffset,o),c-o),this.head=d,d.data=m.slice(o));break}++g}while((d=d.next)!==null);return this.length-=g,l}[Symbol.for("nodejs.util.inspect.custom")](o,l){return s(this,{...l,depth:0,customInspect:!1})}}}),Yn=me((e,r)=>{oe(),ae(),se();var{MathFloor:t,NumberIsInteger:a}=Xe(),{ERR_INVALID_ARG_VALUE:h}=ut().codes;function n(o,l,c){return o.highWaterMark!=null?o.highWaterMark:l?o[c]:null}function i(o){return o?16:16*1024}function s(o,l,c,d){let g=n(l,d,c);if(g!=null){if(!a(g)||g<0){let m=d?`options.${c}`:"options.highWaterMark";throw new h(m,g)}return t(g)}return i(o.objectMode)}r.exports={getHighWaterMark:s,getDefaultHighWaterMark:i}});function go(e){var r=e.length;if(r%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=e.indexOf("=");return t===-1&&(t=r),[t,t===r?0:4-t%4]}function Il(e,r,t){for(var a,h,n=[],i=r;i<t;i+=3)a=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2]),n.push(vt[(h=a)>>18&63]+vt[h>>12&63]+vt[h>>6&63]+vt[63&h]);return n.join("")}function Bt(e){if(e>2147483647)throw new RangeError('The value "'+e+'" is invalid for option "size"');var r=new Uint8Array(e);return Object.setPrototypeOf(r,pe.prototype),r}function pe(e,r,t){if(typeof e=="number"){if(typeof r=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return kn(e)}return Es(e,r,t)}function Es(e,r,t){if(typeof e=="string")return function(n,i){if(typeof i=="string"&&i!==""||(i="utf8"),!pe.isEncoding(i))throw new TypeError("Unknown encoding: "+i);var s=0|As(n,i),o=Bt(s),l=o.write(n,i);return l!==s&&(o=o.slice(0,l)),o}(e,r);if(ArrayBuffer.isView(e))return ui(e);if(e==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(Mt(e,ArrayBuffer)||e&&Mt(e.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Mt(e,SharedArrayBuffer)||e&&Mt(e.buffer,SharedArrayBuffer)))return Tl(e,r,t);if(typeof e=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var a=e.valueOf&&e.valueOf();if(a!=null&&a!==e)return pe.from(a,r,t);var h=function(n){if(pe.isBuffer(n)){var i=0|Gn(n.length),s=Bt(i);return s.length===0||n.copy(s,0,0,i),s}if(n.length!==void 0)return typeof n.length!="number"||Qn(n.length)?Bt(0):ui(n);if(n.type==="Buffer"&&Array.isArray(n.data))return ui(n.data)}(e);if(h)return h;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof e[Symbol.toPrimitive]=="function")return pe.from(e[Symbol.toPrimitive]("string"),r,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function Ss(e){if(typeof e!="number")throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function kn(e){return Ss(e),Bt(e<0?0:0|Gn(e))}function ui(e){for(var r=e.length<0?0:0|Gn(e.length),t=Bt(r),a=0;a<r;a+=1)t[a]=255&e[a];return t}function Tl(e,r,t){if(r<0||e.byteLength<r)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<r+(t||0))throw new RangeError('"length" is outside of buffer bounds');var a;return a=r===void 0&&t===void 0?new Uint8Array(e):t===void 0?new Uint8Array(e,r):new Uint8Array(e,r,t),Object.setPrototypeOf(a,pe.prototype),a}function Gn(e){if(e>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function As(e,r){if(pe.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Mt(e,ArrayBuffer))return e.byteLength;if(typeof e!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var t=e.length,a=arguments.length>2&&arguments[2]===!0;if(!a&&t===0)return 0;for(var h=!1;;)switch(r){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return Cn(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*t;case"hex":return t>>>1;case"base64":return Cs(e).length;default:if(h)return a?-1:Cn(e).length;r=(""+r).toLowerCase(),h=!0}}function kl(e,r,t){var a=!1;if((r===void 0||r<0)&&(r=0),r>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0)<=(r>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return Ul(this,r,t);case"utf8":case"utf-8":return Ts(this,r,t);case"ascii":return xl(this,r,t);case"latin1":case"binary":return Ll(this,r,t);case"base64":return Ml(this,r,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Nl(this,r,t);default:if(a)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),a=!0}}function Gt(e,r,t){var a=e[r];e[r]=e[t],e[t]=a}function mo(e,r,t,a,h){if(e.length===0)return-1;if(typeof t=="string"?(a=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),Qn(t=+t)&&(t=h?0:e.length-1),t<0&&(t=e.length+t),t>=e.length){if(h)return-1;t=e.length-1}else if(t<0){if(!h)return-1;t=0}if(typeof r=="string"&&(r=pe.from(r,a)),pe.isBuffer(r))return r.length===0?-1:bo(e,r,t,a,h);if(typeof r=="number")return r&=255,typeof Uint8Array.prototype.indexOf=="function"?h?Uint8Array.prototype.indexOf.call(e,r,t):Uint8Array.prototype.lastIndexOf.call(e,r,t):bo(e,[r],t,a,h);throw new TypeError("val must be string, number or Buffer")}function bo(e,r,t,a,h){var n,i=1,s=e.length,o=r.length;if(a!==void 0&&((a=String(a).toLowerCase())==="ucs2"||a==="ucs-2"||a==="utf16le"||a==="utf-16le")){if(e.length<2||r.length<2)return-1;i=2,s/=2,o/=2,t/=2}function l(m,b){return i===1?m[b]:m.readUInt16BE(b*i)}if(h){var c=-1;for(n=t;n<s;n++)if(l(e,n)===l(r,c===-1?0:n-c)){if(c===-1&&(c=n),n-c+1===o)return c*i}else c!==-1&&(n-=n-c),c=-1}else for(t+o>s&&(t=s-o),n=t;n>=0;n--){for(var d=!0,g=0;g<o;g++)if(l(e,n+g)!==l(r,g)){d=!1;break}if(d)return n}return-1}function Cl(e,r,t,a){t=Number(t)||0;var h=e.length-t;a?(a=Number(a))>h&&(a=h):a=h;var n=r.length;a>n/2&&(a=n/2);for(var i=0;i<a;++i){var s=parseInt(r.substr(2*i,2),16);if(Qn(s))return i;e[t+i]=s}return i}function Rl(e,r,t,a){return ei(Cn(r,e.length-t),e,t,a)}function Is(e,r,t,a){return ei(function(h){for(var n=[],i=0;i<h.length;++i)n.push(255&h.charCodeAt(i));return n}(r),e,t,a)}function Ol(e,r,t,a){return Is(e,r,t,a)}function Pl(e,r,t,a){return ei(Cs(r),e,t,a)}function Bl(e,r,t,a){return ei(function(h,n){for(var i,s,o,l=[],c=0;c<h.length&&!((n-=2)<0);++c)i=h.charCodeAt(c),s=i>>8,o=i%256,l.push(o),l.push(s);return l}(r,e.length-t),e,t,a)}function Ml(e,r,t){return r===0&&t===e.length?Yr.fromByteArray(e):Yr.fromByteArray(e.slice(r,t))}function Ts(e,r,t){t=Math.min(e.length,t);for(var a=[],h=r;h<t;){var n,i,s,o,l=e[h],c=null,d=l>239?4:l>223?3:l>191?2:1;if(h+d<=t)switch(d){case 1:l<128&&(c=l);break;case 2:(192&(n=e[h+1]))==128&&(o=(31&l)<<6|63&n)>127&&(c=o);break;case 3:n=e[h+1],i=e[h+2],(192&n)==128&&(192&i)==128&&(o=(15&l)<<12|(63&n)<<6|63&i)>2047&&(o<55296||o>57343)&&(c=o);break;case 4:n=e[h+1],i=e[h+2],s=e[h+3],(192&n)==128&&(192&i)==128&&(192&s)==128&&(o=(15&l)<<18|(63&n)<<12|(63&i)<<6|63&s)>65535&&o<1114112&&(c=o)}c===null?(c=65533,d=1):c>65535&&(c-=65536,a.push(c>>>10&1023|55296),c=56320|1023&c),a.push(c),h+=d}return function(g){var m=g.length;if(m<=4096)return String.fromCharCode.apply(String,g);for(var b="",y=0;y<m;)b+=String.fromCharCode.apply(String,g.slice(y,y+=4096));return b}(a)}function xl(e,r,t){var a="";t=Math.min(e.length,t);for(var h=r;h<t;++h)a+=String.fromCharCode(127&e[h]);return a}function Ll(e,r,t){var a="";t=Math.min(e.length,t);for(var h=r;h<t;++h)a+=String.fromCharCode(e[h]);return a}function Ul(e,r,t){var a=e.length;(!r||r<0)&&(r=0),(!t||t<0||t>a)&&(t=a);for(var h="",n=r;n<t;++n)h+=Os[e[n]];return h}function Nl(e,r,t){for(var a=e.slice(r,t),h="",n=0;n<a.length;n+=2)h+=String.fromCharCode(a[n]+256*a[n+1]);return h}function Je(e,r,t){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+r>t)throw new RangeError("Trying to access beyond buffer length")}function ht(e,r,t,a,h,n){if(!pe.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>h||r<n)throw new RangeError('"value" argument is out of bounds');if(t+a>e.length)throw new RangeError("Index out of range")}function ks(e,r,t,a,h,n){if(t+a>e.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function yo(e,r,t,a,h){return r=+r,t>>>=0,h||ks(e,0,t,4),tr.write(e,r,t,a,23,4),t+4}function wo(e,r,t,a,h){return r=+r,t>>>=0,h||ks(e,0,t,8),tr.write(e,r,t,a,52,8),t+8}function Cn(e,r){var t;r=r||1/0;for(var a=e.length,h=null,n=[],i=0;i<a;++i){if((t=e.charCodeAt(i))>55295&&t<57344){if(!h){if(t>56319){(r-=3)>-1&&n.push(239,191,189);continue}if(i+1===a){(r-=3)>-1&&n.push(239,191,189);continue}h=t;continue}if(t<56320){(r-=3)>-1&&n.push(239,191,189),h=t;continue}t=65536+(h-55296<<10|t-56320)}else h&&(r-=3)>-1&&n.push(239,191,189);if(h=null,t<128){if((r-=1)<0)break;n.push(t)}else if(t<2048){if((r-=2)<0)break;n.push(t>>6|192,63&t|128)}else if(t<65536){if((r-=3)<0)break;n.push(t>>12|224,t>>6&63|128,63&t|128)}else{if(!(t<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;n.push(t>>18|240,t>>12&63|128,t>>6&63|128,63&t|128)}}return n}function Cs(e){return Yr.toByteArray(function(r){if((r=(r=r.split("=")[0]).trim().replace(Rs,"")).length<2)return"";for(;r.length%4!=0;)r+="=";return r}(e))}function ei(e,r,t,a){for(var h=0;h<a&&!(h+t>=r.length||h>=e.length);++h)r[h+t]=e[h];return h}function Mt(e,r){return e instanceof r||e!=null&&e.constructor!=null&&e.constructor.name!=null&&e.constructor.name===r.name}function Qn(e){return e!=e}function vo(e,r){for(var t in e)r[t]=e[t]}function Qt(e,r,t){return yt(e,r,t)}function _r(e){var r;switch(this.encoding=function(t){var a=function(h){if(!h)return"utf8";for(var n;;)switch(h){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return h;default:if(n)return;h=(""+h).toLowerCase(),n=!0}}(t);if(typeof a!="string"&&(Gr.isEncoding===Rn||!Rn(t)))throw new Error("Unknown encoding: "+t);return a||t}(e),this.encoding){case"utf16le":this.text=Dl,this.end=Fl,r=4;break;case"utf8":this.fillLast=jl,r=4;break;case"base64":this.text=Wl,this.end=$l,r=3;break;default:return this.write=ql,this.end=Hl,void 0}this.lastNeed=0,this.lastTotal=0,this.lastChar=Gr.allocUnsafe(r)}function ci(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function jl(e){var r=this.lastTotal-this.lastNeed,t=function(a,h,n){if((192&h[0])!=128)return a.lastNeed=0,"";if(a.lastNeed>1&&h.length>1){if((192&h[1])!=128)return a.lastNeed=1,"";if(a.lastNeed>2&&h.length>2&&(192&h[2])!=128)return a.lastNeed=2,""}}(this,e);return t!==void 0?t:this.lastNeed<=e.length?(e.copy(this.lastChar,r,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,r,0,e.length),this.lastNeed-=e.length,void 0)}function Dl(e,r){if((e.length-r)%2==0){var t=e.toString("utf16le",r);if(t){var a=t.charCodeAt(t.length-1);if(a>=55296&&a<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],t.slice(0,-1)}return t}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",r,e.length-1)}function Fl(e){var r=e&&e.length?this.write(e):"";if(this.lastNeed){var t=this.lastTotal-this.lastNeed;return r+this.lastChar.toString("utf16le",0,t)}return r}function Wl(e,r){var t=(e.length-r)%3;return t===0?e.toString("base64",r):(this.lastNeed=3-t,this.lastTotal=3,t===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",r,e.length-t))}function $l(e){var r=e&&e.length?this.write(e):"";return this.lastNeed?r+this.lastChar.toString("base64",0,3-this.lastNeed):r}function ql(e){return e.toString(this.encoding)}function Hl(e){return e&&e.length?this.write(e):""}var _o,vt,ct,Eo,Mr,Xt,So,Ao,_t,Yr,tr,fi,Rs,Os,Er,Sr,yt,Io,gr,Gr,Rn,To=tt(()=>{for(oe(),ae(),se(),_o={byteLength:function(e){var r=go(e),t=r[0],a=r[1];return 3*(t+a)/4-a},toByteArray:function(e){var r,t,a=go(e),h=a[0],n=a[1],i=new Eo(function(l,c,d){return 3*(c+d)/4-d}(0,h,n)),s=0,o=n>0?h-4:h;for(t=0;t<o;t+=4)r=ct[e.charCodeAt(t)]<<18|ct[e.charCodeAt(t+1)]<<12|ct[e.charCodeAt(t+2)]<<6|ct[e.charCodeAt(t+3)],i[s++]=r>>16&255,i[s++]=r>>8&255,i[s++]=255&r;return n===2&&(r=ct[e.charCodeAt(t)]<<2|ct[e.charCodeAt(t+1)]>>4,i[s++]=255&r),n===1&&(r=ct[e.charCodeAt(t)]<<10|ct[e.charCodeAt(t+1)]<<4|ct[e.charCodeAt(t+2)]>>2,i[s++]=r>>8&255,i[s++]=255&r),i},fromByteArray:function(e){for(var r,t=e.length,a=t%3,h=[],n=0,i=t-a;n<i;n+=16383)h.push(Il(e,n,n+16383>i?i:n+16383));return a===1?(r=e[t-1],h.push(vt[r>>2]+vt[r<<4&63]+"==")):a===2&&(r=(e[t-2]<<8)+e[t-1],h.push(vt[r>>10]+vt[r>>4&63]+vt[r<<2&63]+"=")),h.join("")}},vt=[],ct=[],Eo=typeof Uint8Array<"u"?Uint8Array:Array,Mr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Xt=0,So=Mr.length;Xt<So;++Xt)vt[Xt]=Mr[Xt],ct[Mr.charCodeAt(Xt)]=Xt;ct[45]=62,ct[95]=63,Ao={read:function(e,r,t,a,h){var n,i,s=8*h-a-1,o=(1<<s)-1,l=o>>1,c=-7,d=t?h-1:0,g=t?-1:1,m=e[r+d];for(d+=g,n=m&(1<<-c)-1,m>>=-c,c+=s;c>0;n=256*n+e[r+d],d+=g,c-=8);for(i=n&(1<<-c)-1,n>>=-c,c+=a;c>0;i=256*i+e[r+d],d+=g,c-=8);if(n===0)n=1-l;else{if(n===o)return i?NaN:1/0*(m?-1:1);i+=Math.pow(2,a),n-=l}return(m?-1:1)*i*Math.pow(2,n-a)},write:function(e,r,t,a,h,n){var i,s,o,l=8*n-h-1,c=(1<<l)-1,d=c>>1,g=h===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=a?0:n-1,b=a?1:-1,y=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(s=isNaN(r)?1:0,i=c):(i=Math.floor(Math.log(r)/Math.LN2),r*(o=Math.pow(2,-i))<1&&(i--,o*=2),(r+=i+d>=1?g/o:g*Math.pow(2,1-d))*o>=2&&(i++,o/=2),i+d>=c?(s=0,i=c):i+d>=1?(s=(r*o-1)*Math.pow(2,h),i+=d):(s=r*Math.pow(2,d-1)*Math.pow(2,h),i=0));h>=8;e[t+m]=255&s,m+=b,s/=256,h-=8);for(i=i<<h|s,l+=h;l>0;e[t+m]=255&i,m+=b,i/=256,l-=8);e[t+m-b]|=128*y}},_t={},Yr=_o,tr=Ao,fi=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null,_t.Buffer=pe,_t.SlowBuffer=function(e){return+e!=e&&(e=0),pe.alloc(+e)},_t.INSPECT_MAX_BYTES=50,_t.kMaxLength=2147483647,pe.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),r={foo:function(){return 42}};return Object.setPrototypeOf(r,Uint8Array.prototype),Object.setPrototypeOf(e,r),e.foo()===42}catch{return!1}}(),pe.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(pe.prototype,"parent",{enumerable:!0,get:function(){if(pe.isBuffer(this))return this.buffer}}),Object.defineProperty(pe.prototype,"offset",{enumerable:!0,get:function(){if(pe.isBuffer(this))return this.byteOffset}}),pe.poolSize=8192,pe.from=function(e,r,t){return Es(e,r,t)},Object.setPrototypeOf(pe.prototype,Uint8Array.prototype),Object.setPrototypeOf(pe,Uint8Array),pe.alloc=function(e,r,t){return function(a,h,n){return Ss(a),a<=0?Bt(a):h!==void 0?typeof n=="string"?Bt(a).fill(h,n):Bt(a).fill(h):Bt(a)}(e,r,t)},pe.allocUnsafe=function(e){return kn(e)},pe.allocUnsafeSlow=function(e){return kn(e)},pe.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==pe.prototype},pe.compare=function(e,r){if(Mt(e,Uint8Array)&&(e=pe.from(e,e.offset,e.byteLength)),Mt(r,Uint8Array)&&(r=pe.from(r,r.offset,r.byteLength)),!pe.isBuffer(e)||!pe.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;for(var t=e.length,a=r.length,h=0,n=Math.min(t,a);h<n;++h)if(e[h]!==r[h]){t=e[h],a=r[h];break}return t<a?-1:a<t?1:0},pe.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},pe.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return pe.alloc(0);var t;if(r===void 0)for(r=0,t=0;t<e.length;++t)r+=e[t].length;var a=pe.allocUnsafe(r),h=0;for(t=0;t<e.length;++t){var n=e[t];if(Mt(n,Uint8Array)&&(n=pe.from(n)),!pe.isBuffer(n))throw new TypeError('"list" argument must be an Array of Buffers');n.copy(a,h),h+=n.length}return a},pe.byteLength=As,pe.prototype._isBuffer=!0,pe.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<e;r+=2)Gt(this,r,r+1);return this},pe.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<e;r+=4)Gt(this,r,r+3),Gt(this,r+1,r+2);return this},pe.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<e;r+=8)Gt(this,r,r+7),Gt(this,r+1,r+6),Gt(this,r+2,r+5),Gt(this,r+3,r+4);return this},pe.prototype.toString=function(){var e=this.length;return e===0?"":arguments.length===0?Ts(this,0,e):kl.apply(this,arguments)},pe.prototype.toLocaleString=pe.prototype.toString,pe.prototype.equals=function(e){if(!pe.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||pe.compare(this,e)===0},pe.prototype.inspect=function(){var e="",r=_t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},fi&&(pe.prototype[fi]=pe.prototype.inspect),pe.prototype.compare=function(e,r,t,a,h){if(Mt(e,Uint8Array)&&(e=pe.from(e,e.offset,e.byteLength)),!pe.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(r===void 0&&(r=0),t===void 0&&(t=e?e.length:0),a===void 0&&(a=0),h===void 0&&(h=this.length),r<0||t>e.length||a<0||h>this.length)throw new RangeError("out of range index");if(a>=h&&r>=t)return 0;if(a>=h)return-1;if(r>=t)return 1;if(this===e)return 0;for(var n=(h>>>=0)-(a>>>=0),i=(t>>>=0)-(r>>>=0),s=Math.min(n,i),o=this.slice(a,h),l=e.slice(r,t),c=0;c<s;++c)if(o[c]!==l[c]){n=o[c],i=l[c];break}return n<i?-1:i<n?1:0},pe.prototype.includes=function(e,r,t){return this.indexOf(e,r,t)!==-1},pe.prototype.indexOf=function(e,r,t){return mo(this,e,r,t,!0)},pe.prototype.lastIndexOf=function(e,r,t){return mo(this,e,r,t,!1)},pe.prototype.write=function(e,r,t,a){if(r===void 0)a="utf8",t=this.length,r=0;else if(t===void 0&&typeof r=="string")a=r,t=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r>>>=0,isFinite(t)?(t>>>=0,a===void 0&&(a="utf8")):(a=t,t=void 0)}var h=this.length-r;if((t===void 0||t>h)&&(t=h),e.length>0&&(t<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");a||(a="utf8");for(var n=!1;;)switch(a){case"hex":return Cl(this,e,r,t);case"utf8":case"utf-8":return Rl(this,e,r,t);case"ascii":return Is(this,e,r,t);case"latin1":case"binary":return Ol(this,e,r,t);case"base64":return Pl(this,e,r,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Bl(this,e,r,t);default:if(n)throw new TypeError("Unknown encoding: "+a);a=(""+a).toLowerCase(),n=!0}},pe.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},pe.prototype.slice=function(e,r){var t=this.length;(e=~~e)<0?(e+=t)<0&&(e=0):e>t&&(e=t),(r=r===void 0?t:~~r)<0?(r+=t)<0&&(r=0):r>t&&(r=t),r<e&&(r=e);var a=this.subarray(e,r);return Object.setPrototypeOf(a,pe.prototype),a},pe.prototype.readUIntLE=function(e,r,t){e>>>=0,r>>>=0,t||Je(e,r,this.length);for(var a=this[e],h=1,n=0;++n<r&&(h*=256);)a+=this[e+n]*h;return a},pe.prototype.readUIntBE=function(e,r,t){e>>>=0,r>>>=0,t||Je(e,r,this.length);for(var a=this[e+--r],h=1;r>0&&(h*=256);)a+=this[e+--r]*h;return a},pe.prototype.readUInt8=function(e,r){return e>>>=0,r||Je(e,1,this.length),this[e]},pe.prototype.readUInt16LE=function(e,r){return e>>>=0,r||Je(e,2,this.length),this[e]|this[e+1]<<8},pe.prototype.readUInt16BE=function(e,r){return e>>>=0,r||Je(e,2,this.length),this[e]<<8|this[e+1]},pe.prototype.readUInt32LE=function(e,r){return e>>>=0,r||Je(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},pe.prototype.readUInt32BE=function(e,r){return e>>>=0,r||Je(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},pe.prototype.readIntLE=function(e,r,t){e>>>=0,r>>>=0,t||Je(e,r,this.length);for(var a=this[e],h=1,n=0;++n<r&&(h*=256);)a+=this[e+n]*h;return a>=(h*=128)&&(a-=Math.pow(2,8*r)),a},pe.prototype.readIntBE=function(e,r,t){e>>>=0,r>>>=0,t||Je(e,r,this.length);for(var a=r,h=1,n=this[e+--a];a>0&&(h*=256);)n+=this[e+--a]*h;return n>=(h*=128)&&(n-=Math.pow(2,8*r)),n},pe.prototype.readInt8=function(e,r){return e>>>=0,r||Je(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},pe.prototype.readInt16LE=function(e,r){e>>>=0,r||Je(e,2,this.length);var t=this[e]|this[e+1]<<8;return 32768&t?4294901760|t:t},pe.prototype.readInt16BE=function(e,r){e>>>=0,r||Je(e,2,this.length);var t=this[e+1]|this[e]<<8;return 32768&t?4294901760|t:t},pe.prototype.readInt32LE=function(e,r){return e>>>=0,r||Je(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},pe.prototype.readInt32BE=function(e,r){return e>>>=0,r||Je(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},pe.prototype.readFloatLE=function(e,r){return e>>>=0,r||Je(e,4,this.length),tr.read(this,e,!0,23,4)},pe.prototype.readFloatBE=function(e,r){return e>>>=0,r||Je(e,4,this.length),tr.read(this,e,!1,23,4)},pe.prototype.readDoubleLE=function(e,r){return e>>>=0,r||Je(e,8,this.length),tr.read(this,e,!0,52,8)},pe.prototype.readDoubleBE=function(e,r){return e>>>=0,r||Je(e,8,this.length),tr.read(this,e,!1,52,8)},pe.prototype.writeUIntLE=function(e,r,t,a){e=+e,r>>>=0,t>>>=0,a||ht(this,e,r,t,Math.pow(2,8*t)-1,0);var h=1,n=0;for(this[r]=255&e;++n<t&&(h*=256);)this[r+n]=e/h&255;return r+t},pe.prototype.writeUIntBE=function(e,r,t,a){e=+e,r>>>=0,t>>>=0,a||ht(this,e,r,t,Math.pow(2,8*t)-1,0);var h=t-1,n=1;for(this[r+h]=255&e;--h>=0&&(n*=256);)this[r+h]=e/n&255;return r+t},pe.prototype.writeUInt8=function(e,r,t){return e=+e,r>>>=0,t||ht(this,e,r,1,255,0),this[r]=255&e,r+1},pe.prototype.writeUInt16LE=function(e,r,t){return e=+e,r>>>=0,t||ht(this,e,r,2,65535,0),this[r]=255&e,this[r+1]=e>>>8,r+2},pe.prototype.writeUInt16BE=function(e,r,t){return e=+e,r>>>=0,t||ht(this,e,r,2,65535,0),this[r]=e>>>8,this[r+1]=255&e,r+2},pe.prototype.writeUInt32LE=function(e,r,t){return e=+e,r>>>=0,t||ht(this,e,r,4,4294967295,0),this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=255&e,r+4},pe.prototype.writeUInt32BE=function(e,r,t){return e=+e,r>>>=0,t||ht(this,e,r,4,4294967295,0),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=255&e,r+4},pe.prototype.writeIntLE=function(e,r,t,a){if(e=+e,r>>>=0,!a){var h=Math.pow(2,8*t-1);ht(this,e,r,t,h-1,-h)}var n=0,i=1,s=0;for(this[r]=255&e;++n<t&&(i*=256);)e<0&&s===0&&this[r+n-1]!==0&&(s=1),this[r+n]=(e/i>>0)-s&255;return r+t},pe.prototype.writeIntBE=function(e,r,t,a){if(e=+e,r>>>=0,!a){var h=Math.pow(2,8*t-1);ht(this,e,r,t,h-1,-h)}var n=t-1,i=1,s=0;for(this[r+n]=255&e;--n>=0&&(i*=256);)e<0&&s===0&&this[r+n+1]!==0&&(s=1),this[r+n]=(e/i>>0)-s&255;return r+t},pe.prototype.writeInt8=function(e,r,t){return e=+e,r>>>=0,t||ht(this,e,r,1,127,-128),e<0&&(e=255+e+1),this[r]=255&e,r+1},pe.prototype.writeInt16LE=function(e,r,t){return e=+e,r>>>=0,t||ht(this,e,r,2,32767,-32768),this[r]=255&e,this[r+1]=e>>>8,r+2},pe.prototype.writeInt16BE=function(e,r,t){return e=+e,r>>>=0,t||ht(this,e,r,2,32767,-32768),this[r]=e>>>8,this[r+1]=255&e,r+2},pe.prototype.writeInt32LE=function(e,r,t){return e=+e,r>>>=0,t||ht(this,e,r,4,2147483647,-2147483648),this[r]=255&e,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24,r+4},pe.prototype.writeInt32BE=function(e,r,t){return e=+e,r>>>=0,t||ht(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=255&e,r+4},pe.prototype.writeFloatLE=function(e,r,t){return yo(this,e,r,!0,t)},pe.prototype.writeFloatBE=function(e,r,t){return yo(this,e,r,!1,t)},pe.prototype.writeDoubleLE=function(e,r,t){return wo(this,e,r,!0,t)},pe.prototype.writeDoubleBE=function(e,r,t){return wo(this,e,r,!1,t)},pe.prototype.copy=function(e,r,t,a){if(!pe.isBuffer(e))throw new TypeError("argument should be a Buffer");if(t||(t=0),a||a===0||(a=this.length),r>=e.length&&(r=e.length),r||(r=0),a>0&&a<t&&(a=t),a===t||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(t<0||t>=this.length)throw new RangeError("Index out of range");if(a<0)throw new RangeError("sourceEnd out of bounds");a>this.length&&(a=this.length),e.length-r<a-t&&(a=e.length-r+t);var h=a-t;if(this===e&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(r,t,a);else if(this===e&&t<r&&r<a)for(var n=h-1;n>=0;--n)e[n+r]=this[n+t];else Uint8Array.prototype.set.call(e,this.subarray(t,a),r);return h},pe.prototype.fill=function(e,r,t,a){if(typeof e=="string"){if(typeof r=="string"?(a=r,r=0,t=this.length):typeof t=="string"&&(a=t,t=this.length),a!==void 0&&typeof a!="string")throw new TypeError("encoding must be a string");if(typeof a=="string"&&!pe.isEncoding(a))throw new TypeError("Unknown encoding: "+a);if(e.length===1){var h=e.charCodeAt(0);(a==="utf8"&&h<128||a==="latin1")&&(e=h)}}else typeof e=="number"?e&=255:typeof e=="boolean"&&(e=Number(e));if(r<0||this.length<r||this.length<t)throw new RangeError("Out of range index");if(t<=r)return this;var n;if(r>>>=0,t=t===void 0?this.length:t>>>0,e||(e=0),typeof e=="number")for(n=r;n<t;++n)this[n]=e;else{var i=pe.isBuffer(e)?e:pe.from(e,a),s=i.length;if(s===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(n=0;n<t-r;++n)this[n+r]=i[n%s]}return this},Rs=/[^+/0-9A-Za-z-_]/g,Os=function(){for(var e=new Array(256),r=0;r<16;++r)for(var t=16*r,a=0;a<16;++a)e[t+a]="0123456789abcdef"[r]+"0123456789abcdef"[a];return e}(),_t.Buffer,_t.INSPECT_MAX_BYTES,_t.kMaxLength,Er={},Sr=_t,yt=Sr.Buffer,yt.from&&yt.alloc&&yt.allocUnsafe&&yt.allocUnsafeSlow?Er=Sr:(vo(Sr,Er),Er.Buffer=Qt),Qt.prototype=Object.create(yt.prototype),vo(yt,Qt),Qt.from=function(e,r,t){if(typeof e=="number")throw new TypeError("Argument must not be a number");return yt(e,r,t)},Qt.alloc=function(e,r,t){if(typeof e!="number")throw new TypeError("Argument must be a number");var a=yt(e);return r!==void 0?typeof t=="string"?a.fill(r,t):a.fill(r):a.fill(0),a},Qt.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return yt(e)},Qt.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return Sr.SlowBuffer(e)},Io=Er,gr={},Gr=Io.Buffer,Rn=Gr.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},gr.StringDecoder=_r,_r.prototype.write=function(e){if(e.length===0)return"";var r,t;if(this.lastNeed){if((r=this.fillLast(e))===void 0)return"";t=this.lastNeed,this.lastNeed=0}else t=0;return t<e.length?r?r+this.text(e,t):this.text(e,t):r||""},_r.prototype.end=function(e){var r=e&&e.length?this.write(e):"";return this.lastNeed?r+"":r},_r.prototype.text=function(e,r){var t=function(h,n,i){var s=n.length-1;if(s<i)return 0;var o=ci(n[s]);return o>=0?(o>0&&(h.lastNeed=o-1),o):--s<i||o===-2?0:(o=ci(n[s]))>=0?(o>0&&(h.lastNeed=o-2),o):--s<i||o===-2?0:(o=ci(n[s]))>=0?(o>0&&(o===2?o=0:h.lastNeed=o-3),o):0}(this,e,r);if(!this.lastNeed)return e.toString("utf8",r);this.lastTotal=t;var a=e.length-(t-this.lastNeed);return e.copy(this.lastChar,0,a),e.toString("utf8",r,a)},_r.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length},gr.StringDecoder,gr.StringDecoder}),Ps={};lr(Ps,{StringDecoder:()=>Bs,default:()=>gr});var Bs,zl=tt(()=>{oe(),ae(),se(),To(),To(),Bs=gr.StringDecoder}),Ms=me((e,r)=>{oe(),ae(),se();var t=hr(),{PromisePrototypeThen:a,SymbolAsyncIterator:h,SymbolIterator:n}=Xe(),{Buffer:i}=(it(),Ue(rt)),{ERR_INVALID_ARG_TYPE:s,ERR_STREAM_NULL_VALUES:o}=ut().codes;function l(c,d,g){let m;if(typeof d=="string"||d instanceof i)return new c({objectMode:!0,...g,read(){this.push(d),this.push(null)}});let b;if(d&&d[h])b=!0,m=d[h]();else if(d&&d[n])b=!1,m=d[n]();else throw new s("iterable",["Iterable"],d);let y=new c({objectMode:!0,highWaterMark:1,...g}),I=!1;y._read=function(){I||(I=!0,k())},y._destroy=function(_,N){a(L(_),()=>t.nextTick(N,_),j=>t.nextTick(N,j||_))};async function L(_){let N=_!=null,j=typeof m.throw=="function";if(N&&j){let{value:O,done:C}=await m.throw(_);if(await O,C)return}if(typeof m.return=="function"){let{value:O}=await m.return();await O}}async function k(){for(;;){try{let{value:_,done:N}=b?await m.next():m.next();if(N)y.push(null);else{let j=_&&typeof _.then=="function"?await _:_;if(j===null)throw I=!1,new o;if(y.push(j))continue;I=!1}}catch(_){y.destroy(_)}break}}return y}r.exports=l}),ti=me((e,r)=>{oe(),ae(),se();var t=hr(),{ArrayPrototypeIndexOf:a,NumberIsInteger:h,NumberIsNaN:n,NumberParseInt:i,ObjectDefineProperties:s,ObjectKeys:o,ObjectSetPrototypeOf:l,Promise:c,SafeSet:d,SymbolAsyncIterator:g,Symbol:m}=Xe();r.exports=A,A.ReadableState=ve;var{EventEmitter:b}=(yr(),Ue(ur)),{Stream:y,prependListener:I}=Kn(),{Buffer:L}=(it(),Ue(rt)),{addAbortSignal:k}=Zr(),_=Vt(),N=xt().debuglog("stream",u=>{N=u}),j=Al(),O=br(),{getHighWaterMark:C,getDefaultHighWaterMark:x}=Yn(),{aggregateTwoErrors:W,codes:{ERR_INVALID_ARG_TYPE:Q,ERR_METHOD_NOT_IMPLEMENTED:ee,ERR_OUT_OF_RANGE:S,ERR_STREAM_PUSH_AFTER_EOF:q,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:Z}}=ut(),{validateObject:K}=Jr(),ge=m("kPaused"),{StringDecoder:ne}=(zl(),Ue(Ps)),$=Ms();l(A.prototype,y.prototype),l(A,y);var be=()=>{},{errorOrDestroy:re}=O;function ve(u,p,v){typeof v!="boolean"&&(v=p instanceof Lt()),this.objectMode=!!(u&&u.objectMode),v&&(this.objectMode=this.objectMode||!!(u&&u.readableObjectMode)),this.highWaterMark=u?C(this,u,"readableHighWaterMark",v):x(!1),this.buffer=new j,this.length=0,this.pipes=[],this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.constructed=!0,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this[ge]=null,this.errorEmitted=!1,this.emitClose=!u||u.emitClose!==!1,this.autoDestroy=!u||u.autoDestroy!==!1,this.destroyed=!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this.defaultEncoding=u&&u.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.multiAwaitDrain=!1,this.readingMore=!1,this.dataEmitted=!1,this.decoder=null,this.encoding=null,u&&u.encoding&&(this.decoder=new ne(u.encoding),this.encoding=u.encoding)}function A(u){if(!(this instanceof A))return new A(u);let p=this instanceof Lt();this._readableState=new ve(u,this,p),u&&(typeof u.read=="function"&&(this._read=u.read),typeof u.destroy=="function"&&(this._destroy=u.destroy),typeof u.construct=="function"&&(this._construct=u.construct),u.signal&&!p&&k(u.signal,this)),y.call(this,u),O.construct(this,()=>{this._readableState.needReadable&&J(this,this._readableState)})}A.prototype.destroy=O.destroy,A.prototype._undestroy=O.undestroy,A.prototype._destroy=function(u,p){p(u)},A.prototype[b.captureRejectionSymbol]=function(u){this.destroy(u)},A.prototype.push=function(u,p){return Y(this,u,p,!1)},A.prototype.unshift=function(u,p){return Y(this,u,p,!0)};function Y(u,p,v,T){N("readableAddChunk",p);let w=u._readableState,P;if(w.objectMode||(typeof p=="string"?(v=v||w.defaultEncoding,w.encoding!==v&&(T&&w.encoding?p=L.from(p,v).toString(w.encoding):(p=L.from(p,v),v=""))):p instanceof L?v="":y._isUint8Array(p)?(p=y._uint8ArrayToBuffer(p),v=""):p!=null&&(P=new Q("chunk",["string","Buffer","Uint8Array"],p))),P)re(u,P);else if(p===null)w.reading=!1,E(u,w);else if(w.objectMode||p&&p.length>0)if(T)if(w.endEmitted)re(u,new Z);else{if(w.destroyed||w.errored)return!1;ce(u,w,p,!0)}else if(w.ended)re(u,new q);else{if(w.destroyed||w.errored)return!1;w.reading=!1,w.decoder&&!v?(p=w.decoder.write(p),w.objectMode||p.length!==0?ce(u,w,p,!1):J(u,w)):ce(u,w,p,!1)}else T||(w.reading=!1,J(u,w));return!w.ended&&(w.length<w.highWaterMark||w.length===0)}function ce(u,p,v,T){p.flowing&&p.length===0&&!p.sync&&u.listenerCount("data")>0?(p.multiAwaitDrain?p.awaitDrainWriters.clear():p.awaitDrainWriters=null,p.dataEmitted=!0,u.emit("data",v)):(p.length+=p.objectMode?1:v.length,T?p.buffer.unshift(v):p.buffer.push(v),p.needReadable&&V(u)),J(u,p)}A.prototype.isPaused=function(){let u=this._readableState;return u[ge]===!0||u.flowing===!1},A.prototype.setEncoding=function(u){let p=new ne(u);this._readableState.decoder=p,this._readableState.encoding=this._readableState.decoder.encoding;let v=this._readableState.buffer,T="";for(let w of v)T+=p.write(w);return v.clear(),T!==""&&v.push(T),this._readableState.length=T.length,this};var Ee=1073741824;function he(u){if(u>Ee)throw new S("size","<= 1GiB",u);return u--,u|=u>>>1,u|=u>>>2,u|=u>>>4,u|=u>>>8,u|=u>>>16,u++,u}function M(u,p){return u<=0||p.length===0&&p.ended?0:p.objectMode?1:n(u)?p.flowing&&p.length?p.buffer.first().length:p.length:u<=p.length?u:p.ended?p.length:0}A.prototype.read=function(u){N("read",u),u===void 0?u=NaN:h(u)||(u=i(u,10));let p=this._readableState,v=u;if(u>p.highWaterMark&&(p.highWaterMark=he(u)),u!==0&&(p.emittedReadable=!1),u===0&&p.needReadable&&((p.highWaterMark!==0?p.length>=p.highWaterMark:p.length>0)||p.ended))return N("read: emitReadable",p.length,p.ended),p.length===0&&p.ended?we(this):V(this),null;if(u=M(u,p),u===0&&p.ended)return p.length===0&&we(this),null;let T=p.needReadable;if(N("need readable",T),(p.length===0||p.length-u<p.highWaterMark)&&(T=!0,N("length less than watermark",T)),p.ended||p.reading||p.destroyed||p.errored||!p.constructed)T=!1,N("reading, ended or constructing",T);else if(T){N("do read"),p.reading=!0,p.sync=!0,p.length===0&&(p.needReadable=!0);try{this._read(p.highWaterMark)}catch(P){re(this,P)}p.sync=!1,p.reading||(u=M(v,p))}let w;return u>0?w=z(u,p):w=null,w===null?(p.needReadable=p.length<=p.highWaterMark,u=0):(p.length-=u,p.multiAwaitDrain?p.awaitDrainWriters.clear():p.awaitDrainWriters=null),p.length===0&&(p.ended||(p.needReadable=!0),v!==u&&p.ended&&we(this)),w!==null&&!p.errorEmitted&&!p.closeEmitted&&(p.dataEmitted=!0,this.emit("data",w)),w};function E(u,p){if(N("onEofChunk"),!p.ended){if(p.decoder){let v=p.decoder.end();v&&v.length&&(p.buffer.push(v),p.length+=p.objectMode?1:v.length)}p.ended=!0,p.sync?V(u):(p.needReadable=!1,p.emittedReadable=!0,le(u))}}function V(u){let p=u._readableState;N("emitReadable",p.needReadable,p.emittedReadable),p.needReadable=!1,p.emittedReadable||(N("emitReadable",p.flowing),p.emittedReadable=!0,t.nextTick(le,u))}function le(u){let p=u._readableState;N("emitReadable_",p.destroyed,p.length,p.ended),!p.destroyed&&!p.errored&&(p.length||p.ended)&&(u.emit("readable"),p.emittedReadable=!1),p.needReadable=!p.flowing&&!p.ended&&p.length<=p.highWaterMark,te(u)}function J(u,p){!p.readingMore&&p.constructed&&(p.readingMore=!0,t.nextTick(X,u,p))}function X(u,p){for(;!p.reading&&!p.ended&&(p.length<p.highWaterMark||p.flowing&&p.length===0);){let v=p.length;if(N("maybeReadMore read 0"),u.read(0),v===p.length)break}p.readingMore=!1}A.prototype._read=function(u){throw new ee("_read()")},A.prototype.pipe=function(u,p){let v=this,T=this._readableState;T.pipes.length===1&&(T.multiAwaitDrain||(T.multiAwaitDrain=!0,T.awaitDrainWriters=new d(T.awaitDrainWriters?[T.awaitDrainWriters]:[]))),T.pipes.push(u),N("pipe count=%d opts=%j",T.pipes.length,p);let w=(!p||p.end!==!1)&&u!==t.stdout&&u!==t.stderr?H:at;T.endEmitted?t.nextTick(w):v.once("end",w),u.on("unpipe",P);function P(Ke,Ye){N("onunpipe"),Ke===v&&Ye&&Ye.hasUnpiped===!1&&(Ye.hasUnpiped=!0,ye())}function H(){N("onend"),u.end()}let fe,ie=!1;function ye(){N("cleanup"),u.removeListener("close",st),u.removeListener("finish",Le),fe&&u.removeListener("drain",fe),u.removeListener("error",ze),u.removeListener("unpipe",P),v.removeListener("end",H),v.removeListener("end",at),v.removeListener("data",ke),ie=!0,fe&&T.awaitDrainWriters&&(!u._writableState||u._writableState.needDrain)&&fe()}function Se(){ie||(T.pipes.length===1&&T.pipes[0]===u?(N("false write response, pause",0),T.awaitDrainWriters=u,T.multiAwaitDrain=!1):T.pipes.length>1&&T.pipes.includes(u)&&(N("false write response, pause",T.awaitDrainWriters.size),T.awaitDrainWriters.add(u)),v.pause()),fe||(fe=ue(v,u),u.on("drain",fe))}v.on("data",ke);function ke(Ke){N("ondata");let Ye=u.write(Ke);N("dest.write",Ye),Ye===!1&&Se()}function ze(Ke){if(N("onerror",Ke),at(),u.removeListener("error",ze),u.listenerCount("error")===0){let Ye=u._writableState||u._readableState;Ye&&!Ye.errorEmitted?re(u,Ke):u.emit("error",Ke)}}I(u,"error",ze);function st(){u.removeListener("finish",Le),at()}u.once("close",st);function Le(){N("onfinish"),u.removeListener("close",st),at()}u.once("finish",Le);function at(){N("unpipe"),v.unpipe(u)}return u.emit("pipe",v),u.writableNeedDrain===!0?T.flowing&&Se():T.flowing||(N("pipe resume"),v.resume()),u};function ue(u,p){return function(){let v=u._readableState;v.awaitDrainWriters===p?(N("pipeOnDrain",1),v.awaitDrainWriters=null):v.multiAwaitDrain&&(N("pipeOnDrain",v.awaitDrainWriters.size),v.awaitDrainWriters.delete(p)),(!v.awaitDrainWriters||v.awaitDrainWriters.size===0)&&u.listenerCount("data")&&u.resume()}}A.prototype.unpipe=function(u){let p=this._readableState,v={hasUnpiped:!1};if(p.pipes.length===0)return this;if(!u){let w=p.pipes;p.pipes=[],this.pause();for(let P=0;P<w.length;P++)w[P].emit("unpipe",this,{hasUnpiped:!1});return this}let T=a(p.pipes,u);return T===-1?this:(p.pipes.splice(T,1),p.pipes.length===0&&this.pause(),u.emit("unpipe",this,v),this)},A.prototype.on=function(u,p){let v=y.prototype.on.call(this,u,p),T=this._readableState;return u==="data"?(T.readableListening=this.listenerCount("readable")>0,T.flowing!==!1&&this.resume()):u==="readable"&&!T.endEmitted&&!T.readableListening&&(T.readableListening=T.needReadable=!0,T.flowing=!1,T.emittedReadable=!1,N("on readable",T.length,T.reading),T.length?V(this):T.reading||t.nextTick(R,this)),v},A.prototype.addListener=A.prototype.on,A.prototype.removeListener=function(u,p){let v=y.prototype.removeListener.call(this,u,p);return u==="readable"&&t.nextTick(de,this),v},A.prototype.off=A.prototype.removeListener,A.prototype.removeAllListeners=function(u){let p=y.prototype.removeAllListeners.apply(this,arguments);return(u==="readable"||u===void 0)&&t.nextTick(de,this),p};function de(u){let p=u._readableState;p.readableListening=u.listenerCount("readable")>0,p.resumeScheduled&&p[ge]===!1?p.flowing=!0:u.listenerCount("data")>0?u.resume():p.readableListening||(p.flowing=null)}function R(u){N("readable nexttick read 0"),u.read(0)}A.prototype.resume=function(){let u=this._readableState;return u.flowing||(N("resume"),u.flowing=!u.readableListening,F(this,u)),u[ge]=!1,this};function F(u,p){p.resumeScheduled||(p.resumeScheduled=!0,t.nextTick(D,u,p))}function D(u,p){N("resume",p.reading),p.reading||u.read(0),p.resumeScheduled=!1,u.emit("resume"),te(u),p.flowing&&!p.reading&&u.read(0)}A.prototype.pause=function(){return N("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(N("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[ge]=!0,this};function te(u){let p=u._readableState;for(N("flow",p.flowing);p.flowing&&u.read()!==null;);}A.prototype.wrap=function(u){let p=!1;u.on("data",T=>{!this.push(T)&&u.pause&&(p=!0,u.pause())}),u.on("end",()=>{this.push(null)}),u.on("error",T=>{re(this,T)}),u.on("close",()=>{this.destroy()}),u.on("destroy",()=>{this.destroy()}),this._read=()=>{p&&u.resume&&(p=!1,u.resume())};let v=o(u);for(let T=1;T<v.length;T++){let w=v[T];this[w]===void 0&&typeof u[w]=="function"&&(this[w]=u[w].bind(u))}return this},A.prototype[g]=function(){return G(this)},A.prototype.iterator=function(u){return u!==void 0&&K(u,"options"),G(this,u)};function G(u,p){typeof u.read!="function"&&(u=A.wrap(u,{objectMode:!0}));let v=U(u,p);return v.stream=u,v}async function*U(u,p){let v=be;function T(H){this===u?(v(),v=be):v=H}u.on("readable",T);let w,P=_(u,{writable:!1},H=>{w=H?W(w,H):null,v(),v=be});try{for(;;){let H=u.destroyed?null:u.read();if(H!==null)yield H;else{if(w)throw w;if(w===null)return;await new c(T)}}}catch(H){throw w=W(w,H),w}finally{(w||(p==null?void 0:p.destroyOnReturn)!==!1)&&(w===void 0||u._readableState.autoDestroy)?O.destroyer(u,null):(u.off("readable",T),P())}}s(A.prototype,{readable:{__proto__:null,get(){let u=this._readableState;return!!u&&u.readable!==!1&&!u.destroyed&&!u.errorEmitted&&!u.endEmitted},set(u){this._readableState&&(this._readableState.readable=!!u)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(u){this._readableState&&(this._readableState.flowing=u)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(u){this._readableState&&(this._readableState.destroyed=u)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),s(ve.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[ge]!==!1},set(u){this[ge]=!!u}}}),A._fromList=z;function z(u,p){if(p.length===0)return null;let v;return p.objectMode?v=p.buffer.shift():!u||u>=p.length?(p.decoder?v=p.buffer.join(""):p.buffer.length===1?v=p.buffer.first():v=p.buffer.concat(p.length),p.buffer.clear()):v=p.buffer.consume(u,p.decoder),v}function we(u){let p=u._readableState;N("endReadable",p.endEmitted),p.endEmitted||(p.ended=!0,t.nextTick(_e,p,u))}function _e(u,p){if(N("endReadableNT",u.endEmitted,u.length),!u.errored&&!u.closeEmitted&&!u.endEmitted&&u.length===0){if(u.endEmitted=!0,p.emit("end"),p.writable&&p.allowHalfOpen===!1)t.nextTick(Ae,p);else if(u.autoDestroy){let v=p._writableState;(!v||v.autoDestroy&&(v.finished||v.writable===!1))&&p.destroy()}}}function Ae(u){u.writable&&!u.writableEnded&&!u.destroyed&&u.end()}A.from=function(u,p){return $(A,u,p)};var Pe;function f(){return Pe===void 0&&(Pe={}),Pe}A.fromWeb=function(u,p){return f().newStreamReadableFromReadableStream(u,p)},A.toWeb=function(u,p){return f().newReadableStreamFromStreamReadable(u,p)},A.wrap=function(u,p){var v,T;return new A({objectMode:(v=(T=u.readableObjectMode)!==null&&T!==void 0?T:u.objectMode)!==null&&v!==void 0?v:!0,...p,destroy(w,P){O.destroyer(u,w),P(w)}}).wrap(u)}}),xs=me((e,r)=>{oe(),ae(),se();var t=hr(),{ArrayPrototypeSlice:a,Error:h,FunctionPrototypeSymbolHasInstance:n,ObjectDefineProperty:i,ObjectDefineProperties:s,ObjectSetPrototypeOf:o,StringPrototypeToLowerCase:l,Symbol:c,SymbolHasInstance:d}=Xe();r.exports=ne,ne.WritableState=K;var{EventEmitter:g}=(yr(),Ue(ur)),m=Kn().Stream,{Buffer:b}=(it(),Ue(rt)),y=br(),{addAbortSignal:I}=Zr(),{getHighWaterMark:L,getDefaultHighWaterMark:k}=Yn(),{ERR_INVALID_ARG_TYPE:_,ERR_METHOD_NOT_IMPLEMENTED:N,ERR_MULTIPLE_CALLBACK:j,ERR_STREAM_CANNOT_PIPE:O,ERR_STREAM_DESTROYED:C,ERR_STREAM_ALREADY_FINISHED:x,ERR_STREAM_NULL_VALUES:W,ERR_STREAM_WRITE_AFTER_END:Q,ERR_UNKNOWN_ENCODING:ee}=ut().codes,{errorOrDestroy:S}=y;o(ne.prototype,m.prototype),o(ne,m);function q(){}var Z=c("kOnFinished");function K(R,F,D){typeof D!="boolean"&&(D=F instanceof Lt()),this.objectMode=!!(R&&R.objectMode),D&&(this.objectMode=this.objectMode||!!(R&&R.writableObjectMode)),this.highWaterMark=R?L(this,R,"writableHighWaterMark",D):k(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let te=!!(R&&R.decodeStrings===!1);this.decodeStrings=!te,this.defaultEncoding=R&&R.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=A.bind(void 0,F),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,ge(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!R||R.emitClose!==!1,this.autoDestroy=!R||R.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[Z]=[]}function ge(R){R.buffered=[],R.bufferedIndex=0,R.allBuffers=!0,R.allNoop=!0}K.prototype.getBuffer=function(){return a(this.buffered,this.bufferedIndex)},i(K.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function ne(R){let F=this instanceof Lt();if(!F&&!n(ne,this))return new ne(R);this._writableState=new K(R,this,F),R&&(typeof R.write=="function"&&(this._write=R.write),typeof R.writev=="function"&&(this._writev=R.writev),typeof R.destroy=="function"&&(this._destroy=R.destroy),typeof R.final=="function"&&(this._final=R.final),typeof R.construct=="function"&&(this._construct=R.construct),R.signal&&I(R.signal,this)),m.call(this,R),y.construct(this,()=>{let D=this._writableState;D.writing||he(this,D),le(this,D)})}i(ne,d,{__proto__:null,value:function(R){return n(this,R)?!0:this!==ne?!1:R&&R._writableState instanceof K}}),ne.prototype.pipe=function(){S(this,new O)};function $(R,F,D,te){let G=R._writableState;if(typeof D=="function")te=D,D=G.defaultEncoding;else{if(!D)D=G.defaultEncoding;else if(D!=="buffer"&&!b.isEncoding(D))throw new ee(D);typeof te!="function"&&(te=q)}if(F===null)throw new W;if(!G.objectMode)if(typeof F=="string")G.decodeStrings!==!1&&(F=b.from(F,D),D="buffer");else if(F instanceof b)D="buffer";else if(m._isUint8Array(F))F=m._uint8ArrayToBuffer(F),D="buffer";else throw new _("chunk",["string","Buffer","Uint8Array"],F);let U;return G.ending?U=new Q:G.destroyed&&(U=new C("write")),U?(t.nextTick(te,U),S(R,U,!0),U):(G.pendingcb++,be(R,G,F,D,te))}ne.prototype.write=function(R,F,D){return $(this,R,F,D)===!0},ne.prototype.cork=function(){this._writableState.corked++},ne.prototype.uncork=function(){let R=this._writableState;R.corked&&(R.corked--,R.writing||he(this,R))},ne.prototype.setDefaultEncoding=function(R){if(typeof R=="string"&&(R=l(R)),!b.isEncoding(R))throw new ee(R);return this._writableState.defaultEncoding=R,this};function be(R,F,D,te,G){let U=F.objectMode?1:D.length;F.length+=U;let z=F.length<F.highWaterMark;return z||(F.needDrain=!0),F.writing||F.corked||F.errored||!F.constructed?(F.buffered.push({chunk:D,encoding:te,callback:G}),F.allBuffers&&te!=="buffer"&&(F.allBuffers=!1),F.allNoop&&G!==q&&(F.allNoop=!1)):(F.writelen=U,F.writecb=G,F.writing=!0,F.sync=!0,R._write(D,te,F.onwrite),F.sync=!1),z&&!F.errored&&!F.destroyed}function re(R,F,D,te,G,U,z){F.writelen=te,F.writecb=z,F.writing=!0,F.sync=!0,F.destroyed?F.onwrite(new C("write")):D?R._writev(G,F.onwrite):R._write(G,U,F.onwrite),F.sync=!1}function ve(R,F,D,te){--F.pendingcb,te(D),Ee(F),S(R,D)}function A(R,F){let D=R._writableState,te=D.sync,G=D.writecb;if(typeof G!="function"){S(R,new j);return}D.writing=!1,D.writecb=null,D.length-=D.writelen,D.writelen=0,F?(F.stack,D.errored||(D.errored=F),R._readableState&&!R._readableState.errored&&(R._readableState.errored=F),te?t.nextTick(ve,R,D,F,G):ve(R,D,F,G)):(D.buffered.length>D.bufferedIndex&&he(R,D),te?D.afterWriteTickInfo!==null&&D.afterWriteTickInfo.cb===G?D.afterWriteTickInfo.count++:(D.afterWriteTickInfo={count:1,cb:G,stream:R,state:D},t.nextTick(Y,D.afterWriteTickInfo)):ce(R,D,1,G))}function Y({stream:R,state:F,count:D,cb:te}){return F.afterWriteTickInfo=null,ce(R,F,D,te)}function ce(R,F,D,te){for(!F.ending&&!R.destroyed&&F.length===0&&F.needDrain&&(F.needDrain=!1,R.emit("drain"));D-- >0;)F.pendingcb--,te();F.destroyed&&Ee(F),le(R,F)}function Ee(R){if(R.writing)return;for(let G=R.bufferedIndex;G<R.buffered.length;++G){var F;let{chunk:U,callback:z}=R.buffered[G],we=R.objectMode?1:U.length;R.length-=we,z((F=R.errored)!==null&&F!==void 0?F:new C("write"))}let D=R[Z].splice(0);for(let G=0;G<D.length;G++){var te;D[G]((te=R.errored)!==null&&te!==void 0?te:new C("end"))}ge(R)}function he(R,F){if(F.corked||F.bufferProcessing||F.destroyed||!F.constructed)return;let{buffered:D,bufferedIndex:te,objectMode:G}=F,U=D.length-te;if(!U)return;let z=te;if(F.bufferProcessing=!0,U>1&&R._writev){F.pendingcb-=U-1;let we=F.allNoop?q:Ae=>{for(let Pe=z;Pe<D.length;++Pe)D[Pe].callback(Ae)},_e=F.allNoop&&z===0?D:a(D,z);_e.allBuffers=F.allBuffers,re(R,F,!0,F.length,_e,"",we),ge(F)}else{do{let{chunk:we,encoding:_e,callback:Ae}=D[z];D[z++]=null;let Pe=G?1:we.length;re(R,F,!1,Pe,we,_e,Ae)}while(z<D.length&&!F.writing);z===D.length?ge(F):z>256?(D.splice(0,z),F.bufferedIndex=0):F.bufferedIndex=z}F.bufferProcessing=!1}ne.prototype._write=function(R,F,D){if(this._writev)this._writev([{chunk:R,encoding:F}],D);else throw new N("_write()")},ne.prototype._writev=null,ne.prototype.end=function(R,F,D){let te=this._writableState;typeof R=="function"?(D=R,R=null,F=null):typeof F=="function"&&(D=F,F=null);let G;if(R!=null){let U=$(this,R,F);U instanceof h&&(G=U)}return te.corked&&(te.corked=1,this.uncork()),G||(!te.errored&&!te.ending?(te.ending=!0,le(this,te,!0),te.ended=!0):te.finished?G=new x("end"):te.destroyed&&(G=new C("end"))),typeof D=="function"&&(G||te.finished?t.nextTick(D,G):te[Z].push(D)),this};function M(R){return R.ending&&!R.destroyed&&R.constructed&&R.length===0&&!R.errored&&R.buffered.length===0&&!R.finished&&!R.writing&&!R.errorEmitted&&!R.closeEmitted}function E(R,F){let D=!1;function te(G){if(D){S(R,G??j());return}if(D=!0,F.pendingcb--,G){let U=F[Z].splice(0);for(let z=0;z<U.length;z++)U[z](G);S(R,G,F.sync)}else M(F)&&(F.prefinished=!0,R.emit("prefinish"),F.pendingcb++,t.nextTick(J,R,F))}F.sync=!0,F.pendingcb++;try{R._final(te)}catch(G){te(G)}F.sync=!1}function V(R,F){!F.prefinished&&!F.finalCalled&&(typeof R._final=="function"&&!F.destroyed?(F.finalCalled=!0,E(R,F)):(F.prefinished=!0,R.emit("prefinish")))}function le(R,F,D){M(F)&&(V(R,F),F.pendingcb===0&&(D?(F.pendingcb++,t.nextTick((te,G)=>{M(G)?J(te,G):G.pendingcb--},R,F)):M(F)&&(F.pendingcb++,J(R,F))))}function J(R,F){F.pendingcb--,F.finished=!0;let D=F[Z].splice(0);for(let te=0;te<D.length;te++)D[te]();if(R.emit("finish"),F.autoDestroy){let te=R._readableState;(!te||te.autoDestroy&&(te.endEmitted||te.readable===!1))&&R.destroy()}}s(ne.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(R){this._writableState&&(this._writableState.destroyed=R)}},writable:{__proto__:null,get(){let R=this._writableState;return!!R&&R.writable!==!1&&!R.destroyed&&!R.errored&&!R.ending&&!R.ended},set(R){this._writableState&&(this._writableState.writable=!!R)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let R=this._writableState;return R?!R.destroyed&&!R.ending&&R.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var X=y.destroy;ne.prototype.destroy=function(R,F){let D=this._writableState;return!D.destroyed&&(D.bufferedIndex<D.buffered.length||D[Z].length)&&t.nextTick(Ee,D),X.call(this,R,F),this},ne.prototype._undestroy=y.undestroy,ne.prototype._destroy=function(R,F){F(R)},ne.prototype[g.captureRejectionSymbol]=function(R){this.destroy(R)};var ue;function de(){return ue===void 0&&(ue={}),ue}ne.fromWeb=function(R,F){return de().newStreamWritableFromWritableStream(R,F)},ne.toWeb=function(R){return de().newWritableStreamFromStreamWritable(R)}}),Vl=me((e,r)=>{oe(),ae(),se();var t=hr(),a=(it(),Ue(rt)),{isReadable:h,isWritable:n,isIterable:i,isNodeStream:s,isReadableNodeStream:o,isWritableNodeStream:l,isDuplexNodeStream:c}=Nt(),d=Vt(),{AbortError:g,codes:{ERR_INVALID_ARG_TYPE:m,ERR_INVALID_RETURN_VALUE:b}}=ut(),{destroyer:y}=br(),I=Lt(),L=ti(),{createDeferredPromise:k}=xt(),_=Ms(),N=globalThis.Blob||a.Blob,j=typeof N<"u"?function(ee){return ee instanceof N}:function(ee){return!1},O=globalThis.AbortController||Vn().AbortController,{FunctionPrototypeCall:C}=Xe(),x=class extends I{constructor(ee){super(ee),(ee==null?void 0:ee.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(ee==null?void 0:ee.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};r.exports=function ee(S,q){if(c(S))return S;if(o(S))return Q({readable:S});if(l(S))return Q({writable:S});if(s(S))return Q({writable:!1,readable:!1});if(typeof S=="function"){let{value:K,write:ge,final:ne,destroy:$}=W(S);if(i(K))return _(x,K,{objectMode:!0,write:ge,final:ne,destroy:$});let be=K==null?void 0:K.then;if(typeof be=="function"){let re,ve=C(be,K,A=>{if(A!=null)throw new b("nully","body",A)},A=>{y(re,A)});return re=new x({objectMode:!0,readable:!1,write:ge,final(A){ne(async()=>{try{await ve,t.nextTick(A,null)}catch(Y){t.nextTick(A,Y)}})},destroy:$})}throw new b("Iterable, AsyncIterable or AsyncFunction",q,K)}if(j(S))return ee(S.arrayBuffer());if(i(S))return _(x,S,{objectMode:!0,writable:!1});if(typeof(S==null?void 0:S.writable)=="object"||typeof(S==null?void 0:S.readable)=="object"){let K=S!=null&&S.readable?o(S==null?void 0:S.readable)?S==null?void 0:S.readable:ee(S.readable):void 0,ge=S!=null&&S.writable?l(S==null?void 0:S.writable)?S==null?void 0:S.writable:ee(S.writable):void 0;return Q({readable:K,writable:ge})}let Z=S==null?void 0:S.then;if(typeof Z=="function"){let K;return C(Z,S,ge=>{ge!=null&&K.push(ge),K.push(null)},ge=>{y(K,ge)}),K=new x({objectMode:!0,writable:!1,read(){}})}throw new m(q,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],S)};function W(ee){let{promise:S,resolve:q}=k(),Z=new O,K=Z.signal;return{value:ee(async function*(){for(;;){let ge=S;S=null;let{chunk:ne,done:$,cb:be}=await ge;if(t.nextTick(be),$)return;if(K.aborted)throw new g(void 0,{cause:K.reason});({promise:S,resolve:q}=k()),yield ne}}(),{signal:K}),write(ge,ne,$){let be=q;q=null,be({chunk:ge,done:!1,cb:$})},final(ge){let ne=q;q=null,ne({done:!0,cb:ge})},destroy(ge,ne){Z.abort(),ne(ge)}}}function Q(ee){let S=ee.readable&&typeof ee.readable.read!="function"?L.wrap(ee.readable):ee.readable,q=ee.writable,Z=!!h(S),K=!!n(q),ge,ne,$,be,re;function ve(A){let Y=be;be=null,Y?Y(A):A&&re.destroy(A)}return re=new x({readableObjectMode:!!(S!=null&&S.readableObjectMode),writableObjectMode:!!(q!=null&&q.writableObjectMode),readable:Z,writable:K}),K&&(d(q,A=>{K=!1,A&&y(S,A),ve(A)}),re._write=function(A,Y,ce){q.write(A,Y)?ce():ge=ce},re._final=function(A){q.end(),ne=A},q.on("drain",function(){if(ge){let A=ge;ge=null,A()}}),q.on("finish",function(){if(ne){let A=ne;ne=null,A()}})),Z&&(d(S,A=>{Z=!1,A&&y(S,A),ve(A)}),S.on("readable",function(){if($){let A=$;$=null,A()}}),S.on("end",function(){re.push(null)}),re._read=function(){for(;;){let A=S.read();if(A===null){$=re._read;return}if(!re.push(A))return}}),re._destroy=function(A,Y){!A&&be!==null&&(A=new g),$=null,ge=null,ne=null,be===null?Y(A):(be=Y,y(q,A),y(S,A))},re}}),Lt=me((e,r)=>{oe(),ae(),se();var{ObjectDefineProperties:t,ObjectGetOwnPropertyDescriptor:a,ObjectKeys:h,ObjectSetPrototypeOf:n}=Xe();r.exports=o;var i=ti(),s=xs();n(o.prototype,i.prototype),n(o,i);{let g=h(s.prototype);for(let m=0;m<g.length;m++){let b=g[m];o.prototype[b]||(o.prototype[b]=s.prototype[b])}}function o(g){if(!(this instanceof o))return new o(g);i.call(this,g),s.call(this,g),g?(this.allowHalfOpen=g.allowHalfOpen!==!1,g.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),g.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}t(o.prototype,{writable:{__proto__:null,...a(s.prototype,"writable")},writableHighWaterMark:{__proto__:null,...a(s.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...a(s.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...a(s.prototype,"writableBuffer")},writableLength:{__proto__:null,...a(s.prototype,"writableLength")},writableFinished:{__proto__:null,...a(s.prototype,"writableFinished")},writableCorked:{__proto__:null,...a(s.prototype,"writableCorked")},writableEnded:{__proto__:null,...a(s.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...a(s.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(g){this._readableState&&this._writableState&&(this._readableState.destroyed=g,this._writableState.destroyed=g)}}});var l;function c(){return l===void 0&&(l={}),l}o.fromWeb=function(g,m){return c().newStreamDuplexFromReadableWritablePair(g,m)},o.toWeb=function(g){return c().newReadableWritablePairFromDuplex(g)};var d;o.from=function(g){return d||(d=Vl()),d(g,"body")}}),Ls=me((e,r)=>{oe(),ae(),se();var{ObjectSetPrototypeOf:t,Symbol:a}=Xe();r.exports=o;var{ERR_METHOD_NOT_IMPLEMENTED:h}=ut().codes,n=Lt(),{getHighWaterMark:i}=Yn();t(o.prototype,n.prototype),t(o,n);var s=a("kCallback");function o(d){if(!(this instanceof o))return new o(d);let g=d?i(this,d,"readableHighWaterMark",!0):null;g===0&&(d={...d,highWaterMark:null,readableHighWaterMark:g,writableHighWaterMark:d.writableHighWaterMark||0}),n.call(this,d),this._readableState.sync=!1,this[s]=null,d&&(typeof d.transform=="function"&&(this._transform=d.transform),typeof d.flush=="function"&&(this._flush=d.flush)),this.on("prefinish",c)}function l(d){typeof this._flush=="function"&&!this.destroyed?this._flush((g,m)=>{if(g){d?d(g):this.destroy(g);return}m!=null&&this.push(m),this.push(null),d&&d()}):(this.push(null),d&&d())}function c(){this._final!==l&&l.call(this)}o.prototype._final=l,o.prototype._transform=function(d,g,m){throw new h("_transform()")},o.prototype._write=function(d,g,m){let b=this._readableState,y=this._writableState,I=b.length;this._transform(d,g,(L,k)=>{if(L){m(L);return}k!=null&&this.push(k),y.ended||I===b.length||b.length<b.highWaterMark?m():this[s]=m})},o.prototype._read=function(){if(this[s]){let d=this[s];this[s]=null,d()}}}),Us=me((e,r)=>{oe(),ae(),se();var{ObjectSetPrototypeOf:t}=Xe();r.exports=h;var a=Ls();t(h.prototype,a.prototype),t(h,a);function h(n){if(!(this instanceof h))return new h(n);a.call(this,n)}h.prototype._transform=function(n,i,s){s(null,n)}}),Xn=me((e,r)=>{oe(),ae(),se();var t=hr(),{ArrayIsArray:a,Promise:h,SymbolAsyncIterator:n}=Xe(),i=Vt(),{once:s}=xt(),o=br(),l=Lt(),{aggregateTwoErrors:c,codes:{ERR_INVALID_ARG_TYPE:d,ERR_INVALID_RETURN_VALUE:g,ERR_MISSING_ARGS:m,ERR_STREAM_DESTROYED:b,ERR_STREAM_PREMATURE_CLOSE:y},AbortError:I}=ut(),{validateFunction:L,validateAbortSignal:k}=Jr(),{isIterable:_,isReadable:N,isReadableNodeStream:j,isNodeStream:O,isTransformStream:C,isWebStream:x,isReadableStream:W,isReadableEnded:Q}=Nt(),ee=globalThis.AbortController||Vn().AbortController,S,q;function Z(Y,ce,Ee){let he=!1;Y.on("close",()=>{he=!0});let M=i(Y,{readable:ce,writable:Ee},E=>{he=!E});return{destroy:E=>{he||(he=!0,o.destroyer(Y,E||new b("pipe")))},cleanup:M}}function K(Y){return L(Y[Y.length-1],"streams[stream.length - 1]"),Y.pop()}function ge(Y){if(_(Y))return Y;if(j(Y))return ne(Y);throw new d("val",["Readable","Iterable","AsyncIterable"],Y)}async function*ne(Y){q||(q=ti()),yield*q.prototype[n].call(Y)}async function $(Y,ce,Ee,{end:he}){let M,E=null,V=X=>{if(X&&(M=X),E){let ue=E;E=null,ue()}},le=()=>new h((X,ue)=>{M?ue(M):E=()=>{M?ue(M):X()}});ce.on("drain",V);let J=i(ce,{readable:!1},V);try{ce.writableNeedDrain&&await le();for await(let X of Y)ce.write(X)||await le();he&&ce.end(),await le(),Ee()}catch(X){Ee(M!==X?c(M,X):X)}finally{J(),ce.off("drain",V)}}async function be(Y,ce,Ee,{end:he}){C(ce)&&(ce=ce.writable);let M=ce.getWriter();try{for await(let E of Y)await M.ready,M.write(E).catch(()=>{});await M.ready,he&&await M.close(),Ee()}catch(E){try{await M.abort(E),Ee(E)}catch(V){Ee(V)}}}function re(...Y){return ve(Y,s(K(Y)))}function ve(Y,ce,Ee){if(Y.length===1&&a(Y[0])&&(Y=Y[0]),Y.length<2)throw new m("streams");let he=new ee,M=he.signal,E=Ee==null?void 0:Ee.signal,V=[];k(E,"options.signal");function le(){F(new I)}E==null||E.addEventListener("abort",le);let J,X,ue=[],de=0;function R(U){F(U,--de===0)}function F(U,z){if(U&&(!J||J.code==="ERR_STREAM_PREMATURE_CLOSE")&&(J=U),!(!J&&!z)){for(;ue.length;)ue.shift()(J);E==null||E.removeEventListener("abort",le),he.abort(),z&&(J||V.forEach(we=>we()),t.nextTick(ce,J,X))}}let D;for(let U=0;U<Y.length;U++){let z=Y[U],we=U<Y.length-1,_e=U>0,Ae=we||(Ee==null?void 0:Ee.end)!==!1,Pe=U===Y.length-1;if(O(z)){let f=function(u){u&&u.name!=="AbortError"&&u.code!=="ERR_STREAM_PREMATURE_CLOSE"&&R(u)};if(Ae){let{destroy:u,cleanup:p}=Z(z,we,_e);ue.push(u),N(z)&&Pe&&V.push(p)}z.on("error",f),N(z)&&Pe&&V.push(()=>{z.removeListener("error",f)})}if(U===0)if(typeof z=="function"){if(D=z({signal:M}),!_(D))throw new g("Iterable, AsyncIterable or Stream","source",D)}else _(z)||j(z)||C(z)?D=z:D=l.from(z);else if(typeof z=="function"){if(C(D)){var te;D=ge((te=D)===null||te===void 0?void 0:te.readable)}else D=ge(D);if(D=z(D,{signal:M}),we){if(!_(D,!0))throw new g("AsyncIterable",`transform[${U-1}]`,D)}else{var G;S||(S=Us());let f=new S({objectMode:!0}),u=(G=D)===null||G===void 0?void 0:G.then;if(typeof u=="function")de++,u.call(D,T=>{X=T,T!=null&&f.write(T),Ae&&f.end(),t.nextTick(R)},T=>{f.destroy(T),t.nextTick(R,T)});else if(_(D,!0))de++,$(D,f,R,{end:Ae});else if(W(D)||C(D)){let T=D.readable||D;de++,$(T,f,R,{end:Ae})}else throw new g("AsyncIterable or Promise","destination",D);D=f;let{destroy:p,cleanup:v}=Z(D,!1,!0);ue.push(p),Pe&&V.push(v)}}else if(O(z)){if(j(D)){de+=2;let f=A(D,z,R,{end:Ae});N(z)&&Pe&&V.push(f)}else if(C(D)||W(D)){let f=D.readable||D;de++,$(f,z,R,{end:Ae})}else if(_(D))de++,$(D,z,R,{end:Ae});else throw new d("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],D);D=z}else if(x(z)){if(j(D))de++,be(ge(D),z,R,{end:Ae});else if(W(D)||_(D))de++,be(D,z,R,{end:Ae});else if(C(D))de++,be(D.readable,z,R,{end:Ae});else throw new d("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],D);D=z}else D=l.from(z)}return(M!=null&&M.aborted||E!=null&&E.aborted)&&t.nextTick(le),D}function A(Y,ce,Ee,{end:he}){let M=!1;if(ce.on("close",()=>{M||Ee(new y)}),Y.pipe(ce,{end:!1}),he){let E=function(){M=!0,ce.end()};Q(Y)?t.nextTick(E):Y.once("end",E)}else Ee();return i(Y,{readable:!0,writable:!1},E=>{let V=Y._readableState;E&&E.code==="ERR_STREAM_PREMATURE_CLOSE"&&V&&V.ended&&!V.errored&&!V.errorEmitted?Y.once("end",Ee).once("error",Ee):Ee(E)}),i(ce,{readable:!1,writable:!0},Ee)}r.exports={pipelineImpl:ve,pipeline:re}}),Ns=me((e,r)=>{oe(),ae(),se();var{pipeline:t}=Xn(),a=Lt(),{destroyer:h}=br(),{isNodeStream:n,isReadable:i,isWritable:s,isWebStream:o,isTransformStream:l,isWritableStream:c,isReadableStream:d}=Nt(),{AbortError:g,codes:{ERR_INVALID_ARG_VALUE:m,ERR_MISSING_ARGS:b}}=ut(),y=Vt();r.exports=function(...I){if(I.length===0)throw new b("streams");if(I.length===1)return a.from(I[0]);let L=[...I];if(typeof I[0]=="function"&&(I[0]=a.from(I[0])),typeof I[I.length-1]=="function"){let S=I.length-1;I[S]=a.from(I[S])}for(let S=0;S<I.length;++S)if(!(!n(I[S])&&!o(I[S]))){if(S<I.length-1&&!(i(I[S])||d(I[S])||l(I[S])))throw new m(`streams[${S}]`,L[S],"must be readable");if(S>0&&!(s(I[S])||c(I[S])||l(I[S])))throw new m(`streams[${S}]`,L[S],"must be writable")}let k,_,N,j,O;function C(S){let q=j;j=null,q?q(S):S?O.destroy(S):!ee&&!Q&&O.destroy()}let x=I[0],W=t(I,C),Q=!!(s(x)||c(x)||l(x)),ee=!!(i(W)||d(W)||l(W));if(O=new a({writableObjectMode:!!(x!=null&&x.writableObjectMode),readableObjectMode:!!(W!=null&&W.writableObjectMode),writable:Q,readable:ee}),Q){if(n(x))O._write=function(q,Z,K){x.write(q,Z)?K():k=K},O._final=function(q){x.end(),_=q},x.on("drain",function(){if(k){let q=k;k=null,q()}});else if(o(x)){let q=(l(x)?x.writable:x).getWriter();O._write=async function(Z,K,ge){try{await q.ready,q.write(Z).catch(()=>{}),ge()}catch(ne){ge(ne)}},O._final=async function(Z){try{await q.ready,q.close().catch(()=>{}),_=Z}catch(K){Z(K)}}}let S=l(W)?W.readable:W;y(S,()=>{if(_){let q=_;_=null,q()}})}if(ee){if(n(W))W.on("readable",function(){if(N){let S=N;N=null,S()}}),W.on("end",function(){O.push(null)}),O._read=function(){for(;;){let S=W.read();if(S===null){N=O._read;return}if(!O.push(S))return}};else if(o(W)){let S=(l(W)?W.readable:W).getReader();O._read=async function(){for(;;)try{let{value:q,done:Z}=await S.read();if(!O.push(q))return;if(Z){O.push(null);return}}catch{return}}}}return O._destroy=function(S,q){!S&&j!==null&&(S=new g),N=null,k=null,_=null,j===null?q(S):(j=q,n(W)&&h(W,S))},O}}),Kl=me((e,r)=>{oe(),ae(),se();var t=globalThis.AbortController||Vn().AbortController,{codes:{ERR_INVALID_ARG_VALUE:a,ERR_INVALID_ARG_TYPE:h,ERR_MISSING_ARGS:n,ERR_OUT_OF_RANGE:i},AbortError:s}=ut(),{validateAbortSignal:o,validateInteger:l,validateObject:c}=Jr(),d=Xe().Symbol("kWeak"),{finished:g}=Vt(),m=Ns(),{addAbortSignalNoValidate:b}=Zr(),{isWritable:y,isNodeStream:I}=Nt(),{ArrayPrototypePush:L,MathFloor:k,Number:_,NumberIsNaN:N,Promise:j,PromiseReject:O,PromisePrototypeThen:C,Symbol:x}=Xe(),W=x("kEmpty"),Q=x("kEof");function ee(he,M){if(M!=null&&c(M,"options"),(M==null?void 0:M.signal)!=null&&o(M.signal,"options.signal"),I(he)&&!y(he))throw new a("stream",he,"must be writable");let E=m(this,he);return M!=null&&M.signal&&b(M.signal,E),E}function S(he,M){if(typeof he!="function")throw new h("fn",["Function","AsyncFunction"],he);M!=null&&c(M,"options"),(M==null?void 0:M.signal)!=null&&o(M.signal,"options.signal");let E=1;return(M==null?void 0:M.concurrency)!=null&&(E=k(M.concurrency)),l(E,"concurrency",1),(async function*(){var V,le;let J=new t,X=this,ue=[],de=J.signal,R={signal:de},F=()=>J.abort();M!=null&&(V=M.signal)!==null&&V!==void 0&&V.aborted&&F(),M==null||(le=M.signal)===null||le===void 0||le.addEventListener("abort",F);let D,te,G=!1;function U(){G=!0}async function z(){try{for await(let Ae of X){var we;if(G)return;if(de.aborted)throw new s;try{Ae=he(Ae,R)}catch(Pe){Ae=O(Pe)}Ae!==W&&(typeof((we=Ae)===null||we===void 0?void 0:we.catch)=="function"&&Ae.catch(U),ue.push(Ae),D&&(D(),D=null),!G&&ue.length&&ue.length>=E&&await new j(Pe=>{te=Pe}))}ue.push(Q)}catch(Ae){let Pe=O(Ae);C(Pe,void 0,U),ue.push(Pe)}finally{var _e;G=!0,D&&(D(),D=null),M==null||(_e=M.signal)===null||_e===void 0||_e.removeEventListener("abort",F)}}z();try{for(;;){for(;ue.length>0;){let we=await ue[0];if(we===Q)return;if(de.aborted)throw new s;we!==W&&(yield we),ue.shift(),te&&(te(),te=null)}await new j(we=>{D=we})}}finally{J.abort(),G=!0,te&&(te(),te=null)}}).call(this)}function q(he=void 0){return he!=null&&c(he,"options"),(he==null?void 0:he.signal)!=null&&o(he.signal,"options.signal"),(async function*(){let M=0;for await(let V of this){var E;if(he!=null&&(E=he.signal)!==null&&E!==void 0&&E.aborted)throw new s({cause:he.signal.reason});yield[M++,V]}}).call(this)}async function Z(he,M=void 0){for await(let E of $.call(this,he,M))return!0;return!1}async function K(he,M=void 0){if(typeof he!="function")throw new h("fn",["Function","AsyncFunction"],he);return!await Z.call(this,async(...E)=>!await he(...E),M)}async function ge(he,M){for await(let E of $.call(this,he,M))return E}async function ne(he,M){if(typeof he!="function")throw new h("fn",["Function","AsyncFunction"],he);async function E(V,le){return await he(V,le),W}for await(let V of S.call(this,E,M));}function $(he,M){if(typeof he!="function")throw new h("fn",["Function","AsyncFunction"],he);async function E(V,le){return await he(V,le)?V:W}return S.call(this,E,M)}var be=class extends n{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function re(he,M,E){var V;if(typeof he!="function")throw new h("reducer",["Function","AsyncFunction"],he);E!=null&&c(E,"options"),(E==null?void 0:E.signal)!=null&&o(E.signal,"options.signal");let le=arguments.length>1;if(E!=null&&(V=E.signal)!==null&&V!==void 0&&V.aborted){let R=new s(void 0,{cause:E.signal.reason});throw this.once("error",()=>{}),await g(this.destroy(R)),R}let J=new t,X=J.signal;if(E!=null&&E.signal){let R={once:!0,[d]:this};E.signal.addEventListener("abort",()=>J.abort(),R)}let ue=!1;try{for await(let R of this){var de;if(ue=!0,E!=null&&(de=E.signal)!==null&&de!==void 0&&de.aborted)throw new s;le?M=await he(M,R,{signal:X}):(M=R,le=!0)}if(!ue&&!le)throw new be}finally{J.abort()}return M}async function ve(he){he!=null&&c(he,"options"),(he==null?void 0:he.signal)!=null&&o(he.signal,"options.signal");let M=[];for await(let V of this){var E;if(he!=null&&(E=he.signal)!==null&&E!==void 0&&E.aborted)throw new s(void 0,{cause:he.signal.reason});L(M,V)}return M}function A(he,M){let E=S.call(this,he,M);return(async function*(){for await(let V of E)yield*V}).call(this)}function Y(he){if(he=_(he),N(he))return 0;if(he<0)throw new i("number",">= 0",he);return he}function ce(he,M=void 0){return M!=null&&c(M,"options"),(M==null?void 0:M.signal)!=null&&o(M.signal,"options.signal"),he=Y(he),(async function*(){var E;if(M!=null&&(E=M.signal)!==null&&E!==void 0&&E.aborted)throw new s;for await(let le of this){var V;if(M!=null&&(V=M.signal)!==null&&V!==void 0&&V.aborted)throw new s;he--<=0&&(yield le)}}).call(this)}function Ee(he,M=void 0){return M!=null&&c(M,"options"),(M==null?void 0:M.signal)!=null&&o(M.signal,"options.signal"),he=Y(he),(async function*(){var E;if(M!=null&&(E=M.signal)!==null&&E!==void 0&&E.aborted)throw new s;for await(let le of this){var V;if(M!=null&&(V=M.signal)!==null&&V!==void 0&&V.aborted)throw new s;if(he-- >0)yield le;else return}}).call(this)}r.exports.streamReturningOperators={asIndexedPairs:q,drop:ce,filter:$,flatMap:A,map:S,take:Ee,compose:ee},r.exports.promiseReturningOperators={every:K,forEach:ne,reduce:re,toArray:ve,some:Z,find:ge}}),js=me((e,r)=>{oe(),ae(),se();var{ArrayPrototypePop:t,Promise:a}=Xe(),{isIterable:h,isNodeStream:n,isWebStream:i}=Nt(),{pipelineImpl:s}=Xn(),{finished:o}=Vt();Ds();function l(...c){return new a((d,g)=>{let m,b,y=c[c.length-1];if(y&&typeof y=="object"&&!n(y)&&!h(y)&&!i(y)){let I=t(c);m=I.signal,b=I.end}s(c,(I,L)=>{I?g(I):d(L)},{signal:m,end:b})})}r.exports={finished:o,pipeline:l}}),Ds=me((e,r)=>{oe(),ae(),se();var{Buffer:t}=(it(),Ue(rt)),{ObjectDefineProperty:a,ObjectKeys:h,ReflectApply:n}=Xe(),{promisify:{custom:i}}=xt(),{streamReturningOperators:s,promiseReturningOperators:o}=Kl(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:l}}=ut(),c=Ns(),{pipeline:d}=Xn(),{destroyer:g}=br(),m=Vt(),b=js(),y=Nt(),I=r.exports=Kn().Stream;I.isDisturbed=y.isDisturbed,I.isErrored=y.isErrored,I.isReadable=y.isReadable,I.Readable=ti();for(let k of h(s)){let _=function(...j){if(new.target)throw l();return I.Readable.from(n(N,this,j))},N=s[k];a(_,"name",{__proto__:null,value:N.name}),a(_,"length",{__proto__:null,value:N.length}),a(I.Readable.prototype,k,{__proto__:null,value:_,enumerable:!1,configurable:!0,writable:!0})}for(let k of h(o)){let _=function(...j){if(new.target)throw l();return n(N,this,j)},N=o[k];a(_,"name",{__proto__:null,value:N.name}),a(_,"length",{__proto__:null,value:N.length}),a(I.Readable.prototype,k,{__proto__:null,value:_,enumerable:!1,configurable:!0,writable:!0})}I.Writable=xs(),I.Duplex=Lt(),I.Transform=Ls(),I.PassThrough=Us(),I.pipeline=d;var{addAbortSignal:L}=Zr();I.addAbortSignal=L,I.finished=m,I.destroy=g,I.compose=c,a(I,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return b}}),a(d,i,{__proto__:null,enumerable:!0,get(){return b.pipeline}}),a(m,i,{__proto__:null,enumerable:!0,get(){return b.finished}}),I.Stream=I,I._isUint8Array=function(k){return k instanceof Uint8Array},I._uint8ArrayToBuffer=function(k){return t.from(k.buffer,k.byteOffset,k.byteLength)}}),cr=me((e,r)=>{oe(),ae(),se();var t=Ds(),a=js(),h=t.Readable.destroy;r.exports=t.Readable,r.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,r.exports._isUint8Array=t._isUint8Array,r.exports.isDisturbed=t.isDisturbed,r.exports.isErrored=t.isErrored,r.exports.isReadable=t.isReadable,r.exports.Readable=t.Readable,r.exports.Writable=t.Writable,r.exports.Duplex=t.Duplex,r.exports.Transform=t.Transform,r.exports.PassThrough=t.PassThrough,r.exports.addAbortSignal=t.addAbortSignal,r.exports.finished=t.finished,r.exports.destroy=t.destroy,r.exports.destroy=h,r.exports.pipeline=t.pipeline,r.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return a}}),r.exports.Stream=t.Stream,r.exports.default=r.exports}),Yl=me((e,r)=>{oe(),ae(),se(),typeof Object.create=="function"?r.exports=function(t,a){a&&(t.super_=a,t.prototype=Object.create(a.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:r.exports=function(t,a){if(a){t.super_=a;var h=function(){};h.prototype=a.prototype,t.prototype=new h,t.prototype.constructor=t}}}),Gl=me((e,r)=>{oe(),ae(),se();var{Buffer:t}=(it(),Ue(rt)),a=Symbol.for("BufferList");function h(n){if(!(this instanceof h))return new h(n);h._init.call(this,n)}h._init=function(n){Object.defineProperty(this,a,{value:!0}),this._bufs=[],this.length=0,n&&this.append(n)},h.prototype._new=function(n){return new h(n)},h.prototype._offset=function(n){if(n===0)return[0,0];let i=0;for(let s=0;s<this._bufs.length;s++){let o=i+this._bufs[s].length;if(n<o||s===this._bufs.length-1)return[s,n-i];i=o}},h.prototype._reverseOffset=function(n){let i=n[0],s=n[1];for(let o=0;o<i;o++)s+=this._bufs[o].length;return s},h.prototype.get=function(n){if(n>this.length||n<0)return;let i=this._offset(n);return this._bufs[i[0]][i[1]]},h.prototype.slice=function(n,i){return typeof n=="number"&&n<0&&(n+=this.length),typeof i=="number"&&i<0&&(i+=this.length),this.copy(null,0,n,i)},h.prototype.copy=function(n,i,s,o){if((typeof s!="number"||s<0)&&(s=0),(typeof o!="number"||o>this.length)&&(o=this.length),s>=this.length||o<=0)return n||t.alloc(0);let l=!!n,c=this._offset(s),d=o-s,g=d,m=l&&i||0,b=c[1];if(s===0&&o===this.length){if(!l)return this._bufs.length===1?this._bufs[0]:t.concat(this._bufs,this.length);for(let y=0;y<this._bufs.length;y++)this._bufs[y].copy(n,m),m+=this._bufs[y].length;return n}if(g<=this._bufs[c[0]].length-b)return l?this._bufs[c[0]].copy(n,i,b,b+g):this._bufs[c[0]].slice(b,b+g);l||(n=t.allocUnsafe(d));for(let y=c[0];y<this._bufs.length;y++){let I=this._bufs[y].length-b;if(g>I)this._bufs[y].copy(n,m,b),m+=I;else{this._bufs[y].copy(n,m,b,b+g),m+=I;break}g-=I,b&&(b=0)}return n.length>m?n.slice(0,m):n},h.prototype.shallowSlice=function(n,i){if(n=n||0,i=typeof i!="number"?this.length:i,n<0&&(n+=this.length),i<0&&(i+=this.length),n===i)return this._new();let s=this._offset(n),o=this._offset(i),l=this._bufs.slice(s[0],o[0]+1);return o[1]===0?l.pop():l[l.length-1]=l[l.length-1].slice(0,o[1]),s[1]!==0&&(l[0]=l[0].slice(s[1])),this._new(l)},h.prototype.toString=function(n,i,s){return this.slice(i,s).toString(n)},h.prototype.consume=function(n){if(n=Math.trunc(n),Number.isNaN(n)||n<=0)return this;for(;this._bufs.length;)if(n>=this._bufs[0].length)n-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(n),this.length-=n;break}return this},h.prototype.duplicate=function(){let n=this._new();for(let i=0;i<this._bufs.length;i++)n.append(this._bufs[i]);return n},h.prototype.append=function(n){if(n==null)return this;if(n.buffer)this._appendBuffer(t.from(n.buffer,n.byteOffset,n.byteLength));else if(Array.isArray(n))for(let i=0;i<n.length;i++)this.append(n[i]);else if(this._isBufferList(n))for(let i=0;i<n._bufs.length;i++)this.append(n._bufs[i]);else typeof n=="number"&&(n=n.toString()),this._appendBuffer(t.from(n));return this},h.prototype._appendBuffer=function(n){this._bufs.push(n),this.length+=n.length},h.prototype.indexOf=function(n,i,s){if(s===void 0&&typeof i=="string"&&(s=i,i=void 0),typeof n=="function"||Array.isArray(n))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof n=="number"?n=t.from([n]):typeof n=="string"?n=t.from(n,s):this._isBufferList(n)?n=n.slice():Array.isArray(n.buffer)?n=t.from(n.buffer,n.byteOffset,n.byteLength):t.isBuffer(n)||(n=t.from(n)),i=Number(i||0),isNaN(i)&&(i=0),i<0&&(i=this.length+i),i<0&&(i=0),n.length===0)return i>this.length?this.length:i;let o=this._offset(i),l=o[0],c=o[1];for(;l<this._bufs.length;l++){let d=this._bufs[l];for(;c<d.length;)if(d.length-c>=n.length){let g=d.indexOf(n,c);if(g!==-1)return this._reverseOffset([l,g]);c=d.length-n.length+1}else{let g=this._reverseOffset([l,c]);if(this._match(g,n))return g;c++}c=0}return-1},h.prototype._match=function(n,i){if(this.length-n<i.length)return!1;for(let s=0;s<i.length;s++)if(this.get(n+s)!==i[s])return!1;return!0},function(){let n={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readBigInt64BE:8,readBigInt64LE:8,readBigUInt64BE:8,readBigUInt64LE:8,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let i in n)(function(s){n[s]===null?h.prototype[s]=function(o,l){return this.slice(o,o+l)[s](0,l)}:h.prototype[s]=function(o=0){return this.slice(o,o+n[s])[s](0)}})(i)}(),h.prototype._isBufferList=function(n){return n instanceof h||h.isBufferList(n)},h.isBufferList=function(n){return n!=null&&n[a]},r.exports=h}),Ql=me((e,r)=>{oe(),ae(),se();var t=cr().Duplex,a=Yl(),h=Gl();function n(i){if(!(this instanceof n))return new n(i);if(typeof i=="function"){this._callback=i;let s=(function(o){this._callback&&(this._callback(o),this._callback=null)}).bind(this);this.on("pipe",function(o){o.on("error",s)}),this.on("unpipe",function(o){o.removeListener("error",s)}),i=null}h._init.call(this,i),t.call(this)}a(n,t),Object.assign(n.prototype,h.prototype),n.prototype._new=function(i){return new n(i)},n.prototype._write=function(i,s,o){this._appendBuffer(i),typeof o=="function"&&o()},n.prototype._read=function(i){if(!this.length)return this.push(null);i=Math.min(i,this.length),this.push(this.slice(0,i)),this.consume(i)},n.prototype.end=function(i){t.prototype.end.call(this,i),this._callback&&(this._callback(null,this.slice()),this._callback=null)},n.prototype._destroy=function(i,s){this._bufs.length=0,this.length=0,s(i)},n.prototype._isBufferList=function(i){return i instanceof n||i instanceof h||n.isBufferList(i)},n.isBufferList=h.isBufferList,r.exports=n,r.exports.BufferListStream=n,r.exports.BufferList=h}),Xl=me((e,r)=>{oe(),ae(),se();var t=class{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}};r.exports=t}),Fs=me((e,r)=>{oe(),ae(),se();var t=r.exports,{Buffer:a}=(it(),Ue(rt));t.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},t.requiredHeaderFlags={1:0,2:0,4:0,5:0,6:2,7:0,8:2,9:0,10:2,11:0,12:0,13:0,14:0,15:0},t.requiredHeaderFlagsErrors={};for(let n in t.requiredHeaderFlags){let i=t.requiredHeaderFlags[n];t.requiredHeaderFlagsErrors[n]="Invalid header flag bits, must be 0x"+i.toString(16)+" for "+t.types[n]+" packet"}t.codes={};for(let n in t.types){let i=t.types[n];t.codes[i]=n}t.CMD_SHIFT=4,t.CMD_MASK=240,t.DUP_MASK=8,t.QOS_MASK=3,t.QOS_SHIFT=1,t.RETAIN_MASK=1,t.VARBYTEINT_MASK=127,t.VARBYTEINT_FIN_MASK=128,t.VARBYTEINT_MAX=268435455,t.SESSIONPRESENT_MASK=1,t.SESSIONPRESENT_HEADER=a.from([t.SESSIONPRESENT_MASK]),t.CONNACK_HEADER=a.from([t.codes.connack<<t.CMD_SHIFT]),t.USERNAME_MASK=128,t.PASSWORD_MASK=64,t.WILL_RETAIN_MASK=32,t.WILL_QOS_MASK=24,t.WILL_QOS_SHIFT=3,t.WILL_FLAG_MASK=4,t.CLEAN_SESSION_MASK=2,t.CONNECT_HEADER=a.from([t.codes.connect<<t.CMD_SHIFT]),t.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},t.propertiesCodes={};for(let n in t.properties){let i=t.properties[n];t.propertiesCodes[i]=n}t.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"};function h(n){return[0,1,2].map(i=>[0,1].map(s=>[0,1].map(o=>{let l=a.alloc(1);return l.writeUInt8(t.codes[n]<<t.CMD_SHIFT|(s?t.DUP_MASK:0)|i<<t.QOS_SHIFT|o,0,!0),l})))}t.PUBLISH_HEADER=h("publish"),t.SUBSCRIBE_HEADER=h("subscribe"),t.SUBSCRIBE_OPTIONS_QOS_MASK=3,t.SUBSCRIBE_OPTIONS_NL_MASK=1,t.SUBSCRIBE_OPTIONS_NL_SHIFT=2,t.SUBSCRIBE_OPTIONS_RAP_MASK=1,t.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,t.SUBSCRIBE_OPTIONS_RH_MASK=3,t.SUBSCRIBE_OPTIONS_RH_SHIFT=4,t.SUBSCRIBE_OPTIONS_RH=[0,16,32],t.SUBSCRIBE_OPTIONS_NL=4,t.SUBSCRIBE_OPTIONS_RAP=8,t.SUBSCRIBE_OPTIONS_QOS=[0,1,2],t.UNSUBSCRIBE_HEADER=h("unsubscribe"),t.ACKS={unsuback:h("unsuback"),puback:h("puback"),pubcomp:h("pubcomp"),pubrel:h("pubrel"),pubrec:h("pubrec")},t.SUBACK_HEADER=a.from([t.codes.suback<<t.CMD_SHIFT]),t.VERSION3=a.from([3]),t.VERSION4=a.from([4]),t.VERSION5=a.from([5]),t.VERSION131=a.from([131]),t.VERSION132=a.from([132]),t.QOS=[0,1,2].map(n=>a.from([n])),t.EMPTY={pingreq:a.from([t.codes.pingreq<<4,0]),pingresp:a.from([t.codes.pingresp<<4,0]),disconnect:a.from([t.codes.disconnect<<4,0])},t.MQTT5_PUBACK_PUBREC_CODES={0:"Success",16:"No matching subscribers",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",144:"Topic Name invalid",145:"Packet identifier in use",151:"Quota exceeded",153:"Payload format invalid"},t.MQTT5_PUBREL_PUBCOMP_CODES={0:"Success",146:"Packet Identifier not found"},t.MQTT5_SUBACK_CODES={0:"Granted QoS 0",1:"Granted QoS 1",2:"Granted QoS 2",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use",151:"Quota exceeded",158:"Shared Subscriptions not supported",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},t.MQTT5_UNSUBACK_CODES={0:"Success",17:"No subscription existed",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use"},t.MQTT5_DISCONNECT_CODES={0:"Normal disconnection",4:"Disconnect with Will Message",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",135:"Not authorized",137:"Server busy",139:"Server shutting down",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},t.MQTT5_AUTH_CODES={0:"Success",24:"Continue authentication",25:"Re-authenticate"}}),Jl=me((e,r)=>{oe(),ae(),se();var t=1e3,a=t*60,h=a*60,n=h*24,i=n*7,s=n*365.25;r.exports=function(g,m){m=m||{};var b=typeof g;if(b==="string"&&g.length>0)return o(g);if(b==="number"&&isFinite(g))return m.long?c(g):l(g);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(g))};function o(g){if(g=String(g),!(g.length>100)){var m=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(g);if(m){var b=parseFloat(m[1]),y=(m[2]||"ms").toLowerCase();switch(y){case"years":case"year":case"yrs":case"yr":case"y":return b*s;case"weeks":case"week":case"w":return b*i;case"days":case"day":case"d":return b*n;case"hours":case"hour":case"hrs":case"hr":case"h":return b*h;case"minutes":case"minute":case"mins":case"min":case"m":return b*a;case"seconds":case"second":case"secs":case"sec":case"s":return b*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return b;default:return}}}}function l(g){var m=Math.abs(g);return m>=n?Math.round(g/n)+"d":m>=h?Math.round(g/h)+"h":m>=a?Math.round(g/a)+"m":m>=t?Math.round(g/t)+"s":g+"ms"}function c(g){var m=Math.abs(g);return m>=n?d(g,m,n,"day"):m>=h?d(g,m,h,"hour"):m>=a?d(g,m,a,"minute"):m>=t?d(g,m,t,"second"):g+" ms"}function d(g,m,b,y){var I=m>=b*1.5;return Math.round(g/b)+" "+y+(I?"s":"")}}),Zl=me((e,r)=>{oe(),ae(),se();function t(a){n.debug=n,n.default=n,n.coerce=d,n.disable=o,n.enable=s,n.enabled=l,n.humanize=Jl(),n.destroy=g,Object.keys(a).forEach(m=>{n[m]=a[m]}),n.names=[],n.skips=[],n.formatters={};function h(m){let b=0;for(let y=0;y<m.length;y++)b=(b<<5)-b+m.charCodeAt(y),b|=0;return n.colors[Math.abs(b)%n.colors.length]}n.selectColor=h;function n(m){let b,y=null,I,L;function k(..._){if(!k.enabled)return;let N=k,j=Number(new Date),O=j-(b||j);N.diff=O,N.prev=b,N.curr=j,b=j,_[0]=n.coerce(_[0]),typeof _[0]!="string"&&_.unshift("%O");let C=0;_[0]=_[0].replace(/%([a-zA-Z%])/g,(x,W)=>{if(x==="%%")return"%";C++;let Q=n.formatters[W];if(typeof Q=="function"){let ee=_[C];x=Q.call(N,ee),_.splice(C,1),C--}return x}),n.formatArgs.call(N,_),(N.log||n.log).apply(N,_)}return k.namespace=m,k.useColors=n.useColors(),k.color=n.selectColor(m),k.extend=i,k.destroy=n.destroy,Object.defineProperty(k,"enabled",{enumerable:!0,configurable:!1,get:()=>y!==null?y:(I!==n.namespaces&&(I=n.namespaces,L=n.enabled(m)),L),set:_=>{y=_}}),typeof n.init=="function"&&n.init(k),k}function i(m,b){let y=n(this.namespace+(typeof b>"u"?":":b)+m);return y.log=this.log,y}function s(m){n.save(m),n.namespaces=m,n.names=[],n.skips=[];let b,y=(typeof m=="string"?m:"").split(/[\s,]+/),I=y.length;for(b=0;b<I;b++)y[b]&&(m=y[b].replace(/\*/g,".*?"),m[0]==="-"?n.skips.push(new RegExp("^"+m.slice(1)+"$")):n.names.push(new RegExp("^"+m+"$")))}function o(){let m=[...n.names.map(c),...n.skips.map(c).map(b=>"-"+b)].join(",");return n.enable(""),m}function l(m){if(m[m.length-1]==="*")return!0;let b,y;for(b=0,y=n.skips.length;b<y;b++)if(n.skips[b].test(m))return!1;for(b=0,y=n.names.length;b<y;b++)if(n.names[b].test(m))return!0;return!1}function c(m){return m.toString().substring(2,m.toString().length-2).replace(/\.\*\?$/,"*")}function d(m){return m instanceof Error?m.stack||m.message:m}function g(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}r.exports=t}),Ut=me((e,r)=>{oe(),ae(),se(),e.formatArgs=a,e.save=h,e.load=n,e.useColors=t,e.storage=i(),e.destroy=(()=>{let o=!1;return()=>{o||(o=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function t(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function a(o){if(o[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+o[0]+(this.useColors?"%c ":" ")+"+"+r.exports.humanize(this.diff),!this.useColors)return;let l="color: "+this.color;o.splice(1,0,l,"color: inherit");let c=0,d=0;o[0].replace(/%[a-zA-Z%]/g,g=>{g!=="%%"&&(c++,g==="%c"&&(d=c))}),o.splice(d,0,l)}e.log=console.debug||console.log||(()=>{});function h(o){try{o?e.storage.setItem("debug",o):e.storage.removeItem("debug")}catch{}}function n(){let o;try{o=e.storage.getItem("debug")}catch{}return!o&&typeof Be<"u"&&"env"in Be&&(o=Be.env.DEBUG),o}function i(){try{return localStorage}catch{}}r.exports=Zl()(e);var{formatters:s}=r.exports;s.j=function(o){try{return JSON.stringify(o)}catch(l){return"[UnexpectedJSONParseError]: "+l.message}}}),eh=me((e,r)=>{oe(),ae(),se();var t=Ql(),{EventEmitter:a}=(yr(),Ue(ur)),h=Xl(),n=Fs(),i=Ut()("mqtt-packet:parser"),s=class On extends a{constructor(){super(),this.parser=this.constructor.parser}static parser(l){return this instanceof On?(this.settings=l||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):new On().parser(l)}_resetState(){i("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new h,this.error=null,this._list=t(),this._stateCounter=0}parse(l){for(this.error&&this._resetState(),this._list.append(l),i("parse: current state: %s",this._states[this._stateCounter]);(this.packet.length!==-1||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,i("parse: state complete. _stateCounter is now: %d",this._stateCounter),i("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return i("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){let l=this._list.readUInt8(0),c=l>>n.CMD_SHIFT;this.packet.cmd=n.types[c];let d=l&15,g=n.requiredHeaderFlags[c];return g!=null&&d!==g?this._emitError(new Error(n.requiredHeaderFlagsErrors[c])):(this.packet.retain=(l&n.RETAIN_MASK)!==0,this.packet.qos=l>>n.QOS_SHIFT&n.QOS_MASK,this.packet.qos>2?this._emitError(new Error("Packet must not have both QoS bits set to 1")):(this.packet.dup=(l&n.DUP_MASK)!==0,i("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0))}_parseLength(){let l=this._parseVarByteNum(!0);return l&&(this.packet.length=l.value,this._list.consume(l.bytes)),i("_parseLength %d",l.value),!!l}_parsePayload(){i("_parsePayload: payload %O",this._list);let l=!1;if(this.packet.length===0||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}l=!0}return i("_parsePayload complete result: %s",l),l}_parseConnect(){i("_parseConnect");let l,c,d,g,m={},b=this.packet,y=this._parseString();if(y===null)return this._emitError(new Error("Cannot parse protocolId"));if(y!=="MQTT"&&y!=="MQIsdp")return this._emitError(new Error("Invalid protocolId"));if(b.protocolId=y,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(b.protocolVersion=this._list.readUInt8(this._pos),b.protocolVersion>=128&&(b.bridgeMode=!0,b.protocolVersion=b.protocolVersion-128),b.protocolVersion!==3&&b.protocolVersion!==4&&b.protocolVersion!==5)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(this._list.readUInt8(this._pos)&1)return this._emitError(new Error("Connect flag bit 0 must be 0, but got 1"));m.username=this._list.readUInt8(this._pos)&n.USERNAME_MASK,m.password=this._list.readUInt8(this._pos)&n.PASSWORD_MASK,m.will=this._list.readUInt8(this._pos)&n.WILL_FLAG_MASK;let I=!!(this._list.readUInt8(this._pos)&n.WILL_RETAIN_MASK),L=(this._list.readUInt8(this._pos)&n.WILL_QOS_MASK)>>n.WILL_QOS_SHIFT;if(m.will)b.will={},b.will.retain=I,b.will.qos=L;else{if(I)return this._emitError(new Error("Will Retain Flag must be set to zero when Will Flag is set to 0"));if(L)return this._emitError(new Error("Will QoS must be set to zero when Will Flag is set to 0"))}if(b.clean=(this._list.readUInt8(this._pos)&n.CLEAN_SESSION_MASK)!==0,this._pos++,b.keepalive=this._parseNum(),b.keepalive===-1)return this._emitError(new Error("Packet too short"));if(b.protocolVersion===5){let _=this._parseProperties();Object.getOwnPropertyNames(_).length&&(b.properties=_)}let k=this._parseString();if(k===null)return this._emitError(new Error("Packet too short"));if(b.clientId=k,i("_parseConnect: packet.clientId: %s",b.clientId),m.will){if(b.protocolVersion===5){let _=this._parseProperties();Object.getOwnPropertyNames(_).length&&(b.will.properties=_)}if(l=this._parseString(),l===null)return this._emitError(new Error("Cannot parse will topic"));if(b.will.topic=l,i("_parseConnect: packet.will.topic: %s",b.will.topic),c=this._parseBuffer(),c===null)return this._emitError(new Error("Cannot parse will payload"));b.will.payload=c,i("_parseConnect: packet.will.paylaod: %s",b.will.payload)}if(m.username){if(g=this._parseString(),g===null)return this._emitError(new Error("Cannot parse username"));b.username=g,i("_parseConnect: packet.username: %s",b.username)}if(m.password){if(d=this._parseBuffer(),d===null)return this._emitError(new Error("Cannot parse password"));b.password=d}return this.settings=b,i("_parseConnect: complete"),b}_parseConnack(){i("_parseConnack");let l=this.packet;if(this._list.length<1)return null;let c=this._list.readUInt8(this._pos++);if(c>1)return this._emitError(new Error("Invalid connack flags, bits 7-1 must be set to 0"));if(l.sessionPresent=!!(c&n.SESSIONPRESENT_MASK),this.settings.protocolVersion===5)this._list.length>=2?l.reasonCode=this._list.readUInt8(this._pos++):l.reasonCode=0;else{if(this._list.length<2)return null;l.returnCode=this._list.readUInt8(this._pos++)}if(l.returnCode===-1||l.reasonCode===-1)return this._emitError(new Error("Cannot parse return code"));if(this.settings.protocolVersion===5){let d=this._parseProperties();Object.getOwnPropertyNames(d).length&&(l.properties=d)}i("_parseConnack: complete")}_parsePublish(){i("_parsePublish");let l=this.packet;if(l.topic=this._parseString(),l.topic===null)return this._emitError(new Error("Cannot parse topic"));if(!(l.qos>0&&!this._parseMessageId())){if(this.settings.protocolVersion===5){let c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(l.properties=c)}l.payload=this._list.slice(this._pos,l.length),i("_parsePublish: payload from buffer list: %o",l.payload)}}_parseSubscribe(){i("_parseSubscribe");let l=this.packet,c,d,g,m,b,y,I;if(l.subscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let L=this._parseProperties();Object.getOwnPropertyNames(L).length&&(l.properties=L)}if(l.length<=0)return this._emitError(new Error("Malformed subscribe, no payload specified"));for(;this._pos<l.length;){if(c=this._parseString(),c===null)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=l.length)return this._emitError(new Error("Malformed Subscribe Payload"));if(d=this._parseByte(),this.settings.protocolVersion===5){if(d&192)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-6 must be 0"))}else if(d&252)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-2 must be 0"));if(g=d&n.SUBSCRIBE_OPTIONS_QOS_MASK,g>2)return this._emitError(new Error("Invalid subscribe QoS, must be <= 2"));if(y=(d>>n.SUBSCRIBE_OPTIONS_NL_SHIFT&n.SUBSCRIBE_OPTIONS_NL_MASK)!==0,b=(d>>n.SUBSCRIBE_OPTIONS_RAP_SHIFT&n.SUBSCRIBE_OPTIONS_RAP_MASK)!==0,m=d>>n.SUBSCRIBE_OPTIONS_RH_SHIFT&n.SUBSCRIBE_OPTIONS_RH_MASK,m>2)return this._emitError(new Error("Invalid retain handling, must be <= 2"));I={topic:c,qos:g},this.settings.protocolVersion===5?(I.nl=y,I.rap=b,I.rh=m):this.settings.bridgeMode&&(I.rh=0,I.rap=!0,I.nl=!0),i("_parseSubscribe: push subscription `%s` to subscription",I),l.subscriptions.push(I)}}}_parseSuback(){i("_parseSuback");let l=this.packet;if(this.packet.granted=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(l.properties=c)}if(l.length<=0)return this._emitError(new Error("Malformed suback, no payload specified"));for(;this._pos<this.packet.length;){let c=this._list.readUInt8(this._pos++);if(this.settings.protocolVersion===5){if(!n.MQTT5_SUBACK_CODES[c])return this._emitError(new Error("Invalid suback code"))}else if(c>2&&c!==128)return this._emitError(new Error("Invalid suback QoS, must be 0, 1, 2 or 128"));this.packet.granted.push(c)}}}_parseUnsubscribe(){i("_parseUnsubscribe");let l=this.packet;if(l.unsubscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(l.properties=c)}if(l.length<=0)return this._emitError(new Error("Malformed unsubscribe, no payload specified"));for(;this._pos<l.length;){let c=this._parseString();if(c===null)return this._emitError(new Error("Cannot parse topic"));i("_parseUnsubscribe: push topic `%s` to unsubscriptions",c),l.unsubscriptions.push(c)}}}_parseUnsuback(){i("_parseUnsuback");let l=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if((this.settings.protocolVersion===3||this.settings.protocolVersion===4)&&l.length!==2)return this._emitError(new Error("Malformed unsuback, payload length must be 2"));if(l.length<=0)return this._emitError(new Error("Malformed unsuback, no payload specified"));if(this.settings.protocolVersion===5){let c=this._parseProperties();for(Object.getOwnPropertyNames(c).length&&(l.properties=c),l.granted=[];this._pos<this.packet.length;){let d=this._list.readUInt8(this._pos++);if(!n.MQTT5_UNSUBACK_CODES[d])return this._emitError(new Error("Invalid unsuback code"));this.packet.granted.push(d)}}}_parseConfirmation(){i("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);let l=this.packet;if(this._parseMessageId(),this.settings.protocolVersion===5){if(l.length>2){switch(l.reasonCode=this._parseByte(),this.packet.cmd){case"puback":case"pubrec":if(!n.MQTT5_PUBACK_PUBREC_CODES[l.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break;case"pubrel":case"pubcomp":if(!n.MQTT5_PUBREL_PUBCOMP_CODES[l.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break}i("_parseConfirmation: packet.reasonCode `%d`",l.reasonCode)}else l.reasonCode=0;if(l.length>3){let c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(l.properties=c)}}return!0}_parseDisconnect(){let l=this.packet;if(i("_parseDisconnect"),this.settings.protocolVersion===5){this._list.length>0?(l.reasonCode=this._parseByte(),n.MQTT5_DISCONNECT_CODES[l.reasonCode]||this._emitError(new Error("Invalid disconnect reason code"))):l.reasonCode=0;let c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(l.properties=c)}return i("_parseDisconnect result: true"),!0}_parseAuth(){i("_parseAuth");let l=this.packet;if(this.settings.protocolVersion!==5)return this._emitError(new Error("Not supported auth packet for this version MQTT"));if(l.reasonCode=this._parseByte(),!n.MQTT5_AUTH_CODES[l.reasonCode])return this._emitError(new Error("Invalid auth reason code"));let c=this._parseProperties();return Object.getOwnPropertyNames(c).length&&(l.properties=c),i("_parseAuth: result: true"),!0}_parseMessageId(){let l=this.packet;return l.messageId=this._parseNum(),l.messageId===null?(this._emitError(new Error("Cannot parse messageId")),!1):(i("_parseMessageId: packet.messageId %d",l.messageId),!0)}_parseString(l){let c=this._parseNum(),d=c+this._pos;if(c===-1||d>this._list.length||d>this.packet.length)return null;let g=this._list.toString("utf8",this._pos,d);return this._pos+=c,i("_parseString: result: %s",g),g}_parseStringPair(){return i("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){let l=this._parseNum(),c=l+this._pos;if(l===-1||c>this._list.length||c>this.packet.length)return null;let d=this._list.slice(this._pos,c);return this._pos+=l,i("_parseBuffer: result: %o",d),d}_parseNum(){if(this._list.length-this._pos<2)return-1;let l=this._list.readUInt16BE(this._pos);return this._pos+=2,i("_parseNum: result: %s",l),l}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;let l=this._list.readUInt32BE(this._pos);return this._pos+=4,i("_parse4ByteNum: result: %s",l),l}_parseVarByteNum(l){i("_parseVarByteNum");let c=4,d=0,g=1,m=0,b=!1,y,I=this._pos?this._pos:0;for(;d<c&&I+d<this._list.length;){if(y=this._list.readUInt8(I+d++),m+=g*(y&n.VARBYTEINT_MASK),g*=128,!(y&n.VARBYTEINT_FIN_MASK)){b=!0;break}if(this._list.length<=d)break}return!b&&d===c&&this._list.length>=d&&this._emitError(new Error("Invalid variable byte integer")),I&&(this._pos+=d),b?l?b={bytes:d,value:m}:b=m:b=!1,i("_parseVarByteNum: result: %o",b),b}_parseByte(){let l;return this._pos<this._list.length&&(l=this._list.readUInt8(this._pos),this._pos++),i("_parseByte: result: %o",l),l}_parseByType(l){switch(i("_parseByType: type: %s",l),l){case"byte":return this._parseByte()!==0;case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){i("_parseProperties");let l=this._parseVarByteNum(),c=this._pos+l,d={};for(;this._pos<c;){let g=this._parseByte();if(!g)return this._emitError(new Error("Cannot parse property code type")),!1;let m=n.propertiesCodes[g];if(!m)return this._emitError(new Error("Unknown property")),!1;if(m==="userProperties"){d[m]||(d[m]=Object.create(null));let b=this._parseByType(n.propertiesTypes[m]);if(d[m][b.name])if(Array.isArray(d[m][b.name]))d[m][b.name].push(b.value);else{let y=d[m][b.name];d[m][b.name]=[y],d[m][b.name].push(b.value)}else d[m][b.name]=b.value;continue}d[m]?Array.isArray(d[m])?d[m].push(this._parseByType(n.propertiesTypes[m])):(d[m]=[d[m]],d[m].push(this._parseByType(n.propertiesTypes[m]))):d[m]=this._parseByType(n.propertiesTypes[m])}return d}_newPacket(){return i("_newPacket"),this.packet&&(this._list.consume(this.packet.length),i("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),i("_newPacket: new packet"),this.packet=new h,this._pos=0,!0}_emitError(l){i("_emitError",l),this.error=l,this.emit("error",l)}};r.exports=s}),th=me((e,r)=>{oe(),ae(),se();var{Buffer:t}=(it(),Ue(rt)),a=65536,h={},n=t.isBuffer(t.from([1,2]).subarray(0,1));function i(c){let d=t.allocUnsafe(2);return d.writeUInt8(c>>8,0),d.writeUInt8(c&255,1),d}function s(){for(let c=0;c<a;c++)h[c]=i(c)}function o(c){let d=0,g=0,m=t.allocUnsafe(4);do d=c%128|0,c=c/128|0,c>0&&(d=d|128),m.writeUInt8(d,g++);while(c>0&&g<4);return c>0&&(g=0),n?m.subarray(0,g):m.slice(0,g)}function l(c){let d=t.allocUnsafe(4);return d.writeUInt32BE(c,0),d}r.exports={cache:h,generateCache:s,generateNumber:i,genBufVariableByteInt:o,generate4ByteBuffer:l}}),rh=me((e,r)=>{oe(),ae(),se(),typeof Be>"u"||!Be.version||Be.version.indexOf("v0.")===0||Be.version.indexOf("v1.")===0&&Be.version.indexOf("v1.8.")!==0?r.exports={nextTick:t}:r.exports=Be;function t(a,h,n,i){if(typeof a!="function")throw new TypeError('"callback" argument must be a function');var s=arguments.length,o,l;switch(s){case 0:case 1:return Be.nextTick(a);case 2:return Be.nextTick(function(){a.call(null,h)});case 3:return Be.nextTick(function(){a.call(null,h,n)});case 4:return Be.nextTick(function(){a.call(null,h,n,i)});default:for(o=new Array(s-1),l=0;l<o.length;)o[l++]=arguments[l];return Be.nextTick(function(){a.apply(null,o)})}}}),Ws=me((e,r)=>{oe(),ae(),se();var t=Fs(),{Buffer:a}=(it(),Ue(rt)),h=a.allocUnsafe(0),n=a.from([0]),i=th(),s=rh().nextTick,o=Ut()("mqtt-packet:writeToStream"),l=i.cache,c=i.generateNumber,d=i.generateCache,g=i.genBufVariableByteInt,m=i.generate4ByteBuffer,b=ne,y=!0;function I(M,E,V){switch(o("generate called"),E.cork&&(E.cork(),s(L,E)),y&&(y=!1,d()),o("generate: packet.cmd: %s",M.cmd),M.cmd){case"connect":return k(M,E);case"connack":return _(M,E,V);case"publish":return N(M,E,V);case"puback":case"pubrec":case"pubrel":case"pubcomp":return j(M,E,V);case"subscribe":return O(M,E,V);case"suback":return C(M,E,V);case"unsubscribe":return x(M,E,V);case"unsuback":return W(M,E,V);case"pingreq":case"pingresp":return Q(M,E);case"disconnect":return ee(M,E,V);case"auth":return S(M,E,V);default:return E.destroy(new Error("Unknown command")),!1}}Object.defineProperty(I,"cacheNumbers",{get(){return b===ne},set(M){M?((!l||Object.keys(l).length===0)&&(y=!0),b=ne):(y=!1,b=$)}});function L(M){M.uncork()}function k(M,E,V){let le=M||{},J=le.protocolId||"MQTT",X=le.protocolVersion||4,ue=le.will,de=le.clean,R=le.keepalive||0,F=le.clientId||"",D=le.username,te=le.password,G=le.properties;de===void 0&&(de=!0);let U=0;if(!J||typeof J!="string"&&!a.isBuffer(J))return E.destroy(new Error("Invalid protocolId")),!1;if(U+=J.length+2,X!==3&&X!==4&&X!==5)return E.destroy(new Error("Invalid protocol version")),!1;if(U+=1,(typeof F=="string"||a.isBuffer(F))&&(F||X>=4)&&(F||de))U+=a.byteLength(F)+2;else{if(X<4)return E.destroy(new Error("clientId must be supplied before 3.1.1")),!1;if(de*1===0)return E.destroy(new Error("clientId must be given if cleanSession set to 0")),!1}if(typeof R!="number"||R<0||R>65535||R%1!==0)return E.destroy(new Error("Invalid keepalive")),!1;U+=2,U+=1;let z,we;if(X===5){if(z=ve(E,G),!z)return!1;U+=z.length}if(ue){if(typeof ue!="object")return E.destroy(new Error("Invalid will")),!1;if(!ue.topic||typeof ue.topic!="string")return E.destroy(new Error("Invalid will topic")),!1;if(U+=a.byteLength(ue.topic)+2,U+=2,ue.payload)if(ue.payload.length>=0)typeof ue.payload=="string"?U+=a.byteLength(ue.payload):U+=ue.payload.length;else return E.destroy(new Error("Invalid will payload")),!1;if(we={},X===5){if(we=ve(E,ue.properties),!we)return!1;U+=we.length}}let _e=!1;if(D!=null)if(he(D))_e=!0,U+=a.byteLength(D)+2;else return E.destroy(new Error("Invalid username")),!1;if(te!=null){if(!_e)return E.destroy(new Error("Username is required to use password")),!1;if(he(te))U+=Ee(te)+2;else return E.destroy(new Error("Invalid password")),!1}E.write(t.CONNECT_HEADER),Z(E,U),re(E,J),le.bridgeMode&&(X+=128),E.write(X===131?t.VERSION131:X===132?t.VERSION132:X===4?t.VERSION4:X===5?t.VERSION5:t.VERSION3);let Ae=0;return Ae|=D!=null?t.USERNAME_MASK:0,Ae|=te!=null?t.PASSWORD_MASK:0,Ae|=ue&&ue.retain?t.WILL_RETAIN_MASK:0,Ae|=ue&&ue.qos?ue.qos<<t.WILL_QOS_SHIFT:0,Ae|=ue?t.WILL_FLAG_MASK:0,Ae|=de?t.CLEAN_SESSION_MASK:0,E.write(a.from([Ae])),b(E,R),X===5&&z.write(),re(E,F),ue&&(X===5&&we.write(),K(E,ue.topic),re(E,ue.payload)),D!=null&&re(E,D),te!=null&&re(E,te),!0}function _(M,E,V){let le=V?V.protocolVersion:4,J=M||{},X=le===5?J.reasonCode:J.returnCode,ue=J.properties,de=2;if(typeof X!="number")return E.destroy(new Error("Invalid return code")),!1;let R=null;if(le===5){if(R=ve(E,ue),!R)return!1;de+=R.length}return E.write(t.CONNACK_HEADER),Z(E,de),E.write(J.sessionPresent?t.SESSIONPRESENT_HEADER:n),E.write(a.from([X])),R==null||R.write(),!0}function N(M,E,V){o("publish: packet: %o",M);let le=V?V.protocolVersion:4,J=M||{},X=J.qos||0,ue=J.retain?t.RETAIN_MASK:0,de=J.topic,R=J.payload||h,F=J.messageId,D=J.properties,te=0;if(typeof de=="string")te+=a.byteLength(de)+2;else if(a.isBuffer(de))te+=de.length+2;else return E.destroy(new Error("Invalid topic")),!1;if(a.isBuffer(R)?te+=R.length:te+=a.byteLength(R),X&&typeof F!="number")return E.destroy(new Error("Invalid messageId")),!1;X&&(te+=2);let G=null;if(le===5){if(G=ve(E,D),!G)return!1;te+=G.length}return E.write(t.PUBLISH_HEADER[X][J.dup?1:0][ue?1:0]),Z(E,te),b(E,Ee(de)),E.write(de),X>0&&b(E,F),G==null||G.write(),o("publish: payload: %o",R),E.write(R)}function j(M,E,V){let le=V?V.protocolVersion:4,J=M||{},X=J.cmd||"puback",ue=J.messageId,de=J.dup&&X==="pubrel"?t.DUP_MASK:0,R=0,F=J.reasonCode,D=J.properties,te=le===5?3:2;if(X==="pubrel"&&(R=1),typeof ue!="number")return E.destroy(new Error("Invalid messageId")),!1;let G=null;if(le===5&&typeof D=="object"){if(G=A(E,D,V,te),!G)return!1;te+=G.length}return E.write(t.ACKS[X][R][de][0]),te===3&&(te+=F!==0?1:-1),Z(E,te),b(E,ue),le===5&&te!==2&&E.write(a.from([F])),G!==null?G.write():te===4&&E.write(a.from([0])),!0}function O(M,E,V){o("subscribe: packet: ");let le=V?V.protocolVersion:4,J=M||{},X=J.dup?t.DUP_MASK:0,ue=J.messageId,de=J.subscriptions,R=J.properties,F=0;if(typeof ue!="number")return E.destroy(new Error("Invalid messageId")),!1;F+=2;let D=null;if(le===5){if(D=ve(E,R),!D)return!1;F+=D.length}if(typeof de=="object"&&de.length)for(let G=0;G<de.length;G+=1){let U=de[G].topic,z=de[G].qos;if(typeof U!="string")return E.destroy(new Error("Invalid subscriptions - invalid topic")),!1;if(typeof z!="number")return E.destroy(new Error("Invalid subscriptions - invalid qos")),!1;if(le===5){if(typeof(de[G].nl||!1)!="boolean")return E.destroy(new Error("Invalid subscriptions - invalid No Local")),!1;if(typeof(de[G].rap||!1)!="boolean")return E.destroy(new Error("Invalid subscriptions - invalid Retain as Published")),!1;let we=de[G].rh||0;if(typeof we!="number"||we>2)return E.destroy(new Error("Invalid subscriptions - invalid Retain Handling")),!1}F+=a.byteLength(U)+2+1}else return E.destroy(new Error("Invalid subscriptions")),!1;o("subscribe: writing to stream: %o",t.SUBSCRIBE_HEADER),E.write(t.SUBSCRIBE_HEADER[1][X?1:0][0]),Z(E,F),b(E,ue),D!==null&&D.write();let te=!0;for(let G of de){let U=G.topic,z=G.qos,we=+G.nl,_e=+G.rap,Ae=G.rh,Pe;K(E,U),Pe=t.SUBSCRIBE_OPTIONS_QOS[z],le===5&&(Pe|=we?t.SUBSCRIBE_OPTIONS_NL:0,Pe|=_e?t.SUBSCRIBE_OPTIONS_RAP:0,Pe|=Ae?t.SUBSCRIBE_OPTIONS_RH[Ae]:0),te=E.write(a.from([Pe]))}return te}function C(M,E,V){let le=V?V.protocolVersion:4,J=M||{},X=J.messageId,ue=J.granted,de=J.properties,R=0;if(typeof X!="number")return E.destroy(new Error("Invalid messageId")),!1;if(R+=2,typeof ue=="object"&&ue.length)for(let D=0;D<ue.length;D+=1){if(typeof ue[D]!="number")return E.destroy(new Error("Invalid qos vector")),!1;R+=1}else return E.destroy(new Error("Invalid qos vector")),!1;let F=null;if(le===5){if(F=A(E,de,V,R),!F)return!1;R+=F.length}return E.write(t.SUBACK_HEADER),Z(E,R),b(E,X),F!==null&&F.write(),E.write(a.from(ue))}function x(M,E,V){let le=V?V.protocolVersion:4,J=M||{},X=J.messageId,ue=J.dup?t.DUP_MASK:0,de=J.unsubscriptions,R=J.properties,F=0;if(typeof X!="number")return E.destroy(new Error("Invalid messageId")),!1;if(F+=2,typeof de=="object"&&de.length)for(let G=0;G<de.length;G+=1){if(typeof de[G]!="string")return E.destroy(new Error("Invalid unsubscriptions")),!1;F+=a.byteLength(de[G])+2}else return E.destroy(new Error("Invalid unsubscriptions")),!1;let D=null;if(le===5){if(D=ve(E,R),!D)return!1;F+=D.length}E.write(t.UNSUBSCRIBE_HEADER[1][ue?1:0][0]),Z(E,F),b(E,X),D!==null&&D.write();let te=!0;for(let G=0;G<de.length;G++)te=K(E,de[G]);return te}function W(M,E,V){let le=V?V.protocolVersion:4,J=M||{},X=J.messageId,ue=J.dup?t.DUP_MASK:0,de=J.granted,R=J.properties,F=J.cmd,D=0,te=2;if(typeof X!="number")return E.destroy(new Error("Invalid messageId")),!1;if(le===5)if(typeof de=="object"&&de.length)for(let U=0;U<de.length;U+=1){if(typeof de[U]!="number")return E.destroy(new Error("Invalid qos vector")),!1;te+=1}else return E.destroy(new Error("Invalid qos vector")),!1;let G=null;if(le===5){if(G=A(E,R,V,te),!G)return!1;te+=G.length}return E.write(t.ACKS[F][D][ue][0]),Z(E,te),b(E,X),G!==null&&G.write(),le===5&&E.write(a.from(de)),!0}function Q(M,E,V){return E.write(t.EMPTY[M.cmd])}function ee(M,E,V){let le=V?V.protocolVersion:4,J=M||{},X=J.reasonCode,ue=J.properties,de=le===5?1:0,R=null;if(le===5){if(R=A(E,ue,V,de),!R)return!1;de+=R.length}return E.write(a.from([t.codes.disconnect<<4])),Z(E,de),le===5&&E.write(a.from([X])),R!==null&&R.write(),!0}function S(M,E,V){let le=V?V.protocolVersion:4,J=M||{},X=J.reasonCode,ue=J.properties,de=le===5?1:0;le!==5&&E.destroy(new Error("Invalid mqtt version for auth packet"));let R=A(E,ue,V,de);return R?(de+=R.length,E.write(a.from([t.codes.auth<<4])),Z(E,de),E.write(a.from([X])),R!==null&&R.write(),!0):!1}var q={};function Z(M,E){if(E>t.VARBYTEINT_MAX)return M.destroy(new Error(`Invalid variable byte integer: ${E}`)),!1;let V=q[E];return V||(V=g(E),E<16384&&(q[E]=V)),o("writeVarByteInt: writing to stream: %o",V),M.write(V)}function K(M,E){let V=a.byteLength(E);return b(M,V),o("writeString: %s",E),M.write(E,"utf8")}function ge(M,E,V){K(M,E),K(M,V)}function ne(M,E){return o("writeNumberCached: number: %d",E),o("writeNumberCached: %o",l[E]),M.write(l[E])}function $(M,E){let V=c(E);return o("writeNumberGenerated: %o",V),M.write(V)}function be(M,E){let V=m(E);return o("write4ByteNumber: %o",V),M.write(V)}function re(M,E){typeof E=="string"?K(M,E):E?(b(M,E.length),M.write(E)):b(M,0)}function ve(M,E){if(typeof E!="object"||E.length!=null)return{length:1,write(){ce(M,{},0)}};let V=0;function le(J,X){let ue=t.propertiesTypes[J],de=0;switch(ue){case"byte":{if(typeof X!="boolean")return M.destroy(new Error(`Invalid ${J}: ${X}`)),!1;de+=2;break}case"int8":{if(typeof X!="number"||X<0||X>255)return M.destroy(new Error(`Invalid ${J}: ${X}`)),!1;de+=2;break}case"binary":{if(X&&X===null)return M.destroy(new Error(`Invalid ${J}: ${X}`)),!1;de+=1+a.byteLength(X)+2;break}case"int16":{if(typeof X!="number"||X<0||X>65535)return M.destroy(new Error(`Invalid ${J}: ${X}`)),!1;de+=3;break}case"int32":{if(typeof X!="number"||X<0||X>4294967295)return M.destroy(new Error(`Invalid ${J}: ${X}`)),!1;de+=5;break}case"var":{if(typeof X!="number"||X<0||X>268435455)return M.destroy(new Error(`Invalid ${J}: ${X}`)),!1;de+=1+a.byteLength(g(X));break}case"string":{if(typeof X!="string")return M.destroy(new Error(`Invalid ${J}: ${X}`)),!1;de+=3+a.byteLength(X.toString());break}case"pair":{if(typeof X!="object")return M.destroy(new Error(`Invalid ${J}: ${X}`)),!1;de+=Object.getOwnPropertyNames(X).reduce((R,F)=>{let D=X[F];return Array.isArray(D)?R+=D.reduce((te,G)=>(te+=3+a.byteLength(F.toString())+2+a.byteLength(G.toString()),te),0):R+=3+a.byteLength(F.toString())+2+a.byteLength(X[F].toString()),R},0);break}default:return M.destroy(new Error(`Invalid property ${J}: ${X}`)),!1}return de}if(E)for(let J in E){let X=0,ue=0,de=E[J];if(Array.isArray(de))for(let R=0;R<de.length;R++){if(ue=le(J,de[R]),!ue)return!1;X+=ue}else{if(ue=le(J,de),!ue)return!1;X=ue}if(!X)return!1;V+=X}return{length:a.byteLength(g(V))+V,write(){ce(M,E,V)}}}function A(M,E,V,le){let J=["reasonString","userProperties"],X=V&&V.properties&&V.properties.maximumPacketSize?V.properties.maximumPacketSize:0,ue=ve(M,E);if(X)for(;le+ue.length>X;){let de=J.shift();if(de&&E[de])delete E[de],ue=ve(M,E);else return!1}return ue}function Y(M,E,V){switch(t.propertiesTypes[E]){case"byte":{M.write(a.from([t.properties[E]])),M.write(a.from([+V]));break}case"int8":{M.write(a.from([t.properties[E]])),M.write(a.from([V]));break}case"binary":{M.write(a.from([t.properties[E]])),re(M,V);break}case"int16":{M.write(a.from([t.properties[E]])),b(M,V);break}case"int32":{M.write(a.from([t.properties[E]])),be(M,V);break}case"var":{M.write(a.from([t.properties[E]])),Z(M,V);break}case"string":{M.write(a.from([t.properties[E]])),K(M,V);break}case"pair":{Object.getOwnPropertyNames(V).forEach(le=>{let J=V[le];Array.isArray(J)?J.forEach(X=>{M.write(a.from([t.properties[E]])),ge(M,le.toString(),X.toString())}):(M.write(a.from([t.properties[E]])),ge(M,le.toString(),J.toString()))});break}default:return M.destroy(new Error(`Invalid property ${E} value: ${V}`)),!1}}function ce(M,E,V){Z(M,V);for(let le in E)if(Object.prototype.hasOwnProperty.call(E,le)&&E[le]!==null){let J=E[le];if(Array.isArray(J))for(let X=0;X<J.length;X++)Y(M,le,J[X]);else Y(M,le,J)}}function Ee(M){return M?M instanceof a?M.length:a.byteLength(M):0}function he(M){return typeof M=="string"||M instanceof a}r.exports=I}),ih=me((e,r)=>{oe(),ae(),se();var t=Ws(),{EventEmitter:a}=(yr(),Ue(ur)),{Buffer:h}=(it(),Ue(rt));function n(s,o){let l=new i;return t(s,l,o),l.concat()}var i=class extends a{constructor(){super(),this._array=new Array(20),this._i=0}write(s){return this._array[this._i++]=s,!0}concat(){let s=0,o=new Array(this._array.length),l=this._array,c=0,d;for(d=0;d<l.length&&l[d]!==void 0;d++)typeof l[d]!="string"?o[d]=l[d].length:o[d]=h.byteLength(l[d]),s+=o[d];let g=h.allocUnsafe(s);for(d=0;d<l.length&&l[d]!==void 0;d++)typeof l[d]!="string"?(l[d].copy(g,c),c+=o[d]):(g.write(l[d],c),c+=o[d]);return g}destroy(s){s&&this.emit("error",s)}};r.exports=n}),nh=me(e=>{oe(),ae(),se(),e.parser=eh().parser,e.generate=ih(),e.writeToStream=Ws()}),$s=me(e=>{oe(),ae(),se(),Object.defineProperty(e,"__esModule",{value:!0});var r=class{constructor(){this.nextId=Math.max(1,Math.floor(Math.random()*65535))}allocate(){let t=this.nextId++;return this.nextId===65536&&(this.nextId=1),t}getLastAllocated(){return this.nextId===1?65535:this.nextId-1}register(t){return!0}deallocate(t){}clear(){}};e.default=r}),oh=me((e,r)=>{oe(),ae(),se(),r.exports=a;function t(n){return n instanceof Kr?Kr.from(n):new n.constructor(n.buffer.slice(),n.byteOffset,n.length)}function a(n){if(n=n||{},n.circles)return h(n);return n.proto?o:s;function i(l,c){for(var d=Object.keys(l),g=new Array(d.length),m=0;m<d.length;m++){var b=d[m],y=l[b];typeof y!="object"||y===null?g[b]=y:y instanceof Date?g[b]=new Date(y):ArrayBuffer.isView(y)?g[b]=t(y):g[b]=c(y)}return g}function s(l){if(typeof l!="object"||l===null)return l;if(l instanceof Date)return new Date(l);if(Array.isArray(l))return i(l,s);if(l instanceof Map)return new Map(i(Array.from(l),s));if(l instanceof Set)return new Set(i(Array.from(l),s));var c={};for(var d in l)if(Object.hasOwnProperty.call(l,d)!==!1){var g=l[d];typeof g!="object"||g===null?c[d]=g:g instanceof Date?c[d]=new Date(g):g instanceof Map?c[d]=new Map(i(Array.from(g),s)):g instanceof Set?c[d]=new Set(i(Array.from(g),s)):ArrayBuffer.isView(g)?c[d]=t(g):c[d]=s(g)}return c}function o(l){if(typeof l!="object"||l===null)return l;if(l instanceof Date)return new Date(l);if(Array.isArray(l))return i(l,o);if(l instanceof Map)return new Map(i(Array.from(l),o));if(l instanceof Set)return new Set(i(Array.from(l),o));var c={};for(var d in l){var g=l[d];typeof g!="object"||g===null?c[d]=g:g instanceof Date?c[d]=new Date(g):g instanceof Map?c[d]=new Map(i(Array.from(g),o)):g instanceof Set?c[d]=new Set(i(Array.from(g),o)):ArrayBuffer.isView(g)?c[d]=t(g):c[d]=o(g)}return c}}function h(n){var i=[],s=[];return n.proto?c:l;function o(d,g){for(var m=Object.keys(d),b=new Array(m.length),y=0;y<m.length;y++){var I=m[y],L=d[I];if(typeof L!="object"||L===null)b[I]=L;else if(L instanceof Date)b[I]=new Date(L);else if(ArrayBuffer.isView(L))b[I]=t(L);else{var k=i.indexOf(L);k!==-1?b[I]=s[k]:b[I]=g(L)}}return b}function l(d){if(typeof d!="object"||d===null)return d;if(d instanceof Date)return new Date(d);if(Array.isArray(d))return o(d,l);if(d instanceof Map)return new Map(o(Array.from(d),l));if(d instanceof Set)return new Set(o(Array.from(d),l));var g={};i.push(d),s.push(g);for(var m in d)if(Object.hasOwnProperty.call(d,m)!==!1){var b=d[m];if(typeof b!="object"||b===null)g[m]=b;else if(b instanceof Date)g[m]=new Date(b);else if(b instanceof Map)g[m]=new Map(o(Array.from(b),l));else if(b instanceof Set)g[m]=new Set(o(Array.from(b),l));else if(ArrayBuffer.isView(b))g[m]=t(b);else{var y=i.indexOf(b);y!==-1?g[m]=s[y]:g[m]=l(b)}}return i.pop(),s.pop(),g}function c(d){if(typeof d!="object"||d===null)return d;if(d instanceof Date)return new Date(d);if(Array.isArray(d))return o(d,c);if(d instanceof Map)return new Map(o(Array.from(d),c));if(d instanceof Set)return new Set(o(Array.from(d),c));var g={};i.push(d),s.push(g);for(var m in d){var b=d[m];if(typeof b!="object"||b===null)g[m]=b;else if(b instanceof Date)g[m]=new Date(b);else if(b instanceof Map)g[m]=new Map(o(Array.from(b),c));else if(b instanceof Set)g[m]=new Set(o(Array.from(b),c));else if(ArrayBuffer.isView(b))g[m]=t(b);else{var y=i.indexOf(b);y!==-1?g[m]=s[y]:g[m]=c(b)}}return i.pop(),s.pop(),g}}}),sh=me((e,r)=>{oe(),ae(),se(),r.exports=oh()()}),ah=me(e=>{oe(),ae(),se(),Object.defineProperty(e,"__esModule",{value:!0}),e.validateTopics=e.validateTopic=void 0;function r(a){let h=a.split("/");for(let n=0;n<h.length;n++)if(h[n]!=="+"){if(h[n]==="#")return n===h.length-1;if(h[n].indexOf("+")!==-1||h[n].indexOf("#")!==-1)return!1}return!0}e.validateTopic=r;function t(a){if(a.length===0)return"empty_topic_list";for(let h=0;h<a.length;h++)if(!r(a[h]))return a[h];return null}e.validateTopics=t}),qs=me(e=>{oe(),ae(),se(),Object.defineProperty(e,"__esModule",{value:!0});var r=cr(),t={objectMode:!0},a={clean:!0},h=class{constructor(n){this.options=n||{},this.options=Object.assign(Object.assign({},a),n),this._inflights=new Map}put(n,i){return this._inflights.set(n.messageId,n),i&&i(),this}createStream(){let n=new r.Readable(t),i=[],s=!1,o=0;return this._inflights.forEach((l,c)=>{i.push(l)}),n._read=()=>{!s&&o<i.length?n.push(i[o++]):n.push(null)},n.destroy=l=>{if(!s)return s=!0,setTimeout(()=>{n.emit("close")},0),n},n}del(n,i){let s=this._inflights.get(n.messageId);return s?(this._inflights.delete(n.messageId),i(null,s)):i&&i(new Error("missing packet")),this}get(n,i){let s=this._inflights.get(n.messageId);return s?i(null,s):i&&i(new Error("missing packet")),this}close(n){this.options.clean&&(this._inflights=null),n&&n()}};e.default=h}),lh=me(e=>{oe(),ae(),se(),Object.defineProperty(e,"__esModule",{value:!0});var r=[0,16,128,131,135,144,145,151,153],t=(a,h,n)=>{a.log("handlePublish: packet %o",h),n=typeof n<"u"?n:a.noop;let i=h.topic.toString(),s=h.payload,{qos:o}=h,{messageId:l}=h,{options:c}=a;if(a.options.protocolVersion===5){let d;if(h.properties&&(d=h.properties.topicAlias),typeof d<"u")if(i.length===0)if(d>0&&d<=65535){let g=a.topicAliasRecv.getTopicByAlias(d);if(g)i=g,a.log("handlePublish :: topic complemented by alias. topic: %s - alias: %d",i,d);else{a.log("handlePublish :: unregistered topic alias. alias: %d",d),a.emit("error",new Error("Received unregistered Topic Alias"));return}}else{a.log("handlePublish :: topic alias out of range. alias: %d",d),a.emit("error",new Error("Received Topic Alias is out of range"));return}else if(a.topicAliasRecv.put(i,d))a.log("handlePublish :: registered topic: %s - alias: %d",i,d);else{a.log("handlePublish :: topic alias out of range. alias: %d",d),a.emit("error",new Error("Received Topic Alias is out of range"));return}}switch(a.log("handlePublish: qos %d",o),o){case 2:{c.customHandleAcks(i,s,h,(d,g)=>{if(typeof d=="number"&&(g=d,d=null),d)return a.emit("error",d);if(r.indexOf(g)===-1)return a.emit("error",new Error("Wrong reason code for pubrec"));g?a._sendPacket({cmd:"pubrec",messageId:l,reasonCode:g},n):a.incomingStore.put(h,()=>{a._sendPacket({cmd:"pubrec",messageId:l},n)})});break}case 1:{c.customHandleAcks(i,s,h,(d,g)=>{if(typeof d=="number"&&(g=d,d=null),d)return a.emit("error",d);if(r.indexOf(g)===-1)return a.emit("error",new Error("Wrong reason code for puback"));g||a.emit("message",i,s,h),a.handleMessage(h,m=>{if(m)return n&&n(m);a._sendPacket({cmd:"puback",messageId:l,reasonCode:g},n)})});break}case 0:a.emit("message",i,s,h),a.handleMessage(h,n);break;default:a.log("handlePublish: unknown QoS. Doing nothing.");break}};e.default=t}),hh=me((e,r)=>{r.exports={version:"5.10.3"}}),wr=me(e=>{oe(),ae(),se(),Object.defineProperty(e,"__esModule",{value:!0}),e.MQTTJS_VERSION=e.nextTick=e.applyMixin=e.ErrorWithReasonCode=void 0;var r=class Hs extends Error{constructor(h,n){super(h),this.code=n,Object.setPrototypeOf(this,Hs.prototype),Object.getPrototypeOf(this).name="ErrorWithReasonCode"}};e.ErrorWithReasonCode=r;function t(a,h,n=!1){var i;let s=[h];for(;;){let o=s[0],l=Object.getPrototypeOf(o);if(l!=null&&l.prototype)s.unshift(l);else break}for(let o of s)for(let l of Object.getOwnPropertyNames(o.prototype))(n||l!=="constructor")&&Object.defineProperty(a.prototype,l,(i=Object.getOwnPropertyDescriptor(o.prototype,l))!==null&&i!==void 0?i:Object.create(null))}e.applyMixin=t,e.nextTick=typeof(Be==null?void 0:Be.nextTick)=="function"?Be.nextTick:a=>{setTimeout(a,0)},e.MQTTJS_VERSION=hh().version}),ri=me(e=>{oe(),ae(),se(),Object.defineProperty(e,"__esModule",{value:!0}),e.ReasonCodes=void 0;var r=wr();e.ReasonCodes={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};var t=(a,h)=>{let{messageId:n}=h,i=h.cmd,s=null,o=a.outgoing[n]?a.outgoing[n].cb:null,l=null;if(!o){a.log("_handleAck :: Server sent an ack in error. Ignoring.");return}switch(a.log("_handleAck :: packet type",i),i){case"pubcomp":case"puback":{let c=h.reasonCode;c&&c>0&&c!==16?(l=new r.ErrorWithReasonCode(`Publish error: ${e.ReasonCodes[c]}`,c),a._removeOutgoingAndStoreMessage(n,()=>{o(l,h)})):a._removeOutgoingAndStoreMessage(n,o);break}case"pubrec":{s={cmd:"pubrel",qos:2,messageId:n};let c=h.reasonCode;c&&c>0&&c!==16?(l=new r.ErrorWithReasonCode(`Publish error: ${e.ReasonCodes[c]}`,c),a._removeOutgoingAndStoreMessage(n,()=>{o(l,h)})):a._sendPacket(s);break}case"suback":{delete a.outgoing[n],a.messageIdProvider.deallocate(n);let c=h.granted;for(let d=0;d<c.length;d++){let g=c[d];if(g&128){l=new Error(`Subscribe error: ${e.ReasonCodes[g]}`),l.code=g;let m=a.messageIdToTopic[n];m&&m.forEach(b=>{delete a._resubscribeTopics[b]})}}delete a.messageIdToTopic[n],a._invokeStoreProcessingQueue(),o(l,h);break}case"unsuback":{delete a.outgoing[n],a.messageIdProvider.deallocate(n),a._invokeStoreProcessingQueue(),o(null,h);break}default:a.emit("error",new Error("unrecognized packet type"))}a.disconnecting&&Object.keys(a.outgoing).length===0&&a.emit("outgoingEmpty")};e.default=t}),uh=me(e=>{oe(),ae(),se(),Object.defineProperty(e,"__esModule",{value:!0});var r=wr(),t=ri(),a=(h,n)=>{let{options:i}=h,s=i.protocolVersion,o=s===5?n.reasonCode:n.returnCode;if(s!==5){let l=new r.ErrorWithReasonCode(`Protocol error: Auth packets are only supported in MQTT 5. Your version:${s}`,o);h.emit("error",l);return}h.handleAuth(n,(l,c)=>{if(l){h.emit("error",l);return}if(o===24)h.reconnecting=!1,h._sendPacket(c);else{let d=new r.ErrorWithReasonCode(`Connection refused: ${t.ReasonCodes[o]}`,o);h.emit("error",d)}})};e.default=a}),ch=me(e=>{var m,b,y,I,L,k,_,N,j,O,C,x,W,Q,ee,S,q,Z,K,ge,ne,$,be,re,ve,A,Pn,ce,Ee,he,M,E,zs,le,J,X,ue,$t,R,qt,D,Bn,G,$r,z,qr,_e,Ne,Pe,Mn,u,kr,v;oe(),ae(),se(),Object.defineProperty(e,"__esModule",{value:!0}),e.LRUCache=void 0;var r=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,t=new Set,a=typeof Be=="object"&&Be?Be:{},h=(T,w,P,H)=>{typeof a.emitWarning=="function"?a.emitWarning(T,w,P,H):console.error(`[${P}] ${w}: ${T}`)},n=globalThis.AbortController,i=globalThis.AbortSignal;if(typeof n>"u"){i=class{constructor(){Re(this,"onabort");Re(this,"_onabort",[]);Re(this,"reason");Re(this,"aborted",!1)}addEventListener(P,H){this._onabort.push(H)}},n=class{constructor(){Re(this,"signal",new i);w()}abort(P){var H,fe;if(!this.signal.aborted){this.signal.reason=P,this.signal.aborted=!0;for(let ie of this.signal._onabort)ie(P);(fe=(H=this.signal).onabort)==null||fe.call(H,P)}}};let T=((m=a.env)==null?void 0:m.LRU_CACHE_IGNORE_AC_WARNING)!=="1",w=()=>{T&&(T=!1,h("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",w))}}var s=T=>!t.has(T),o=T=>T&&T===Math.floor(T)&&T>0&&isFinite(T),l=T=>o(T)?T<=Math.pow(2,8)?Uint8Array:T<=Math.pow(2,16)?Uint16Array:T<=Math.pow(2,32)?Uint32Array:T<=Number.MAX_SAFE_INTEGER?c:null:null,c=class extends Array{constructor(T){super(T),this.fill(0)}},d=(b=class{constructor(w,P){Re(this,"heap");Re(this,"length");if(!B(b,y))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new P(w),this.length=0}static create(w){let P=l(w);if(!P)return[];Te(b,y,!0);let H=new b(w,P);return Te(b,y,!1),H}push(w){this.heap[this.length++]=w}pop(){return this.heap[--this.length]}},y=new WeakMap,Oe(b,y,!1),b),g=(v=class{constructor(w){Oe(this,A);Oe(this,E);Oe(this,ue);Oe(this,R);Oe(this,D);Oe(this,G);Oe(this,z);Oe(this,_e);Oe(this,Pe);Oe(this,u);Oe(this,I,void 0);Oe(this,L,void 0);Oe(this,k,void 0);Oe(this,_,void 0);Oe(this,N,void 0);Re(this,"ttl");Re(this,"ttlResolution");Re(this,"ttlAutopurge");Re(this,"updateAgeOnGet");Re(this,"updateAgeOnHas");Re(this,"allowStale");Re(this,"noDisposeOnSet");Re(this,"noUpdateTTL");Re(this,"maxEntrySize");Re(this,"sizeCalculation");Re(this,"noDeleteOnFetchRejection");Re(this,"noDeleteOnStaleGet");Re(this,"allowStaleOnFetchAbort");Re(this,"allowStaleOnFetchRejection");Re(this,"ignoreFetchAbort");Oe(this,j,void 0);Oe(this,O,void 0);Oe(this,C,void 0);Oe(this,x,void 0);Oe(this,W,void 0);Oe(this,Q,void 0);Oe(this,ee,void 0);Oe(this,S,void 0);Oe(this,q,void 0);Oe(this,Z,void 0);Oe(this,K,void 0);Oe(this,ge,void 0);Oe(this,ne,void 0);Oe(this,$,void 0);Oe(this,be,void 0);Oe(this,re,void 0);Oe(this,ve,void 0);Oe(this,ce,()=>{});Oe(this,Ee,()=>{});Oe(this,he,()=>{});Oe(this,M,()=>!1);Oe(this,le,w=>{});Oe(this,J,(w,P,H)=>{});Oe(this,X,(w,P,H,fe)=>{if(H||fe)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});let{max:P=0,ttl:H,ttlResolution:fe=1,ttlAutopurge:ie,updateAgeOnGet:ye,updateAgeOnHas:Se,allowStale:ke,dispose:ze,disposeAfter:st,noDisposeOnSet:Le,noUpdateTTL:at,maxSize:Ke=0,maxEntrySize:Ye=0,sizeCalculation:Ve,fetchMethod:nt,noDeleteOnFetchRejection:Ce,noDeleteOnStaleGet:qe,allowStaleOnFetchRejection:lt,allowStaleOnFetchAbort:et,ignoreFetchAbort:mt}=w;if(P!==0&&!o(P))throw new TypeError("max option must be a nonnegative integer");let Kt=P?l(P):Array;if(!Kt)throw new Error("invalid max value: "+P);if(Te(this,I,P),Te(this,L,Ke),this.maxEntrySize=Ye||B(this,L),this.sizeCalculation=Ve,this.sizeCalculation){if(!B(this,L)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(nt!==void 0&&typeof nt!="function")throw new TypeError("fetchMethod must be a function if specified");if(Te(this,N,nt),Te(this,re,!!nt),Te(this,C,new Map),Te(this,x,new Array(P).fill(void 0)),Te(this,W,new Array(P).fill(void 0)),Te(this,Q,new Kt(P)),Te(this,ee,new Kt(P)),Te(this,S,0),Te(this,q,0),Te(this,Z,d.create(P)),Te(this,j,0),Te(this,O,0),typeof ze=="function"&&Te(this,k,ze),typeof st=="function"?(Te(this,_,st),Te(this,K,[])):(Te(this,_,void 0),Te(this,K,void 0)),Te(this,be,!!B(this,k)),Te(this,ve,!!B(this,_)),this.noDisposeOnSet=!!Le,this.noUpdateTTL=!!at,this.noDeleteOnFetchRejection=!!Ce,this.allowStaleOnFetchRejection=!!lt,this.allowStaleOnFetchAbort=!!et,this.ignoreFetchAbort=!!mt,this.maxEntrySize!==0){if(B(this,L)!==0&&!o(B(this,L)))throw new TypeError("maxSize must be a positive integer if specified");if(!o(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");Ie(this,E,zs).call(this)}if(this.allowStale=!!ke,this.noDeleteOnStaleGet=!!qe,this.updateAgeOnGet=!!ye,this.updateAgeOnHas=!!Se,this.ttlResolution=o(fe)||fe===0?fe:1,this.ttlAutopurge=!!ie,this.ttl=H||0,this.ttl){if(!o(this.ttl))throw new TypeError("ttl must be a positive integer if specified");Ie(this,A,Pn).call(this)}if(B(this,I)===0&&this.ttl===0&&B(this,L)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!B(this,I)&&!B(this,L)){let Ft="LRU_CACHE_UNBOUNDED";s(Ft)&&(t.add(Ft),h("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",Ft,v))}}static unsafeExposeInternals(w){return{starts:B(w,ne),ttls:B(w,$),sizes:B(w,ge),keyMap:B(w,C),keyList:B(w,x),valList:B(w,W),next:B(w,Q),prev:B(w,ee),get head(){return B(w,S)},get tail(){return B(w,q)},free:B(w,Z),isBackgroundFetch:P=>{var H;return Ie(H=w,_e,Ne).call(H,P)},backgroundFetch:(P,H,fe,ie)=>{var ye;return Ie(ye=w,z,qr).call(ye,P,H,fe,ie)},moveToTail:P=>{var H;return Ie(H=w,u,kr).call(H,P)},indexes:P=>{var H;return Ie(H=w,ue,$t).call(H,P)},rindexes:P=>{var H;return Ie(H=w,R,qt).call(H,P)},isStale:P=>{var H;return B(H=w,M).call(H,P)}}}get max(){return B(this,I)}get maxSize(){return B(this,L)}get calculatedSize(){return B(this,O)}get size(){return B(this,j)}get fetchMethod(){return B(this,N)}get dispose(){return B(this,k)}get disposeAfter(){return B(this,_)}getRemainingTTL(w){return B(this,C).has(w)?1/0:0}*entries(){for(let w of Ie(this,ue,$t).call(this))B(this,W)[w]!==void 0&&B(this,x)[w]!==void 0&&!Ie(this,_e,Ne).call(this,B(this,W)[w])&&(yield[B(this,x)[w],B(this,W)[w]])}*rentries(){for(let w of Ie(this,R,qt).call(this))B(this,W)[w]!==void 0&&B(this,x)[w]!==void 0&&!Ie(this,_e,Ne).call(this,B(this,W)[w])&&(yield[B(this,x)[w],B(this,W)[w]])}*keys(){for(let w of Ie(this,ue,$t).call(this)){let P=B(this,x)[w];P!==void 0&&!Ie(this,_e,Ne).call(this,B(this,W)[w])&&(yield P)}}*rkeys(){for(let w of Ie(this,R,qt).call(this)){let P=B(this,x)[w];P!==void 0&&!Ie(this,_e,Ne).call(this,B(this,W)[w])&&(yield P)}}*values(){for(let w of Ie(this,ue,$t).call(this))B(this,W)[w]!==void 0&&!Ie(this,_e,Ne).call(this,B(this,W)[w])&&(yield B(this,W)[w])}*rvalues(){for(let w of Ie(this,R,qt).call(this))B(this,W)[w]!==void 0&&!Ie(this,_e,Ne).call(this,B(this,W)[w])&&(yield B(this,W)[w])}[Symbol.iterator](){return this.entries()}find(w,P={}){for(let H of Ie(this,ue,$t).call(this)){let fe=B(this,W)[H],ie=Ie(this,_e,Ne).call(this,fe)?fe.__staleWhileFetching:fe;if(ie!==void 0&&w(ie,B(this,x)[H],this))return this.get(B(this,x)[H],P)}}forEach(w,P=this){for(let H of Ie(this,ue,$t).call(this)){let fe=B(this,W)[H],ie=Ie(this,_e,Ne).call(this,fe)?fe.__staleWhileFetching:fe;ie!==void 0&&w.call(P,ie,B(this,x)[H],this)}}rforEach(w,P=this){for(let H of Ie(this,R,qt).call(this)){let fe=B(this,W)[H],ie=Ie(this,_e,Ne).call(this,fe)?fe.__staleWhileFetching:fe;ie!==void 0&&w.call(P,ie,B(this,x)[H],this)}}purgeStale(){let w=!1;for(let P of Ie(this,R,qt).call(this,{allowStale:!0}))B(this,M).call(this,P)&&(this.delete(B(this,x)[P]),w=!0);return w}dump(){let w=[];for(let P of Ie(this,ue,$t).call(this,{allowStale:!0})){let H=B(this,x)[P],fe=B(this,W)[P],ie=Ie(this,_e,Ne).call(this,fe)?fe.__staleWhileFetching:fe;if(ie===void 0||H===void 0)continue;let ye={value:ie};if(B(this,$)&&B(this,ne)){ye.ttl=B(this,$)[P];let Se=r.now()-B(this,ne)[P];ye.start=Math.floor(Date.now()-Se)}B(this,ge)&&(ye.size=B(this,ge)[P]),w.unshift([H,ye])}return w}load(w){this.clear();for(let[P,H]of w){if(H.start){let fe=Date.now()-H.start;H.start=r.now()-fe}this.set(P,H.value,H)}}set(w,P,H={}){var at,Ke,Ye,Ve,nt;if(P===void 0)return this.delete(w),this;let{ttl:fe=this.ttl,start:ie,noDisposeOnSet:ye=this.noDisposeOnSet,sizeCalculation:Se=this.sizeCalculation,status:ke}=H,{noUpdateTTL:ze=this.noUpdateTTL}=H,st=B(this,X).call(this,w,P,H.size||0,Se);if(this.maxEntrySize&&st>this.maxEntrySize)return ke&&(ke.set="miss",ke.maxEntrySizeExceeded=!0),this.delete(w),this;let Le=B(this,j)===0?void 0:B(this,C).get(w);if(Le===void 0)Le=B(this,j)===0?B(this,q):B(this,Z).length!==0?B(this,Z).pop():B(this,j)===B(this,I)?Ie(this,G,$r).call(this,!1):B(this,j),B(this,x)[Le]=w,B(this,W)[Le]=P,B(this,C).set(w,Le),B(this,Q)[B(this,q)]=Le,B(this,ee)[Le]=B(this,q),Te(this,q,Le),Pr(this,j)._++,B(this,J).call(this,Le,st,ke),ke&&(ke.set="add"),ze=!1;else{Ie(this,u,kr).call(this,Le);let Ce=B(this,W)[Le];if(P!==Ce){if(B(this,re)&&Ie(this,_e,Ne).call(this,Ce)){Ce.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:qe}=Ce;qe!==void 0&&!ye&&(B(this,be)&&((at=B(this,k))==null||at.call(this,qe,w,"set")),B(this,ve)&&((Ke=B(this,K))==null||Ke.push([qe,w,"set"])))}else ye||(B(this,be)&&((Ye=B(this,k))==null||Ye.call(this,Ce,w,"set")),B(this,ve)&&((Ve=B(this,K))==null||Ve.push([Ce,w,"set"])));if(B(this,le).call(this,Le),B(this,J).call(this,Le,st,ke),B(this,W)[Le]=P,ke){ke.set="replace";let qe=Ce&&Ie(this,_e,Ne).call(this,Ce)?Ce.__staleWhileFetching:Ce;qe!==void 0&&(ke.oldValue=qe)}}else ke&&(ke.set="update")}if(fe!==0&&!B(this,$)&&Ie(this,A,Pn).call(this),B(this,$)&&(ze||B(this,he).call(this,Le,fe,ie),ke&&B(this,Ee).call(this,ke,Le)),!ye&&B(this,ve)&&B(this,K)){let Ce=B(this,K),qe;for(;qe=Ce==null?void 0:Ce.shift();)(nt=B(this,_))==null||nt.call(this,...qe)}return this}pop(){var w;try{for(;B(this,j);){let P=B(this,W)[B(this,S)];if(Ie(this,G,$r).call(this,!0),Ie(this,_e,Ne).call(this,P)){if(P.__staleWhileFetching)return P.__staleWhileFetching}else if(P!==void 0)return P}}finally{if(B(this,ve)&&B(this,K)){let P=B(this,K),H;for(;H=P==null?void 0:P.shift();)(w=B(this,_))==null||w.call(this,...H)}}}has(w,P={}){let{updateAgeOnHas:H=this.updateAgeOnHas,status:fe}=P,ie=B(this,C).get(w);if(ie!==void 0){let ye=B(this,W)[ie];if(Ie(this,_e,Ne).call(this,ye)&&ye.__staleWhileFetching===void 0)return!1;if(B(this,M).call(this,ie))fe&&(fe.has="stale",B(this,Ee).call(this,fe,ie));else return H&&B(this,ce).call(this,ie),fe&&(fe.has="hit",B(this,Ee).call(this,fe,ie)),!0}else fe&&(fe.has="miss");return!1}peek(w,P={}){let{allowStale:H=this.allowStale}=P,fe=B(this,C).get(w);if(fe!==void 0&&(H||!B(this,M).call(this,fe))){let ie=B(this,W)[fe];return Ie(this,_e,Ne).call(this,ie)?ie.__staleWhileFetching:ie}}async fetch(w,P={}){let{allowStale:H=this.allowStale,updateAgeOnGet:fe=this.updateAgeOnGet,noDeleteOnStaleGet:ie=this.noDeleteOnStaleGet,ttl:ye=this.ttl,noDisposeOnSet:Se=this.noDisposeOnSet,size:ke=0,sizeCalculation:ze=this.sizeCalculation,noUpdateTTL:st=this.noUpdateTTL,noDeleteOnFetchRejection:Le=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:at=this.allowStaleOnFetchRejection,ignoreFetchAbort:Ke=this.ignoreFetchAbort,allowStaleOnFetchAbort:Ye=this.allowStaleOnFetchAbort,context:Ve,forceRefresh:nt=!1,status:Ce,signal:qe}=P;if(!B(this,re))return Ce&&(Ce.fetch="get"),this.get(w,{allowStale:H,updateAgeOnGet:fe,noDeleteOnStaleGet:ie,status:Ce});let lt={allowStale:H,updateAgeOnGet:fe,noDeleteOnStaleGet:ie,ttl:ye,noDisposeOnSet:Se,size:ke,sizeCalculation:ze,noUpdateTTL:st,noDeleteOnFetchRejection:Le,allowStaleOnFetchRejection:at,allowStaleOnFetchAbort:Ye,ignoreFetchAbort:Ke,status:Ce,signal:qe},et=B(this,C).get(w);if(et===void 0){Ce&&(Ce.fetch="miss");let mt=Ie(this,z,qr).call(this,w,et,lt,Ve);return mt.__returned=mt}else{let mt=B(this,W)[et];if(Ie(this,_e,Ne).call(this,mt)){let ro=H&&mt.__staleWhileFetching!==void 0;return Ce&&(Ce.fetch="inflight",ro&&(Ce.returnedStale=!0)),ro?mt.__staleWhileFetching:mt.__returned=mt}let Kt=B(this,M).call(this,et);if(!nt&&!Kt)return Ce&&(Ce.fetch="hit"),Ie(this,u,kr).call(this,et),fe&&B(this,ce).call(this,et),Ce&&B(this,Ee).call(this,Ce,et),mt;let Ft=Ie(this,z,qr).call(this,w,et,lt,Ve),to=Ft.__staleWhileFetching!==void 0&&H;return Ce&&(Ce.fetch=Kt?"stale":"refresh",to&&Kt&&(Ce.returnedStale=!0)),to?Ft.__staleWhileFetching:Ft.__returned=Ft}}get(w,P={}){let{allowStale:H=this.allowStale,updateAgeOnGet:fe=this.updateAgeOnGet,noDeleteOnStaleGet:ie=this.noDeleteOnStaleGet,status:ye}=P,Se=B(this,C).get(w);if(Se!==void 0){let ke=B(this,W)[Se],ze=Ie(this,_e,Ne).call(this,ke);return ye&&B(this,Ee).call(this,ye,Se),B(this,M).call(this,Se)?(ye&&(ye.get="stale"),ze?(ye&&H&&ke.__staleWhileFetching!==void 0&&(ye.returnedStale=!0),H?ke.__staleWhileFetching:void 0):(ie||this.delete(w),ye&&H&&(ye.returnedStale=!0),H?ke:void 0)):(ye&&(ye.get="hit"),ze?ke.__staleWhileFetching:(Ie(this,u,kr).call(this,Se),fe&&B(this,ce).call(this,Se),ke))}else ye&&(ye.get="miss")}delete(w){var H,fe,ie,ye;let P=!1;if(B(this,j)!==0){let Se=B(this,C).get(w);if(Se!==void 0)if(P=!0,B(this,j)===1)this.clear();else{B(this,le).call(this,Se);let ke=B(this,W)[Se];Ie(this,_e,Ne).call(this,ke)?ke.__abortController.abort(new Error("deleted")):(B(this,be)||B(this,ve))&&(B(this,be)&&((H=B(this,k))==null||H.call(this,ke,w,"delete")),B(this,ve)&&((fe=B(this,K))==null||fe.push([ke,w,"delete"]))),B(this,C).delete(w),B(this,x)[Se]=void 0,B(this,W)[Se]=void 0,Se===B(this,q)?Te(this,q,B(this,ee)[Se]):Se===B(this,S)?Te(this,S,B(this,Q)[Se]):(B(this,Q)[B(this,ee)[Se]]=B(this,Q)[Se],B(this,ee)[B(this,Q)[Se]]=B(this,ee)[Se]),Pr(this,j)._--,B(this,Z).push(Se)}}if(B(this,ve)&&((ie=B(this,K))!=null&&ie.length)){let Se=B(this,K),ke;for(;ke=Se==null?void 0:Se.shift();)(ye=B(this,_))==null||ye.call(this,...ke)}return P}clear(){var w,P,H;for(let fe of Ie(this,R,qt).call(this,{allowStale:!0})){let ie=B(this,W)[fe];if(Ie(this,_e,Ne).call(this,ie))ie.__abortController.abort(new Error("deleted"));else{let ye=B(this,x)[fe];B(this,be)&&((w=B(this,k))==null||w.call(this,ie,ye,"delete")),B(this,ve)&&((P=B(this,K))==null||P.push([ie,ye,"delete"]))}}if(B(this,C).clear(),B(this,W).fill(void 0),B(this,x).fill(void 0),B(this,$)&&B(this,ne)&&(B(this,$).fill(0),B(this,ne).fill(0)),B(this,ge)&&B(this,ge).fill(0),Te(this,S,0),Te(this,q,0),B(this,Z).length=0,Te(this,O,0),Te(this,j,0),B(this,ve)&&B(this,K)){let fe=B(this,K),ie;for(;ie=fe==null?void 0:fe.shift();)(H=B(this,_))==null||H.call(this,...ie)}}},I=new WeakMap,L=new WeakMap,k=new WeakMap,_=new WeakMap,N=new WeakMap,j=new WeakMap,O=new WeakMap,C=new WeakMap,x=new WeakMap,W=new WeakMap,Q=new WeakMap,ee=new WeakMap,S=new WeakMap,q=new WeakMap,Z=new WeakMap,K=new WeakMap,ge=new WeakMap,ne=new WeakMap,$=new WeakMap,be=new WeakMap,re=new WeakMap,ve=new WeakMap,A=new WeakSet,Pn=function(){let w=new c(B(this,I)),P=new c(B(this,I));Te(this,$,w),Te(this,ne,P),Te(this,he,(ie,ye,Se=r.now())=>{if(P[ie]=ye!==0?Se:0,w[ie]=ye,ye!==0&&this.ttlAutopurge){let ke=setTimeout(()=>{B(this,M).call(this,ie)&&this.delete(B(this,x)[ie])},ye+1);ke.unref&&ke.unref()}}),Te(this,ce,ie=>{P[ie]=w[ie]!==0?r.now():0}),Te(this,Ee,(ie,ye)=>{if(w[ye]){let Se=w[ye],ke=P[ye];ie.ttl=Se,ie.start=ke,ie.now=H||fe();let ze=ie.now-ke;ie.remainingTTL=Se-ze}});let H=0,fe=()=>{let ie=r.now();if(this.ttlResolution>0){H=ie;let ye=setTimeout(()=>H=0,this.ttlResolution);ye.unref&&ye.unref()}return ie};this.getRemainingTTL=ie=>{let ye=B(this,C).get(ie);if(ye===void 0)return 0;let Se=w[ye],ke=P[ye];if(Se===0||ke===0)return 1/0;let ze=(H||fe())-ke;return Se-ze},Te(this,M,ie=>w[ie]!==0&&P[ie]!==0&&(H||fe())-P[ie]>w[ie])},ce=new WeakMap,Ee=new WeakMap,he=new WeakMap,M=new WeakMap,E=new WeakSet,zs=function(){let w=new c(B(this,I));Te(this,O,0),Te(this,ge,w),Te(this,le,P=>{Te(this,O,B(this,O)-w[P]),w[P]=0}),Te(this,X,(P,H,fe,ie)=>{if(Ie(this,_e,Ne).call(this,H))return 0;if(!o(fe))if(ie){if(typeof ie!="function")throw new TypeError("sizeCalculation must be a function");if(fe=ie(H,P),!o(fe))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return fe}),Te(this,J,(P,H,fe)=>{if(w[P]=H,B(this,L)){let ie=B(this,L)-w[P];for(;B(this,O)>ie;)Ie(this,G,$r).call(this,!0)}Te(this,O,B(this,O)+w[P]),fe&&(fe.entrySize=H,fe.totalCalculatedSize=B(this,O))})},le=new WeakMap,J=new WeakMap,X=new WeakMap,ue=new WeakSet,$t=function*({allowStale:w=this.allowStale}={}){if(B(this,j))for(let P=B(this,q);!(!Ie(this,D,Bn).call(this,P)||((w||!B(this,M).call(this,P))&&(yield P),P===B(this,S)));)P=B(this,ee)[P]},R=new WeakSet,qt=function*({allowStale:w=this.allowStale}={}){if(B(this,j))for(let P=B(this,S);!(!Ie(this,D,Bn).call(this,P)||((w||!B(this,M).call(this,P))&&(yield P),P===B(this,q)));)P=B(this,Q)[P]},D=new WeakSet,Bn=function(w){return w!==void 0&&B(this,C).get(B(this,x)[w])===w},G=new WeakSet,$r=function(w){var ie,ye;let P=B(this,S),H=B(this,x)[P],fe=B(this,W)[P];return B(this,re)&&Ie(this,_e,Ne).call(this,fe)?fe.__abortController.abort(new Error("evicted")):(B(this,be)||B(this,ve))&&(B(this,be)&&((ie=B(this,k))==null||ie.call(this,fe,H,"evict")),B(this,ve)&&((ye=B(this,K))==null||ye.push([fe,H,"evict"]))),B(this,le).call(this,P),w&&(B(this,x)[P]=void 0,B(this,W)[P]=void 0,B(this,Z).push(P)),B(this,j)===1?(Te(this,S,Te(this,q,0)),B(this,Z).length=0):Te(this,S,B(this,Q)[P]),B(this,C).delete(H),Pr(this,j)._--,P},z=new WeakSet,qr=function(w,P,H,fe){let ie=P===void 0?void 0:B(this,W)[P];if(Ie(this,_e,Ne).call(this,ie))return ie;let ye=new n,{signal:Se}=H;Se==null||Se.addEventListener("abort",()=>ye.abort(Se.reason),{signal:ye.signal});let ke={signal:ye.signal,options:H,context:fe},ze=(Ve,nt=!1)=>{let{aborted:Ce}=ye.signal,qe=H.ignoreFetchAbort&&Ve!==void 0;if(H.status&&(Ce&&!nt?(H.status.fetchAborted=!0,H.status.fetchError=ye.signal.reason,qe&&(H.status.fetchAbortIgnored=!0)):H.status.fetchResolved=!0),Ce&&!qe&&!nt)return Le(ye.signal.reason);let lt=Ke;return B(this,W)[P]===Ke&&(Ve===void 0?lt.__staleWhileFetching?B(this,W)[P]=lt.__staleWhileFetching:this.delete(w):(H.status&&(H.status.fetchUpdated=!0),this.set(w,Ve,ke.options))),Ve},st=Ve=>(H.status&&(H.status.fetchRejected=!0,H.status.fetchError=Ve),Le(Ve)),Le=Ve=>{let{aborted:nt}=ye.signal,Ce=nt&&H.allowStaleOnFetchAbort,qe=Ce||H.allowStaleOnFetchRejection,lt=qe||H.noDeleteOnFetchRejection,et=Ke;if(B(this,W)[P]===Ke&&(!lt||et.__staleWhileFetching===void 0?this.delete(w):Ce||(B(this,W)[P]=et.__staleWhileFetching)),qe)return H.status&&et.__staleWhileFetching!==void 0&&(H.status.returnedStale=!0),et.__staleWhileFetching;if(et.__returned===et)throw Ve},at=(Ve,nt)=>{var qe;let Ce=(qe=B(this,N))==null?void 0:qe.call(this,w,ie,ke);Ce&&Ce instanceof Promise&&Ce.then(lt=>Ve(lt===void 0?void 0:lt),nt),ye.signal.addEventListener("abort",()=>{(!H.ignoreFetchAbort||H.allowStaleOnFetchAbort)&&(Ve(void 0),H.allowStaleOnFetchAbort&&(Ve=lt=>ze(lt,!0)))})};H.status&&(H.status.fetchDispatched=!0);let Ke=new Promise(at).then(ze,st),Ye=Object.assign(Ke,{__abortController:ye,__staleWhileFetching:ie,__returned:void 0});return P===void 0?(this.set(w,Ye,{...ke.options,status:void 0}),P=B(this,C).get(w)):B(this,W)[P]=Ye,Ye},_e=new WeakSet,Ne=function(w){if(!B(this,re))return!1;let P=w;return!!P&&P instanceof Promise&&P.hasOwnProperty("__staleWhileFetching")&&P.__abortController instanceof n},Pe=new WeakSet,Mn=function(w,P){B(this,ee)[P]=w,B(this,Q)[w]=P},u=new WeakSet,kr=function(w){w!==B(this,q)&&(w===B(this,S)?Te(this,S,B(this,Q)[w]):Ie(this,Pe,Mn).call(this,B(this,ee)[w],B(this,Q)[w]),Ie(this,Pe,Mn).call(this,B(this,q),w),Te(this,q,w))},v);e.LRUCache=g}),jt=me(e=>{oe(),ae(),se(),Object.defineProperty(e,"t",{value:!0}),e.ContainerIterator=e.Container=e.Base=void 0;var r=class{constructor(h=0){this.iteratorType=h}equals(h){return this.o===h.o}};e.ContainerIterator=r;var t=class{constructor(){this.i=0}get length(){return this.i}size(){return this.i}empty(){return this.i===0}};e.Base=t;var a=class extends t{};e.Container=a}),fh=me(e=>{oe(),ae(),se(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=jt(),t=class extends r.Base{constructor(h=[]){super(),this.S=[];let n=this;h.forEach(function(i){n.push(i)})}clear(){this.i=0,this.S=[]}push(h){return this.S.push(h),this.i+=1,this.i}pop(){if(this.i!==0)return this.i-=1,this.S.pop()}top(){return this.S[this.i-1]}},a=t;e.default=a}),dh=me(e=>{oe(),ae(),se(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=jt(),t=class extends r.Base{constructor(h=[]){super(),this.j=0,this.q=[];let n=this;h.forEach(function(i){n.push(i)})}clear(){this.q=[],this.i=this.j=0}push(h){let n=this.q.length;if(this.j/n>.5&&this.j+this.i>=n&&n>4096){let i=this.i;for(let s=0;s<i;++s)this.q[s]=this.q[this.j+s];this.j=0,this.q[this.i]=h}else this.q[this.j+this.i]=h;return++this.i}pop(){if(this.i===0)return;let h=this.q[this.j++];return this.i-=1,h}front(){if(this.i!==0)return this.q[this.j]}},a=t;e.default=a}),ph=me(e=>{oe(),ae(),se(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=jt(),t=class extends r.Base{constructor(h=[],n=function(s,o){return s>o?-1:s<o?1:0},i=!0){if(super(),this.v=n,Array.isArray(h))this.C=i?[...h]:h;else{this.C=[];let o=this;h.forEach(function(l){o.C.push(l)})}this.i=this.C.length;let s=this.i>>1;for(let o=this.i-1>>1;o>=0;--o)this.k(o,s)}m(h){let n=this.C[h];for(;h>0;){let i=h-1>>1,s=this.C[i];if(this.v(s,n)<=0)break;this.C[h]=s,h=i}this.C[h]=n}k(h,n){let i=this.C[h];for(;h<n;){let s=h<<1|1,o=s+1,l=this.C[s];if(o<this.i&&this.v(l,this.C[o])>0&&(s=o,l=this.C[o]),this.v(l,i)>=0)break;this.C[h]=l,h=s}this.C[h]=i}clear(){this.i=0,this.C.length=0}push(h){this.C.push(h),this.m(this.i),this.i+=1}pop(){if(this.i===0)return;let h=this.C[0],n=this.C.pop();return this.i-=1,this.i&&(this.C[0]=n,this.k(0,this.i>>1)),h}top(){return this.C[0]}find(h){return this.C.indexOf(h)>=0}remove(h){let n=this.C.indexOf(h);return n<0?!1:(n===0?this.pop():n===this.i-1?(this.C.pop(),this.i-=1):(this.C.splice(n,1,this.C.pop()),this.i-=1,this.m(n),this.k(n,this.i>>1)),!0)}updateItem(h){let n=this.C.indexOf(h);return n<0?!1:(this.m(n),this.k(n,this.i>>1),!0)}toArray(){return[...this.C]}},a=t;e.default=a}),Jn=me(e=>{oe(),ae(),se(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=jt(),t=class extends r.Container{},a=t;e.default=a}),Dt=me(e=>{oe(),ae(),se(),Object.defineProperty(e,"t",{value:!0}),e.throwIteratorAccessError=r;function r(){throw new RangeError("Iterator access denied!")}}),Vs=me(e=>{oe(),ae(),se(),Object.defineProperty(e,"t",{value:!0}),e.RandomIterator=void 0;var r=jt(),t=Dt(),a=class extends r.ContainerIterator{constructor(h,n){super(n),this.o=h,this.iteratorType===0?(this.pre=function(){return this.o===0&&(0,t.throwIteratorAccessError)(),this.o-=1,this},this.next=function(){return this.o===this.container.size()&&(0,t.throwIteratorAccessError)(),this.o+=1,this}):(this.pre=function(){return this.o===this.container.size()-1&&(0,t.throwIteratorAccessError)(),this.o+=1,this},this.next=function(){return this.o===-1&&(0,t.throwIteratorAccessError)(),this.o-=1,this})}get pointer(){return this.container.getElementByPos(this.o)}set pointer(h){this.container.setElementByPos(this.o,h)}};e.RandomIterator=a}),gh=me(e=>{oe(),ae(),se(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=a(Jn()),t=Vs();function a(s){return s&&s.t?s:{default:s}}var h=class Ks extends t.RandomIterator{constructor(o,l,c){super(o,c),this.container=l}copy(){return new Ks(this.o,this.container,this.iteratorType)}},n=class extends r.default{constructor(s=[],o=!0){if(super(),Array.isArray(s))this.J=o?[...s]:s,this.i=s.length;else{this.J=[];let l=this;s.forEach(function(c){l.pushBack(c)})}}clear(){this.i=0,this.J.length=0}begin(){return new h(0,this)}end(){return new h(this.i,this)}rBegin(){return new h(this.i-1,this,1)}rEnd(){return new h(-1,this,1)}front(){return this.J[0]}back(){return this.J[this.i-1]}getElementByPos(s){if(s<0||s>this.i-1)throw new RangeError;return this.J[s]}eraseElementByPos(s){if(s<0||s>this.i-1)throw new RangeError;return this.J.splice(s,1),this.i-=1,this.i}eraseElementByValue(s){let o=0;for(let l=0;l<this.i;++l)this.J[l]!==s&&(this.J[o++]=this.J[l]);return this.i=this.J.length=o,this.i}eraseElementByIterator(s){let o=s.o;return s=s.next(),this.eraseElementByPos(o),s}pushBack(s){return this.J.push(s),this.i+=1,this.i}popBack(){if(this.i!==0)return this.i-=1,this.J.pop()}setElementByPos(s,o){if(s<0||s>this.i-1)throw new RangeError;this.J[s]=o}insert(s,o,l=1){if(s<0||s>this.i)throw new RangeError;return this.J.splice(s,0,...new Array(l).fill(o)),this.i+=l,this.i}find(s){for(let o=0;o<this.i;++o)if(this.J[o]===s)return new h(o,this);return this.end()}reverse(){this.J.reverse()}unique(){let s=1;for(let o=1;o<this.i;++o)this.J[o]!==this.J[o-1]&&(this.J[s++]=this.J[o]);return this.i=this.J.length=s,this.i}sort(s){this.J.sort(s)}forEach(s){for(let o=0;o<this.i;++o)s(this.J[o],o,this)}[Symbol.iterator](){return(function*(){yield*this.J}).bind(this)()}},i=n;e.default=i}),mh=me(e=>{oe(),ae(),se(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=h(Jn()),t=jt(),a=Dt();function h(o){return o&&o.t?o:{default:o}}var n=class Ys extends t.ContainerIterator{constructor(l,c,d,g){super(g),this.o=l,this.h=c,this.container=d,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,a.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,a.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,a.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,a.throwIteratorAccessError)(),this.o=this.o.L,this})}get pointer(){return this.o===this.h&&(0,a.throwIteratorAccessError)(),this.o.l}set pointer(l){this.o===this.h&&(0,a.throwIteratorAccessError)(),this.o.l=l}copy(){return new Ys(this.o,this.h,this.container,this.iteratorType)}},i=class extends r.default{constructor(o=[]){super(),this.h={},this.p=this._=this.h.L=this.h.B=this.h;let l=this;o.forEach(function(c){l.pushBack(c)})}V(o){let{L:l,B:c}=o;l.B=c,c.L=l,o===this.p&&(this.p=c),o===this._&&(this._=l),this.i-=1}G(o,l){let c=l.B,d={l:o,L:l,B:c};l.B=d,c.L=d,l===this.h&&(this.p=d),c===this.h&&(this._=d),this.i+=1}clear(){this.i=0,this.p=this._=this.h.L=this.h.B=this.h}begin(){return new n(this.p,this.h,this)}end(){return new n(this.h,this.h,this)}rBegin(){return new n(this._,this.h,this,1)}rEnd(){return new n(this.h,this.h,this,1)}front(){return this.p.l}back(){return this._.l}getElementByPos(o){if(o<0||o>this.i-1)throw new RangeError;let l=this.p;for(;o--;)l=l.B;return l.l}eraseElementByPos(o){if(o<0||o>this.i-1)throw new RangeError;let l=this.p;for(;o--;)l=l.B;return this.V(l),this.i}eraseElementByValue(o){let l=this.p;for(;l!==this.h;)l.l===o&&this.V(l),l=l.B;return this.i}eraseElementByIterator(o){let l=o.o;return l===this.h&&(0,a.throwIteratorAccessError)(),o=o.next(),this.V(l),o}pushBack(o){return this.G(o,this._),this.i}popBack(){if(this.i===0)return;let o=this._.l;return this.V(this._),o}pushFront(o){return this.G(o,this.h),this.i}popFront(){if(this.i===0)return;let o=this.p.l;return this.V(this.p),o}setElementByPos(o,l){if(o<0||o>this.i-1)throw new RangeError;let c=this.p;for(;o--;)c=c.B;c.l=l}insert(o,l,c=1){if(o<0||o>this.i)throw new RangeError;if(c<=0)return this.i;if(o===0)for(;c--;)this.pushFront(l);else if(o===this.i)for(;c--;)this.pushBack(l);else{let d=this.p;for(let m=1;m<o;++m)d=d.B;let g=d.B;for(this.i+=c;c--;)d.B={l,L:d},d.B.L=d,d=d.B;d.B=g,g.L=d}return this.i}find(o){let l=this.p;for(;l!==this.h;){if(l.l===o)return new n(l,this.h,this);l=l.B}return this.end()}reverse(){if(this.i<=1)return;let o=this.p,l=this._,c=0;for(;c<<1<this.i;){let d=o.l;o.l=l.l,l.l=d,o=o.B,l=l.L,c+=1}}unique(){if(this.i<=1)return this.i;let o=this.p;for(;o!==this.h;){let l=o;for(;l.B!==this.h&&l.l===l.B.l;)l=l.B,this.i-=1;o.B=l.B,o.B.L=o,o=o.B}return this.i}sort(o){if(this.i<=1)return;let l=[];this.forEach(function(d){l.push(d)}),l.sort(o);let c=this.p;l.forEach(function(d){c.l=d,c=c.B})}merge(o){let l=this;if(this.i===0)o.forEach(function(c){l.pushBack(c)});else{let c=this.p;o.forEach(function(d){for(;c!==l.h&&c.l<=d;)c=c.B;l.G(d,c.L)})}return this.i}forEach(o){let l=this.p,c=0;for(;l!==this.h;)o(l.l,c++,this),l=l.B}[Symbol.iterator](){return(function*(){if(this.i===0)return;let o=this.p;for(;o!==this.h;)yield o.l,o=o.B}).bind(this)()}},s=i;e.default=s}),bh=me(e=>{oe(),ae(),se(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=a(Jn()),t=Vs();function a(s){return s&&s.t?s:{default:s}}var h=class Gs extends t.RandomIterator{constructor(o,l,c){super(o,c),this.container=l}copy(){return new Gs(this.o,this.container,this.iteratorType)}},n=class extends r.default{constructor(s=[],o=4096){super(),this.j=0,this.D=0,this.R=0,this.N=0,this.P=0,this.A=[];let l=(()=>{if(typeof s.length=="number")return s.length;if(typeof s.size=="number")return s.size;if(typeof s.size=="function")return s.size();throw new TypeError("Cannot get the length or size of the container")})();this.F=o,this.P=Math.max(Math.ceil(l/this.F),1);for(let g=0;g<this.P;++g)this.A.push(new Array(this.F));let c=Math.ceil(l/this.F);this.j=this.R=(this.P>>1)-(c>>1),this.D=this.N=this.F-l%this.F>>1;let d=this;s.forEach(function(g){d.pushBack(g)})}T(){let s=[],o=Math.max(this.P>>1,1);for(let l=0;l<o;++l)s[l]=new Array(this.F);for(let l=this.j;l<this.P;++l)s[s.length]=this.A[l];for(let l=0;l<this.R;++l)s[s.length]=this.A[l];s[s.length]=[...this.A[this.R]],this.j=o,this.R=s.length-1;for(let l=0;l<o;++l)s[s.length]=new Array(this.F);this.A=s,this.P=s.length}O(s){let o=this.D+s+1,l=o%this.F,c=l-1,d=this.j+(o-l)/this.F;return l===0&&(d-=1),d%=this.P,c<0&&(c+=this.F),{curNodeBucketIndex:d,curNodePointerIndex:c}}clear(){this.A=[new Array(this.F)],this.P=1,this.j=this.R=this.i=0,this.D=this.N=this.F>>1}begin(){return new h(0,this)}end(){return new h(this.i,this)}rBegin(){return new h(this.i-1,this,1)}rEnd(){return new h(-1,this,1)}front(){if(this.i!==0)return this.A[this.j][this.D]}back(){if(this.i!==0)return this.A[this.R][this.N]}pushBack(s){return this.i&&(this.N<this.F-1?this.N+=1:this.R<this.P-1?(this.R+=1,this.N=0):(this.R=0,this.N=0),this.R===this.j&&this.N===this.D&&this.T()),this.i+=1,this.A[this.R][this.N]=s,this.i}popBack(){if(this.i===0)return;let s=this.A[this.R][this.N];return this.i!==1&&(this.N>0?this.N-=1:this.R>0?(this.R-=1,this.N=this.F-1):(this.R=this.P-1,this.N=this.F-1)),this.i-=1,s}pushFront(s){return this.i&&(this.D>0?this.D-=1:this.j>0?(this.j-=1,this.D=this.F-1):(this.j=this.P-1,this.D=this.F-1),this.j===this.R&&this.D===this.N&&this.T()),this.i+=1,this.A[this.j][this.D]=s,this.i}popFront(){if(this.i===0)return;let s=this.A[this.j][this.D];return this.i!==1&&(this.D<this.F-1?this.D+=1:this.j<this.P-1?(this.j+=1,this.D=0):(this.j=0,this.D=0)),this.i-=1,s}getElementByPos(s){if(s<0||s>this.i-1)throw new RangeError;let{curNodeBucketIndex:o,curNodePointerIndex:l}=this.O(s);return this.A[o][l]}setElementByPos(s,o){if(s<0||s>this.i-1)throw new RangeError;let{curNodeBucketIndex:l,curNodePointerIndex:c}=this.O(s);this.A[l][c]=o}insert(s,o,l=1){if(s<0||s>this.i)throw new RangeError;if(s===0)for(;l--;)this.pushFront(o);else if(s===this.i)for(;l--;)this.pushBack(o);else{let c=[];for(let d=s;d<this.i;++d)c.push(this.getElementByPos(d));this.cut(s-1);for(let d=0;d<l;++d)this.pushBack(o);for(let d=0;d<c.length;++d)this.pushBack(c[d])}return this.i}cut(s){if(s<0)return this.clear(),0;let{curNodeBucketIndex:o,curNodePointerIndex:l}=this.O(s);return this.R=o,this.N=l,this.i=s+1,this.i}eraseElementByPos(s){if(s<0||s>this.i-1)throw new RangeError;if(s===0)this.popFront();else if(s===this.i-1)this.popBack();else{let o=[];for(let c=s+1;c<this.i;++c)o.push(this.getElementByPos(c));this.cut(s),this.popBack();let l=this;o.forEach(function(c){l.pushBack(c)})}return this.i}eraseElementByValue(s){if(this.i===0)return 0;let o=[];for(let c=0;c<this.i;++c){let d=this.getElementByPos(c);d!==s&&o.push(d)}let l=o.length;for(let c=0;c<l;++c)this.setElementByPos(c,o[c]);return this.cut(l-1)}eraseElementByIterator(s){let o=s.o;return this.eraseElementByPos(o),s=s.next(),s}find(s){for(let o=0;o<this.i;++o)if(this.getElementByPos(o)===s)return new h(o,this);return this.end()}reverse(){let s=0,o=this.i-1;for(;s<o;){let l=this.getElementByPos(s);this.setElementByPos(s,this.getElementByPos(o)),this.setElementByPos(o,l),s+=1,o-=1}}unique(){if(this.i<=1)return this.i;let s=1,o=this.getElementByPos(0);for(let l=1;l<this.i;++l){let c=this.getElementByPos(l);c!==o&&(o=c,this.setElementByPos(s++,c))}for(;this.i>s;)this.popBack();return this.i}sort(s){let o=[];for(let l=0;l<this.i;++l)o.push(this.getElementByPos(l));o.sort(s);for(let l=0;l<this.i;++l)this.setElementByPos(l,o[l])}shrinkToFit(){if(this.i===0)return;let s=[];this.forEach(function(o){s.push(o)}),this.P=Math.max(Math.ceil(this.i/this.F),1),this.i=this.j=this.R=this.D=this.N=0,this.A=[];for(let o=0;o<this.P;++o)this.A.push(new Array(this.F));for(let o=0;o<s.length;++o)this.pushBack(s[o])}forEach(s){for(let o=0;o<this.i;++o)s(this.getElementByPos(o),o,this)}[Symbol.iterator](){return(function*(){for(let s=0;s<this.i;++s)yield this.getElementByPos(s)}).bind(this)()}},i=n;e.default=i}),yh=me(e=>{oe(),ae(),se(),Object.defineProperty(e,"t",{value:!0}),e.TreeNodeEnableIndex=e.TreeNode=void 0;var r=class{constructor(a,h){this.ee=1,this.u=void 0,this.l=void 0,this.U=void 0,this.W=void 0,this.tt=void 0,this.u=a,this.l=h}L(){let a=this;if(a.ee===1&&a.tt.tt===a)a=a.W;else if(a.U)for(a=a.U;a.W;)a=a.W;else{let h=a.tt;for(;h.U===a;)a=h,h=a.tt;a=h}return a}B(){let a=this;if(a.W){for(a=a.W;a.U;)a=a.U;return a}else{let h=a.tt;for(;h.W===a;)a=h,h=a.tt;return a.W!==h?h:a}}te(){let a=this.tt,h=this.W,n=h.U;return a.tt===this?a.tt=h:a.U===this?a.U=h:a.W=h,h.tt=a,h.U=this,this.tt=h,this.W=n,n&&(n.tt=this),h}se(){let a=this.tt,h=this.U,n=h.W;return a.tt===this?a.tt=h:a.U===this?a.U=h:a.W=h,h.tt=a,h.W=this,this.tt=h,this.U=n,n&&(n.tt=this),h}};e.TreeNode=r;var t=class extends r{constructor(){super(...arguments),this.rt=1}te(){let a=super.te();return this.ie(),a.ie(),a}se(){let a=super.se();return this.ie(),a.ie(),a}ie(){this.rt=1,this.U&&(this.rt+=this.U.rt),this.W&&(this.rt+=this.W.rt)}};e.TreeNodeEnableIndex=t}),Qs=me(e=>{oe(),ae(),se(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=yh(),t=jt(),a=Dt(),h=class extends t.Container{constructor(i=function(o,l){return o<l?-1:o>l?1:0},s=!1){super(),this.Y=void 0,this.v=i,s?(this.re=r.TreeNodeEnableIndex,this.M=function(o,l,c){let d=this.ne(o,l,c);if(d){let g=d.tt;for(;g!==this.h;)g.rt+=1,g=g.tt;let m=this.he(d);if(m){let{parentNode:b,grandParent:y,curNode:I}=m;b.ie(),y.ie(),I.ie()}}return this.i},this.V=function(o){let l=this.fe(o);for(;l!==this.h;)l.rt-=1,l=l.tt}):(this.re=r.TreeNode,this.M=function(o,l,c){let d=this.ne(o,l,c);return d&&this.he(d),this.i},this.V=this.fe),this.h=new this.re}X(i,s){let o=this.h;for(;i;){let l=this.v(i.u,s);if(l<0)i=i.W;else if(l>0)o=i,i=i.U;else return i}return o}Z(i,s){let o=this.h;for(;i;)this.v(i.u,s)<=0?i=i.W:(o=i,i=i.U);return o}$(i,s){let o=this.h;for(;i;){let l=this.v(i.u,s);if(l<0)o=i,i=i.W;else if(l>0)i=i.U;else return i}return o}rr(i,s){let o=this.h;for(;i;)this.v(i.u,s)<0?(o=i,i=i.W):i=i.U;return o}ue(i){for(;;){let s=i.tt;if(s===this.h)return;if(i.ee===1){i.ee=0;return}if(i===s.U){let o=s.W;if(o.ee===1)o.ee=0,s.ee=1,s===this.Y?this.Y=s.te():s.te();else if(o.W&&o.W.ee===1){o.ee=s.ee,s.ee=0,o.W.ee=0,s===this.Y?this.Y=s.te():s.te();return}else o.U&&o.U.ee===1?(o.ee=1,o.U.ee=0,o.se()):(o.ee=1,i=s)}else{let o=s.U;if(o.ee===1)o.ee=0,s.ee=1,s===this.Y?this.Y=s.se():s.se();else if(o.U&&o.U.ee===1){o.ee=s.ee,s.ee=0,o.U.ee=0,s===this.Y?this.Y=s.se():s.se();return}else o.W&&o.W.ee===1?(o.ee=1,o.W.ee=0,o.te()):(o.ee=1,i=s)}}}fe(i){if(this.i===1)return this.clear(),this.h;let s=i;for(;s.U||s.W;){if(s.W)for(s=s.W;s.U;)s=s.U;else s=s.U;[i.u,s.u]=[s.u,i.u],[i.l,s.l]=[s.l,i.l],i=s}this.h.U===s?this.h.U=s.tt:this.h.W===s&&(this.h.W=s.tt),this.ue(s);let o=s.tt;return s===o.U?o.U=void 0:o.W=void 0,this.i-=1,this.Y.ee=0,o}oe(i,s){return i===void 0?!1:this.oe(i.U,s)||s(i)?!0:this.oe(i.W,s)}he(i){for(;;){let s=i.tt;if(s.ee===0)return;let o=s.tt;if(s===o.U){let l=o.W;if(l&&l.ee===1){if(l.ee=s.ee=0,o===this.Y)return;o.ee=1,i=o;continue}else if(i===s.W){if(i.ee=0,i.U&&(i.U.tt=s),i.W&&(i.W.tt=o),s.W=i.U,o.U=i.W,i.U=s,i.W=o,o===this.Y)this.Y=i,this.h.tt=i;else{let c=o.tt;c.U===o?c.U=i:c.W=i}return i.tt=o.tt,s.tt=i,o.tt=i,o.ee=1,{parentNode:s,grandParent:o,curNode:i}}else s.ee=0,o===this.Y?this.Y=o.se():o.se(),o.ee=1}else{let l=o.U;if(l&&l.ee===1){if(l.ee=s.ee=0,o===this.Y)return;o.ee=1,i=o;continue}else if(i===s.U){if(i.ee=0,i.U&&(i.U.tt=o),i.W&&(i.W.tt=s),o.W=i.U,s.U=i.W,i.U=o,i.W=s,o===this.Y)this.Y=i,this.h.tt=i;else{let c=o.tt;c.U===o?c.U=i:c.W=i}return i.tt=o.tt,s.tt=i,o.tt=i,o.ee=1,{parentNode:s,grandParent:o,curNode:i}}else s.ee=0,o===this.Y?this.Y=o.te():o.te(),o.ee=1}return}}ne(i,s,o){if(this.Y===void 0){this.i+=1,this.Y=new this.re(i,s),this.Y.ee=0,this.Y.tt=this.h,this.h.tt=this.Y,this.h.U=this.Y,this.h.W=this.Y;return}let l,c=this.h.U,d=this.v(c.u,i);if(d===0){c.l=s;return}else if(d>0)c.U=new this.re(i,s),c.U.tt=c,l=c.U,this.h.U=l;else{let g=this.h.W,m=this.v(g.u,i);if(m===0){g.l=s;return}else if(m<0)g.W=new this.re(i,s),g.W.tt=g,l=g.W,this.h.W=l;else{if(o!==void 0){let b=o.o;if(b!==this.h){let y=this.v(b.u,i);if(y===0){b.l=s;return}else if(y>0){let I=b.L(),L=this.v(I.u,i);if(L===0){I.l=s;return}else L<0&&(l=new this.re(i,s),I.W===void 0?(I.W=l,l.tt=I):(b.U=l,l.tt=b))}}}if(l===void 0)for(l=this.Y;;){let b=this.v(l.u,i);if(b>0){if(l.U===void 0){l.U=new this.re(i,s),l.U.tt=l,l=l.U;break}l=l.U}else if(b<0){if(l.W===void 0){l.W=new this.re(i,s),l.W.tt=l,l=l.W;break}l=l.W}else{l.l=s;return}}}}return this.i+=1,l}I(i,s){for(;i;){let o=this.v(i.u,s);if(o<0)i=i.W;else if(o>0)i=i.U;else return i}return i||this.h}clear(){this.i=0,this.Y=void 0,this.h.tt=void 0,this.h.U=this.h.W=void 0}updateKeyByIterator(i,s){let o=i.o;if(o===this.h&&(0,a.throwIteratorAccessError)(),this.i===1)return o.u=s,!0;if(o===this.h.U)return this.v(o.B().u,s)>0?(o.u=s,!0):!1;if(o===this.h.W)return this.v(o.L().u,s)<0?(o.u=s,!0):!1;let l=o.L().u;if(this.v(l,s)>=0)return!1;let c=o.B().u;return this.v(c,s)<=0?!1:(o.u=s,!0)}eraseElementByPos(i){if(i<0||i>this.i-1)throw new RangeError;let s=0,o=this;return this.oe(this.Y,function(l){return i===s?(o.V(l),!0):(s+=1,!1)}),this.i}eraseElementByKey(i){if(this.i===0)return!1;let s=this.I(this.Y,i);return s===this.h?!1:(this.V(s),!0)}eraseElementByIterator(i){let s=i.o;s===this.h&&(0,a.throwIteratorAccessError)();let o=s.W===void 0;return i.iteratorType===0?o&&i.next():(!o||s.U===void 0)&&i.next(),this.V(s),i}forEach(i){let s=0;for(let o of this)i(o,s++,this)}getElementByPos(i){if(i<0||i>this.i-1)throw new RangeError;let s,o=0;for(let l of this){if(o===i){s=l;break}o+=1}return s}getHeight(){if(this.i===0)return 0;let i=function(s){return s?Math.max(i(s.U),i(s.W))+1:0};return i(this.Y)}},n=h;e.default=n}),Xs=me(e=>{oe(),ae(),se(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=jt(),t=Dt(),a=class extends r.ContainerIterator{constructor(n,i,s){super(s),this.o=n,this.h=i,this.iteratorType===0?(this.pre=function(){return this.o===this.h.U&&(0,t.throwIteratorAccessError)(),this.o=this.o.L(),this},this.next=function(){return this.o===this.h&&(0,t.throwIteratorAccessError)(),this.o=this.o.B(),this}):(this.pre=function(){return this.o===this.h.W&&(0,t.throwIteratorAccessError)(),this.o=this.o.B(),this},this.next=function(){return this.o===this.h&&(0,t.throwIteratorAccessError)(),this.o=this.o.L(),this})}get index(){let n=this.o,i=this.h.tt;if(n===this.h)return i?i.rt-1:0;let s=0;for(n.U&&(s+=n.U.rt);n!==i;){let o=n.tt;n===o.W&&(s+=1,o.U&&(s+=o.U.rt)),n=o}return s}},h=a;e.default=h}),wh=me(e=>{oe(),ae(),se(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=h(Qs()),t=h(Xs()),a=Dt();function h(o){return o&&o.t?o:{default:o}}var n=class Js extends t.default{constructor(l,c,d,g){super(l,c,g),this.container=d}get pointer(){return this.o===this.h&&(0,a.throwIteratorAccessError)(),this.o.u}copy(){return new Js(this.o,this.h,this.container,this.iteratorType)}},i=class extends r.default{constructor(o=[],l,c){super(l,c);let d=this;o.forEach(function(g){d.insert(g)})}*K(o){o!==void 0&&(yield*this.K(o.U),yield o.u,yield*this.K(o.W))}begin(){return new n(this.h.U||this.h,this.h,this)}end(){return new n(this.h,this.h,this)}rBegin(){return new n(this.h.W||this.h,this.h,this,1)}rEnd(){return new n(this.h,this.h,this,1)}front(){return this.h.U?this.h.U.u:void 0}back(){return this.h.W?this.h.W.u:void 0}insert(o,l){return this.M(o,void 0,l)}find(o){let l=this.I(this.Y,o);return new n(l,this.h,this)}lowerBound(o){let l=this.X(this.Y,o);return new n(l,this.h,this)}upperBound(o){let l=this.Z(this.Y,o);return new n(l,this.h,this)}reverseLowerBound(o){let l=this.$(this.Y,o);return new n(l,this.h,this)}reverseUpperBound(o){let l=this.rr(this.Y,o);return new n(l,this.h,this)}union(o){let l=this;return o.forEach(function(c){l.insert(c)}),this.i}[Symbol.iterator](){return this.K(this.Y)}},s=i;e.default=s}),vh=me(e=>{oe(),ae(),se(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=h(Qs()),t=h(Xs()),a=Dt();function h(o){return o&&o.t?o:{default:o}}var n=class Zs extends t.default{constructor(l,c,d,g){super(l,c,g),this.container=d}get pointer(){this.o===this.h&&(0,a.throwIteratorAccessError)();let l=this;return new Proxy([],{get(c,d){if(d==="0")return l.o.u;if(d==="1")return l.o.l},set(c,d,g){if(d!=="1")throw new TypeError("props must be 1");return l.o.l=g,!0}})}copy(){return new Zs(this.o,this.h,this.container,this.iteratorType)}},i=class extends r.default{constructor(o=[],l,c){super(l,c);let d=this;o.forEach(function(g){d.setElement(g[0],g[1])})}*K(o){o!==void 0&&(yield*this.K(o.U),yield[o.u,o.l],yield*this.K(o.W))}begin(){return new n(this.h.U||this.h,this.h,this)}end(){return new n(this.h,this.h,this)}rBegin(){return new n(this.h.W||this.h,this.h,this,1)}rEnd(){return new n(this.h,this.h,this,1)}front(){if(this.i===0)return;let o=this.h.U;return[o.u,o.l]}back(){if(this.i===0)return;let o=this.h.W;return[o.u,o.l]}lowerBound(o){let l=this.X(this.Y,o);return new n(l,this.h,this)}upperBound(o){let l=this.Z(this.Y,o);return new n(l,this.h,this)}reverseLowerBound(o){let l=this.$(this.Y,o);return new n(l,this.h,this)}reverseUpperBound(o){let l=this.rr(this.Y,o);return new n(l,this.h,this)}setElement(o,l,c){return this.M(o,l,c)}find(o){let l=this.I(this.Y,o);return new n(l,this.h,this)}getElementByKey(o){return this.I(this.Y,o).l}union(o){let l=this;return o.forEach(function(c){l.setElement(c[0],c[1])}),this.i}[Symbol.iterator](){return this.K(this.Y)}},s=i;e.default=s}),ea=me(e=>{oe(),ae(),se(),Object.defineProperty(e,"t",{value:!0}),e.default=r;function r(t){let a=typeof t;return a==="object"&&t!==null||a==="function"}}),ta=me(e=>{oe(),ae(),se(),Object.defineProperty(e,"t",{value:!0}),e.HashContainerIterator=e.HashContainer=void 0;var r=jt(),t=h(ea()),a=Dt();function h(s){return s&&s.t?s:{default:s}}var n=class extends r.ContainerIterator{constructor(s,o,l){super(l),this.o=s,this.h=o,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,a.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,a.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,a.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,a.throwIteratorAccessError)(),this.o=this.o.L,this})}};e.HashContainerIterator=n;var i=class extends r.Container{constructor(){super(),this.H=[],this.g={},this.HASH_TAG=Symbol("@@HASH_TAG"),Object.setPrototypeOf(this.g,null),this.h={},this.h.L=this.h.B=this.p=this._=this.h}V(s){let{L:o,B:l}=s;o.B=l,l.L=o,s===this.p&&(this.p=l),s===this._&&(this._=o),this.i-=1}M(s,o,l){l===void 0&&(l=(0,t.default)(s));let c;if(l){let d=s[this.HASH_TAG];if(d!==void 0)return this.H[d].l=o,this.i;Object.defineProperty(s,this.HASH_TAG,{value:this.H.length,configurable:!0}),c={u:s,l:o,L:this._,B:this.h},this.H.push(c)}else{let d=this.g[s];if(d)return d.l=o,this.i;c={u:s,l:o,L:this._,B:this.h},this.g[s]=c}return this.i===0?(this.p=c,this.h.B=c):this._.B=c,this._=c,this.h.L=c,++this.i}I(s,o){if(o===void 0&&(o=(0,t.default)(s)),o){let l=s[this.HASH_TAG];return l===void 0?this.h:this.H[l]}else return this.g[s]||this.h}clear(){let s=this.HASH_TAG;this.H.forEach(function(o){delete o.u[s]}),this.H=[],this.g={},Object.setPrototypeOf(this.g,null),this.i=0,this.p=this._=this.h.L=this.h.B=this.h}eraseElementByKey(s,o){let l;if(o===void 0&&(o=(0,t.default)(s)),o){let c=s[this.HASH_TAG];if(c===void 0)return!1;delete s[this.HASH_TAG],l=this.H[c],delete this.H[c]}else{if(l=this.g[s],l===void 0)return!1;delete this.g[s]}return this.V(l),!0}eraseElementByIterator(s){let o=s.o;return o===this.h&&(0,a.throwIteratorAccessError)(),this.V(o),s.next()}eraseElementByPos(s){if(s<0||s>this.i-1)throw new RangeError;let o=this.p;for(;s--;)o=o.B;return this.V(o),this.i}};e.HashContainer=i}),_h=me(e=>{oe(),ae(),se(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=ta(),t=Dt(),a=class ra extends r.HashContainerIterator{constructor(s,o,l,c){super(s,o,c),this.container=l}get pointer(){return this.o===this.h&&(0,t.throwIteratorAccessError)(),this.o.u}copy(){return new ra(this.o,this.h,this.container,this.iteratorType)}},h=class extends r.HashContainer{constructor(i=[]){super();let s=this;i.forEach(function(o){s.insert(o)})}begin(){return new a(this.p,this.h,this)}end(){return new a(this.h,this.h,this)}rBegin(){return new a(this._,this.h,this,1)}rEnd(){return new a(this.h,this.h,this,1)}front(){return this.p.u}back(){return this._.u}insert(i,s){return this.M(i,void 0,s)}getElementByPos(i){if(i<0||i>this.i-1)throw new RangeError;let s=this.p;for(;i--;)s=s.B;return s.u}find(i,s){let o=this.I(i,s);return new a(o,this.h,this)}forEach(i){let s=0,o=this.p;for(;o!==this.h;)i(o.u,s++,this),o=o.B}[Symbol.iterator](){return(function*(){let i=this.p;for(;i!==this.h;)yield i.u,i=i.B}).bind(this)()}},n=h;e.default=n}),Eh=me(e=>{oe(),ae(),se(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var r=ta(),t=h(ea()),a=Dt();function h(o){return o&&o.t?o:{default:o}}var n=class ia extends r.HashContainerIterator{constructor(l,c,d,g){super(l,c,g),this.container=d}get pointer(){this.o===this.h&&(0,a.throwIteratorAccessError)();let l=this;return new Proxy([],{get(c,d){if(d==="0")return l.o.u;if(d==="1")return l.o.l},set(c,d,g){if(d!=="1")throw new TypeError("props must be 1");return l.o.l=g,!0}})}copy(){return new ia(this.o,this.h,this.container,this.iteratorType)}},i=class extends r.HashContainer{constructor(o=[]){super();let l=this;o.forEach(function(c){l.setElement(c[0],c[1])})}begin(){return new n(this.p,this.h,this)}end(){return new n(this.h,this.h,this)}rBegin(){return new n(this._,this.h,this,1)}rEnd(){return new n(this.h,this.h,this,1)}front(){if(this.i!==0)return[this.p.u,this.p.l]}back(){if(this.i!==0)return[this._.u,this._.l]}setElement(o,l,c){return this.M(o,l,c)}getElementByKey(o,l){if(l===void 0&&(l=(0,t.default)(o)),l){let d=o[this.HASH_TAG];return d!==void 0?this.H[d].l:void 0}let c=this.g[o];return c?c.l:void 0}getElementByPos(o){if(o<0||o>this.i-1)throw new RangeError;let l=this.p;for(;o--;)l=l.B;return[l.u,l.l]}find(o,l){let c=this.I(o,l);return new n(c,this.h,this)}forEach(o){let l=0,c=this.p;for(;c!==this.h;)o([c.u,c.l],l++,this),c=c.B}[Symbol.iterator](){return(function*(){let o=this.p;for(;o!==this.h;)yield[o.u,o.l],o=o.B}).bind(this)()}},s=i;e.default=s}),Sh=me(e=>{oe(),ae(),se(),Object.defineProperty(e,"t",{value:!0}),Object.defineProperty(e,"Deque",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"HashMap",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"HashSet",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"LinkList",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"OrderedMap",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"OrderedSet",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"PriorityQueue",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"Queue",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"Stack",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"Vector",{enumerable:!0,get:function(){return h.default}});var r=d(fh()),t=d(dh()),a=d(ph()),h=d(gh()),n=d(mh()),i=d(bh()),s=d(wh()),o=d(vh()),l=d(_h()),c=d(Eh());function d(g){return g&&g.t?g:{default:g}}}),Ah=me((e,r)=>{oe(),ae(),se();var t=Sh().OrderedSet,a=Ut()("number-allocator:trace"),h=Ut()("number-allocator:error");function n(s,o){this.low=s,this.high=o}n.prototype.equals=function(s){return this.low===s.low&&this.high===s.high},n.prototype.compare=function(s){return this.low<s.low&&this.high<s.low?-1:s.low<this.low&&s.high<this.low?1:0};function i(s,o){if(!(this instanceof i))return new i(s,o);this.min=s,this.max=o,this.ss=new t([],(l,c)=>l.compare(c)),a("Create"),this.clear()}i.prototype.firstVacant=function(){return this.ss.size()===0?null:this.ss.front().low},i.prototype.alloc=function(){if(this.ss.size()===0)return a("alloc():empty"),null;let s=this.ss.begin(),o=s.pointer.low,l=s.pointer.high,c=o;return c+1<=l?this.ss.updateKeyByIterator(s,new n(o+1,l)):this.ss.eraseElementByPos(0),a("alloc():"+c),c},i.prototype.use=function(s){let o=new n(s,s),l=this.ss.lowerBound(o);if(!l.equals(this.ss.end())){let c=l.pointer.low,d=l.pointer.high;return l.pointer.equals(o)?(this.ss.eraseElementByIterator(l),a("use():"+s),!0):c>s?!1:c===s?(this.ss.updateKeyByIterator(l,new n(c+1,d)),a("use():"+s),!0):d===s?(this.ss.updateKeyByIterator(l,new n(c,d-1)),a("use():"+s),!0):(this.ss.updateKeyByIterator(l,new n(s+1,d)),this.ss.insert(new n(c,s-1)),a("use():"+s),!0)}return a("use():failed"),!1},i.prototype.free=function(s){if(s<this.min||s>this.max){h("free():"+s+" is out of range");return}let o=new n(s,s),l=this.ss.upperBound(o);if(l.equals(this.ss.end())){if(l.equals(this.ss.begin())){this.ss.insert(o);return}l.pre();let c=l.pointer.high;l.pointer.high+1===s?this.ss.updateKeyByIterator(l,new n(c,s)):this.ss.insert(o)}else if(l.equals(this.ss.begin()))if(s+1===l.pointer.low){let c=l.pointer.high;this.ss.updateKeyByIterator(l,new n(s,c))}else this.ss.insert(o);else{let c=l.pointer.low,d=l.pointer.high;l.pre();let g=l.pointer.low;l.pointer.high+1===s?s+1===c?(this.ss.eraseElementByIterator(l),this.ss.updateKeyByIterator(l,new n(g,d))):this.ss.updateKeyByIterator(l,new n(g,s)):s+1===c?(this.ss.eraseElementByIterator(l.next()),this.ss.insert(new n(s,d))):this.ss.insert(o)}a("free():"+s)},i.prototype.clear=function(){a("clear()"),this.ss.clear(),this.ss.insert(new n(this.min,this.max))},i.prototype.intervalCount=function(){return this.ss.size()},i.prototype.dump=function(){console.log("length:"+this.ss.size());for(let s of this.ss)console.log(s)},r.exports=i}),na=me((e,r)=>{oe(),ae(),se();var t=Ah();r.exports.NumberAllocator=t}),Ih=me(e=>{oe(),ae(),se(),Object.defineProperty(e,"__esModule",{value:!0});var r=ch(),t=na(),a=class{constructor(h){h>0&&(this.aliasToTopic=new r.LRUCache({max:h}),this.topicToAlias={},this.numberAllocator=new t.NumberAllocator(1,h),this.max=h,this.length=0)}put(h,n){if(n===0||n>this.max)return!1;let i=this.aliasToTopic.get(n);return i&&delete this.topicToAlias[i],this.aliasToTopic.set(n,h),this.topicToAlias[h]=n,this.numberAllocator.use(n),this.length=this.aliasToTopic.size,!0}getTopicByAlias(h){return this.aliasToTopic.get(h)}getAliasByTopic(h){let n=this.topicToAlias[h];return typeof n<"u"&&this.aliasToTopic.get(n),n}clear(){this.aliasToTopic.clear(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0}getLruAlias(){return this.numberAllocator.firstVacant()||[...this.aliasToTopic.keys()][this.aliasToTopic.size-1]}};e.default=a}),Th=me(e=>{oe(),ae(),se();var r=e&&e.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(e,"__esModule",{value:!0});var t=ri(),a=r(Ih()),h=wr(),n=(i,s)=>{i.log("_handleConnack");let{options:o}=i,l=o.protocolVersion===5?s.reasonCode:s.returnCode;if(clearTimeout(i.connackTimer),delete i.topicAliasSend,s.properties){if(s.properties.topicAliasMaximum){if(s.properties.topicAliasMaximum>65535){i.emit("error",new Error("topicAliasMaximum from broker is out of range"));return}s.properties.topicAliasMaximum>0&&(i.topicAliasSend=new a.default(s.properties.topicAliasMaximum))}s.properties.serverKeepAlive&&o.keepalive&&(o.keepalive=s.properties.serverKeepAlive),s.properties.maximumPacketSize&&(o.properties||(o.properties={}),o.properties.maximumPacketSize=s.properties.maximumPacketSize)}if(l===0)i.reconnecting=!1,i._onConnect(s);else if(l>0){let c=new h.ErrorWithReasonCode(`Connection refused: ${t.ReasonCodes[l]}`,l);i.emit("error",c),i.options.reconnectOnConnackError&&i._cleanUp(!0)}};e.default=n}),kh=me(e=>{oe(),ae(),se(),Object.defineProperty(e,"__esModule",{value:!0});var r=(t,a,h)=>{t.log("handling pubrel packet");let n=typeof h<"u"?h:t.noop,{messageId:i}=a,s={cmd:"pubcomp",messageId:i};t.incomingStore.get(a,(o,l)=>{o?t._sendPacket(s,n):(t.emit("message",l.topic,l.payload,l),t.handleMessage(l,c=>{if(c)return n(c);t.incomingStore.del(l,t.noop),t._sendPacket(s,n)}))})};e.default=r}),Ch=me(e=>{oe(),ae(),se();var r=e&&e.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0});var t=r(lh()),a=r(uh()),h=r(Th()),n=r(ri()),i=r(kh()),s=(o,l,c)=>{let{options:d}=o;if(d.protocolVersion===5&&d.properties&&d.properties.maximumPacketSize&&d.properties.maximumPacketSize<l.length)return o.emit("error",new Error(`exceeding packets size ${l.cmd}`)),o.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),o;switch(o.log("_handlePacket :: emitting packetreceive"),o.emit("packetreceive",l),l.cmd){case"publish":(0,t.default)(o,l,c);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":o.reschedulePing(),(0,n.default)(o,l),c();break;case"pubrel":o.reschedulePing(),(0,i.default)(o,l,c);break;case"connack":(0,h.default)(o,l),c();break;case"auth":o.reschedulePing(),(0,a.default)(o,l),c();break;case"pingresp":o.log("_handlePacket :: received pingresp"),o.reschedulePing(!0),c();break;case"disconnect":o.emit("disconnect",l),c();break;default:o.log("_handlePacket :: unknown command"),c();break}};e.default=s}),Rh=me(e=>{oe(),ae(),se();var r=e&&e.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(e,"__esModule",{value:!0}),e.TypedEventEmitter=void 0;var t=r((yr(),Ue(ur))),a=wr(),h=class{};e.TypedEventEmitter=h,(0,a.applyMixin)(h,t.default)}),ii=me(e=>{oe(),ae(),se(),Object.defineProperty(e,"__esModule",{value:!0}),e.isReactNativeBrowser=e.isWebWorker=void 0;var r=()=>{var n;return typeof window<"u"?typeof navigator<"u"&&((n=navigator.userAgent)===null||n===void 0?void 0:n.toLowerCase().indexOf(" electron/"))>-1&&Be!=null&&Be.versions?!Object.prototype.hasOwnProperty.call(Be.versions,"electron"):typeof window.document<"u":!1},t=()=>{var n,i;return!!(typeof self=="object"&&!((i=(n=self==null?void 0:self.constructor)===null||n===void 0?void 0:n.name)===null||i===void 0)&&i.includes("WorkerGlobalScope"))},a=()=>typeof navigator<"u"&&navigator.product==="ReactNative",h=r()||t()||a();e.isWebWorker=t(),e.isReactNativeBrowser=a(),e.default=h}),Oh=me((e,r)=>{oe(),ae(),se(),function(t,a){typeof e=="object"&&typeof r<"u"?a(e):typeof define=="function"&&define.amd?define(["exports"],a):(t=typeof globalThis<"u"?globalThis:t||self,a(t.fastUniqueNumbers={}))}(e,function(t){var a=function(m){return function(b){var y=m(b);return b.add(y),y}},h=function(m){return function(b,y){return m.set(b,y),y}},n=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,i=536870912,s=i*2,o=function(m,b){return function(y){var I=b.get(y),L=I===void 0?y.size:I<s?I+1:0;if(!y.has(L))return m(y,L);if(y.size<i){for(;y.has(L);)L=Math.floor(Math.random()*s);return m(y,L)}if(y.size>n)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;y.has(L);)L=Math.floor(Math.random()*n);return m(y,L)}},l=new WeakMap,c=h(l),d=o(c,l),g=a(d);t.addUniqueNumber=g,t.generateUniqueNumber=d})}),Ph=me((e,r)=>{oe(),ae(),se(),function(t,a){typeof e=="object"&&typeof r<"u"?a(e,Oh()):typeof define=="function"&&define.amd?define(["exports","fast-unique-numbers"],a):(t=typeof globalThis<"u"?globalThis:t||self,a(t.workerTimersBroker={},t.fastUniqueNumbers))}(e,function(t,a){var h=function(s){return s.method!==void 0&&s.method==="call"},n=function(s){return s.error===null&&typeof s.id=="number"},i=function(s){var o=new Map([[0,function(){}]]),l=new Map([[0,function(){}]]),c=new Map,d=new Worker(s);d.addEventListener("message",function(I){var L=I.data;if(h(L)){var k=L.params,_=k.timerId,N=k.timerType;if(N==="interval"){var j=o.get(_);if(typeof j=="number"){var O=c.get(j);if(O===void 0||O.timerId!==_||O.timerType!==N)throw new Error("The timer is in an undefined state.")}else if(typeof j<"u")j();else throw new Error("The timer is in an undefined state.")}else if(N==="timeout"){var C=l.get(_);if(typeof C=="number"){var x=c.get(C);if(x===void 0||x.timerId!==_||x.timerType!==N)throw new Error("The timer is in an undefined state.")}else if(typeof C<"u")C(),l.delete(_);else throw new Error("The timer is in an undefined state.")}}else if(n(L)){var W=L.id,Q=c.get(W);if(Q===void 0)throw new Error("The timer is in an undefined state.");var ee=Q.timerId,S=Q.timerType;c.delete(W),S==="interval"?o.delete(ee):l.delete(ee)}else{var q=L.error.message;throw new Error(q)}});var g=function(I){var L=a.generateUniqueNumber(c);c.set(L,{timerId:I,timerType:"interval"}),o.set(I,L),d.postMessage({id:L,method:"clear",params:{timerId:I,timerType:"interval"}})},m=function(I){var L=a.generateUniqueNumber(c);c.set(L,{timerId:I,timerType:"timeout"}),l.set(I,L),d.postMessage({id:L,method:"clear",params:{timerId:I,timerType:"timeout"}})},b=function(I){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,k=a.generateUniqueNumber(o);return o.set(k,function(){I(),typeof o.get(k)=="function"&&d.postMessage({id:null,method:"set",params:{delay:L,now:performance.now(),timerId:k,timerType:"interval"}})}),d.postMessage({id:null,method:"set",params:{delay:L,now:performance.now(),timerId:k,timerType:"interval"}}),k},y=function(I){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,k=a.generateUniqueNumber(l);return l.set(k,I),d.postMessage({id:null,method:"set",params:{delay:L,now:performance.now(),timerId:k,timerType:"timeout"}}),k};return{clearInterval:g,clearTimeout:m,setInterval:b,setTimeout:y}};t.load=i})}),Bh=me((e,r)=>{oe(),ae(),se(),function(t,a){typeof e=="object"&&typeof r<"u"?a(e,Ph()):typeof define=="function"&&define.amd?define(["exports","worker-timers-broker"],a):(t=typeof globalThis<"u"?globalThis:t||self,a(t.workerTimers={},t.workerTimersBroker))}(e,function(t,a){var h=function(d,g){var m=null;return function(){if(m!==null)return m;var b=new Blob([g],{type:"application/javascript; charset=utf-8"}),y=URL.createObjectURL(b);return m=d(y),setTimeout(function(){return URL.revokeObjectURL(y)}),m}},n=`(()=>{var e={472:(e,t,r)=>{var o,i;void 0===(i="function"==typeof(o=function(){"use strict";var e=new Map,t=new Map,r=function(t){var r=e.get(t);if(void 0===r)throw new Error('There is no interval scheduled with the given id "'.concat(t,'".'));clearTimeout(r),e.delete(t)},o=function(e){var r=t.get(e);if(void 0===r)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(r),t.delete(e)},i=function(e,t){var r,o=performance.now();return{expected:o+(r=e-Math.max(0,o-t)),remainingDelay:r}},n=function e(t,r,o,i){var n=performance.now();n>o?postMessage({id:null,method:"call",params:{timerId:r,timerType:i}}):t.set(r,setTimeout(e,o-n,t,r,o,i))},a=function(t,r,o){var a=i(t,o),s=a.expected,d=a.remainingDelay;e.set(r,setTimeout(n,d,e,r,s,"interval"))},s=function(e,r,o){var a=i(e,o),s=a.expected,d=a.remainingDelay;t.set(r,setTimeout(n,d,t,r,s,"timeout"))};addEventListener("message",(function(e){var t=e.data;try{if("clear"===t.method){var i=t.id,n=t.params,d=n.timerId,c=n.timerType;if("interval"===c)r(d),postMessage({error:null,id:i});else{if("timeout"!==c)throw new Error('The given type "'.concat(c,'" is not supported'));o(d),postMessage({error:null,id:i})}}else{if("set"!==t.method)throw new Error('The given method "'.concat(t.method,'" is not supported'));var u=t.params,l=u.delay,p=u.now,m=u.timerId,v=u.timerType;if("interval"===v)a(l,m,p);else{if("timeout"!==v)throw new Error('The given type "'.concat(v,'" is not supported'));s(l,m,p)}}}catch(e){postMessage({error:{message:e.message},id:t.id,result:null})}}))})?o.call(t,r,t,e):o)||(e.exports=i)}},t={};function r(o){var i=t[o];if(void 0!==i)return i.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,r),n.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";r(472)})()})();`,i=h(a.load,n),s=function(d){return i().clearInterval(d)},o=function(d){return i().clearTimeout(d)},l=function(){var d;return(d=i()).setInterval.apply(d,arguments)},c=function(){var d;return(d=i()).setTimeout.apply(d,arguments)};t.clearInterval=s,t.clearTimeout=o,t.setInterval=l,t.setTimeout=c})}),Mh=me(e=>{oe(),ae(),se();var r=e&&e.__createBinding||(Object.create?function(l,c,d,g){g===void 0&&(g=d);var m=Object.getOwnPropertyDescriptor(c,d);(!m||("get"in m?!c.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return c[d]}}),Object.defineProperty(l,g,m)}:function(l,c,d,g){g===void 0&&(g=d),l[g]=c[d]}),t=e&&e.__setModuleDefault||(Object.create?function(l,c){Object.defineProperty(l,"default",{enumerable:!0,value:c})}:function(l,c){l.default=c}),a=e&&e.__importStar||function(l){if(l&&l.__esModule)return l;var c={};if(l!=null)for(var d in l)d!=="default"&&Object.prototype.hasOwnProperty.call(l,d)&&r(c,l,d);return t(c,l),c};Object.defineProperty(e,"__esModule",{value:!0});var h=a(ii()),n=Bh(),i={set:n.setInterval,clear:n.clearInterval},s={set:(l,c)=>setInterval(l,c),clear:l=>clearInterval(l)},o=l=>{switch(l){case"native":return s;case"worker":return i;case"auto":default:return h.default&&!h.isWebWorker&&!h.isReactNativeBrowser?i:s}};e.default=o}),oa=me(e=>{oe(),ae(),se();var r=e&&e.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(e,"__esModule",{value:!0});var t=r(Mh()),a=class{get keepaliveTimeoutTimestamp(){return this._keepaliveTimeoutTimestamp}get intervalEvery(){return this._intervalEvery}get keepalive(){return this._keepalive}constructor(h,n){this.destroyed=!1,this.client=h,this.timer=typeof n=="object"&&"set"in n&&"clear"in n?n:(0,t.default)(n),this.setKeepalive(h.options.keepalive)}clear(){this.timerId&&(this.timer.clear(this.timerId),this.timerId=null)}setKeepalive(h){if(h*=1e3,isNaN(h)||h<=0||h>2147483647)throw new Error(`Keepalive value must be an integer between 0 and 2147483647. Provided value is ${h}`);this._keepalive=h,this.reschedule(),this.client.log(`KeepaliveManager: set keepalive to ${h}ms`)}destroy(){this.clear(),this.destroyed=!0}reschedule(){if(this.destroyed)return;this.clear(),this.counter=0;let h=Math.ceil(this._keepalive*1.5);this._keepaliveTimeoutTimestamp=Date.now()+h,this._intervalEvery=Math.ceil(this._keepalive/2),this.timerId=this.timer.set(()=>{this.destroyed||(this.counter+=1,this.counter===2?this.client.sendPing():this.counter>2&&this.client.onKeepaliveTimeout())},this._intervalEvery)}};e.default=a}),xn=me(e=>{oe(),ae(),se();var r=e&&e.__createBinding||(Object.create?function(j,O,C,x){x===void 0&&(x=C);var W=Object.getOwnPropertyDescriptor(O,C);(!W||("get"in W?!O.__esModule:W.writable||W.configurable))&&(W={enumerable:!0,get:function(){return O[C]}}),Object.defineProperty(j,x,W)}:function(j,O,C,x){x===void 0&&(x=C),j[x]=O[C]}),t=e&&e.__setModuleDefault||(Object.create?function(j,O){Object.defineProperty(j,"default",{enumerable:!0,value:O})}:function(j,O){j.default=O}),a=e&&e.__importStar||function(j){if(j&&j.__esModule)return j;var O={};if(j!=null)for(var C in j)C!=="default"&&Object.prototype.hasOwnProperty.call(j,C)&&r(O,j,C);return t(O,j),O},h=e&&e.__importDefault||function(j){return j&&j.__esModule?j:{default:j}};Object.defineProperty(e,"__esModule",{value:!0});var n=h(El()),i=h(nh()),s=h($s()),o=cr(),l=h(sh()),c=a(ah()),d=h(Ut()),g=h(qs()),m=h(Ch()),b=wr(),y=Rh(),I=h(oa()),L=a(ii()),k=globalThis.setImmediate||((...j)=>{let O=j.shift();(0,b.nextTick)(()=>{O(...j)})}),_={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:30*1e3,clean:!0,resubscribe:!0,writeCache:!0,timerVariant:"auto"},N=class Ln extends y.TypedEventEmitter{static defaultId(){return`mqttjs_${Math.random().toString(16).substr(2,8)}`}constructor(O,C){super(),this.options=C||{};for(let x in _)typeof this.options[x]>"u"?this.options[x]=_[x]:this.options[x]=C[x];this.log=this.options.log||(0,d.default)("mqttjs:client"),this.noop=this._noop.bind(this),this.log("MqttClient :: version:",Ln.VERSION),L.isWebWorker?this.log("MqttClient :: environment","webworker"):this.log("MqttClient :: environment",L.default?"browser":"node"),this.log("MqttClient :: options.protocol",C.protocol),this.log("MqttClient :: options.protocolVersion",C.protocolVersion),this.log("MqttClient :: options.username",C.username),this.log("MqttClient :: options.keepalive",C.keepalive),this.log("MqttClient :: options.reconnectPeriod",C.reconnectPeriod),this.log("MqttClient :: options.rejectUnauthorized",C.rejectUnauthorized),this.log("MqttClient :: options.properties.topicAliasMaximum",C.properties?C.properties.topicAliasMaximum:void 0),this.options.clientId=typeof C.clientId=="string"?C.clientId:Ln.defaultId(),this.log("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=C.protocolVersion===5&&C.customHandleAcks?C.customHandleAcks:(...x)=>{x[3](null,0)},this.options.writeCache||(i.default.writeToStream.cacheNumbers=!1),this.streamBuilder=O,this.messageIdProvider=typeof this.options.messageIdProvider>"u"?new s.default:this.options.messageIdProvider,this.outgoingStore=C.outgoingStore||new g.default,this.incomingStore=C.incomingStore||new g.default,this.queueQoSZero=C.queueQoSZero===void 0?!0:C.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.keepaliveManager=null,this.connected=!1,this.disconnecting=!1,this.reconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,C.properties&&C.properties.topicAliasMaximum>0&&(C.properties.topicAliasMaximum>65535?this.log("MqttClient :: options.properties.topicAliasMaximum is out of range"):this.topicAliasRecv=new n.default(C.properties.topicAliasMaximum)),this.on("connect",()=>{let{queue:x}=this,W=()=>{let Q=x.shift();this.log("deliver :: entry %o",Q);let ee=null;if(!Q){this._resubscribe();return}ee=Q.packet,this.log("deliver :: call _sendPacket for %o",ee);let S=!0;ee.messageId&&ee.messageId!==0&&(this.messageIdProvider.register(ee.messageId)||(S=!1)),S?this._sendPacket(ee,q=>{Q.cb&&Q.cb(q),W()}):(this.log("messageId: %d has already used. The message is skipped and removed.",ee.messageId),W())};this.log("connect :: sending queued packets"),W()}),this.on("close",()=>{this.log("close :: connected set to `false`"),this.connected=!1,this.log("close :: clearing connackTimer"),clearTimeout(this.connackTimer),this._destroyKeepaliveManager(),this.topicAliasRecv&&this.topicAliasRecv.clear(),this.log("close :: calling _setupReconnect"),this._setupReconnect()}),this.options.manualConnect||(this.log("MqttClient :: setting up stream"),this.connect())}handleAuth(O,C){C()}handleMessage(O,C){C()}_nextId(){return this.messageIdProvider.allocate()}getLastMessageId(){return this.messageIdProvider.getLastAllocated()}connect(){var O;let C=new o.Writable,x=i.default.parser(this.options),W=null,Q=[];this.log("connect :: calling method to clear reconnect"),this._clearReconnect(),this.disconnected&&!this.reconnecting&&(this.incomingStore=this.options.incomingStore||new g.default,this.outgoingStore=this.options.outgoingStore||new g.default,this.disconnecting=!1,this.disconnected=!1),this.log("connect :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),x.on("packet",K=>{this.log("parser :: on packet push to packets array."),Q.push(K)});let ee=()=>{this.log("work :: getting next packet in queue");let K=Q.shift();if(K)this.log("work :: packet pulled from queue"),(0,m.default)(this,K,S);else{this.log("work :: no packets in queue");let ge=W;W=null,this.log("work :: done flag is %s",!!ge),ge&&ge()}},S=()=>{if(Q.length)(0,b.nextTick)(ee);else{let K=W;W=null,K()}};C._write=(K,ge,ne)=>{W=ne,this.log("writable stream :: parsing buffer"),x.parse(K),ee()};let q=K=>{this.log("streamErrorHandler :: error",K.message),K.code?(this.log("streamErrorHandler :: emitting error"),this.emit("error",K)):this.noop(K)};this.log("connect :: pipe stream to writable stream"),this.stream.pipe(C),this.stream.on("error",q),this.stream.on("close",()=>{this.log("(%s)stream :: on close",this.options.clientId),this._flushVolatile(),this.log("stream: emit close to MqttClient"),this.emit("close")}),this.log("connect: sending packet `connect`");let Z={cmd:"connect",protocolId:this.options.protocolId,protocolVersion:this.options.protocolVersion,clean:this.options.clean,clientId:this.options.clientId,keepalive:this.options.keepalive,username:this.options.username,password:this.options.password,properties:this.options.properties};if(this.options.will&&(Z.will=Object.assign(Object.assign({},this.options.will),{payload:(O=this.options.will)===null||O===void 0?void 0:O.payload})),this.topicAliasRecv&&(Z.properties||(Z.properties={}),this.topicAliasRecv&&(Z.properties.topicAliasMaximum=this.topicAliasRecv.max)),this._writePacket(Z),x.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return this.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;if(this.options.properties.authenticationMethod&&this.options.authPacket&&typeof this.options.authPacket=="object"){let K=Object.assign({cmd:"auth",reasonCode:0},this.options.authPacket);this._writePacket(K)}}return this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(()=>{this.log("!!connectTimeout hit!! Calling _cleanUp with force `true`"),this.emit("error",new Error("connack timeout")),this._cleanUp(!0)},this.options.connectTimeout),this}publish(O,C,x,W){this.log("publish :: message `%s` to topic `%s`",C,O);let{options:Q}=this;typeof x=="function"&&(W=x,x=null),x=x||{},x=Object.assign(Object.assign({},{qos:0,retain:!1,dup:!1}),x);let{qos:ee,retain:S,dup:q,properties:Z,cbStorePut:K}=x;if(this._checkDisconnecting(W))return this;let ge=()=>{let ne=0;if((ee===1||ee===2)&&(ne=this._nextId(),ne===null))return this.log("No messageId left"),!1;let $={cmd:"publish",topic:O,payload:C,qos:ee,retain:S,messageId:ne,dup:q};switch(Q.protocolVersion===5&&($.properties=Z),this.log("publish :: qos",ee),ee){case 1:case 2:this.outgoing[$.messageId]={volatile:!1,cb:W||this.noop},this.log("MqttClient:publish: packet cmd: %s",$.cmd),this._sendPacket($,void 0,K);break;default:this.log("MqttClient:publish: packet cmd: %s",$.cmd),this._sendPacket($,W,K);break}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!ge())&&this._storeProcessingQueue.push({invoke:ge,cbStorePut:x.cbStorePut,callback:W}),this}publishAsync(O,C,x){return new Promise((W,Q)=>{this.publish(O,C,x,(ee,S)=>{ee?Q(ee):W(S)})})}subscribe(O,C,x){let W=this.options.protocolVersion;typeof C=="function"&&(x=C),x=x||this.noop;let Q=!1,ee=[];typeof O=="string"?(O=[O],ee=O):Array.isArray(O)?ee=O:typeof O=="object"&&(Q=O.resubscribe,delete O.resubscribe,ee=Object.keys(O));let S=c.validateTopics(ee);if(S!==null)return k(x,new Error(`Invalid topic ${S}`)),this;if(this._checkDisconnecting(x))return this.log("subscribe: discconecting true"),this;let q={qos:0};W===5&&(q.nl=!1,q.rap=!1,q.rh=0),C=Object.assign(Object.assign({},q),C);let Z=C.properties,K=[],ge=($,be)=>{if(be=be||C,!Object.prototype.hasOwnProperty.call(this._resubscribeTopics,$)||this._resubscribeTopics[$].qos<be.qos||Q){let re={topic:$,qos:be.qos};W===5&&(re.nl=be.nl,re.rap=be.rap,re.rh=be.rh,re.properties=Z),this.log("subscribe: pushing topic `%s` and qos `%s` to subs list",re.topic,re.qos),K.push(re)}};if(Array.isArray(O)?O.forEach($=>{this.log("subscribe: array topic %s",$),ge($)}):Object.keys(O).forEach($=>{this.log("subscribe: object topic %s, %o",$,O[$]),ge($,O[$])}),!K.length)return x(null,[]),this;let ne=()=>{let $=this._nextId();if($===null)return this.log("No messageId left"),!1;let be={cmd:"subscribe",subscriptions:K,messageId:$};if(Z&&(be.properties=Z),this.options.resubscribe){this.log("subscribe :: resubscribe true");let re=[];K.forEach(ve=>{if(this.options.reconnectPeriod>0){let A={qos:ve.qos};W===5&&(A.nl=ve.nl||!1,A.rap=ve.rap||!1,A.rh=ve.rh||0,A.properties=ve.properties),this._resubscribeTopics[ve.topic]=A,re.push(ve.topic)}}),this.messageIdToTopic[be.messageId]=re}return this.outgoing[be.messageId]={volatile:!0,cb(re,ve){if(!re){let{granted:A}=ve;for(let Y=0;Y<A.length;Y+=1)K[Y].qos=A[Y]}x(re,K,ve)}},this.log("subscribe :: call _sendPacket"),this._sendPacket(be),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!ne())&&this._storeProcessingQueue.push({invoke:ne,callback:x}),this}subscribeAsync(O,C){return new Promise((x,W)=>{this.subscribe(O,C,(Q,ee)=>{Q?W(Q):x(ee)})})}unsubscribe(O,C,x){typeof O=="string"&&(O=[O]),typeof C=="function"&&(x=C),x=x||this.noop;let W=c.validateTopics(O);if(W!==null)return k(x,new Error(`Invalid topic ${W}`)),this;if(this._checkDisconnecting(x))return this;let Q=()=>{let ee=this._nextId();if(ee===null)return this.log("No messageId left"),!1;let S={cmd:"unsubscribe",messageId:ee,unsubscriptions:[]};return typeof O=="string"?S.unsubscriptions=[O]:Array.isArray(O)&&(S.unsubscriptions=O),this.options.resubscribe&&S.unsubscriptions.forEach(q=>{delete this._resubscribeTopics[q]}),typeof C=="object"&&C.properties&&(S.properties=C.properties),this.outgoing[S.messageId]={volatile:!0,cb:x},this.log("unsubscribe: call _sendPacket"),this._sendPacket(S),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!Q())&&this._storeProcessingQueue.push({invoke:Q,callback:x}),this}unsubscribeAsync(O,C){return new Promise((x,W)=>{this.unsubscribe(O,C,(Q,ee)=>{Q?W(Q):x(ee)})})}end(O,C,x){this.log("end :: (%s)",this.options.clientId),(O==null||typeof O!="boolean")&&(x=x||C,C=O,O=!1),typeof C!="object"&&(x=x||C,C=null),this.log("end :: cb? %s",!!x),(!x||typeof x!="function")&&(x=this.noop);let W=()=>{this.log("end :: closeStores: closing incoming and outgoing stores"),this.disconnected=!0,this.incomingStore.close(ee=>{this.outgoingStore.close(S=>{if(this.log("end :: closeStores: emitting end"),this.emit("end"),x){let q=ee||S;this.log("end :: closeStores: invoking callback with args"),x(q)}})}),this._deferredReconnect?this._deferredReconnect():(this.options.reconnectPeriod===0||this.options.manualConnect)&&(this.disconnecting=!1)},Q=()=>{this.log("end :: (%s) :: finish :: calling _cleanUp with force %s",this.options.clientId,O),this._cleanUp(O,()=>{this.log("end :: finish :: calling process.nextTick on closeStores"),(0,b.nextTick)(W)},C)};return this.disconnecting?(x(),this):(this._clearReconnect(),this.disconnecting=!0,!O&&Object.keys(this.outgoing).length>0?(this.log("end :: (%s) :: calling finish in 10ms once outgoing is empty",this.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,Q,10))):(this.log("end :: (%s) :: immediately calling finish",this.options.clientId),Q()),this)}endAsync(O,C){return new Promise((x,W)=>{this.end(O,C,Q=>{Q?W(Q):x()})})}removeOutgoingMessage(O){if(this.outgoing[O]){let{cb:C}=this.outgoing[O];this._removeOutgoingAndStoreMessage(O,()=>{C(new Error("Message removed"))})}return this}reconnect(O){this.log("client reconnect");let C=()=>{O?(this.options.incomingStore=O.incomingStore,this.options.outgoingStore=O.outgoingStore):(this.options.incomingStore=null,this.options.outgoingStore=null),this.incomingStore=this.options.incomingStore||new g.default,this.outgoingStore=this.options.outgoingStore||new g.default,this.disconnecting=!1,this.disconnected=!1,this._deferredReconnect=null,this._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=C:C(),this}_flushVolatile(){this.outgoing&&(this.log("_flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(this.outgoing).forEach(O=>{this.outgoing[O].volatile&&typeof this.outgoing[O].cb=="function"&&(this.outgoing[O].cb(new Error("Connection closed")),delete this.outgoing[O])}))}_flush(){this.outgoing&&(this.log("_flush: queue exists? %b",!!this.outgoing),Object.keys(this.outgoing).forEach(O=>{typeof this.outgoing[O].cb=="function"&&(this.outgoing[O].cb(new Error("Connection closed")),delete this.outgoing[O])}))}_removeTopicAliasAndRecoverTopicName(O){let C;O.properties&&(C=O.properties.topicAlias);let x=O.topic.toString();if(this.log("_removeTopicAliasAndRecoverTopicName :: alias %d, topic %o",C,x),x.length===0){if(typeof C>"u")return new Error("Unregistered Topic Alias");if(x=this.topicAliasSend.getTopicByAlias(C),typeof x>"u")return new Error("Unregistered Topic Alias");O.topic=x}C&&delete O.properties.topicAlias}_checkDisconnecting(O){return this.disconnecting&&(O&&O!==this.noop?O(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting}_reconnect(){this.log("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this.connect()}),this.log("client already connected. disconnecting first.")):(this.log("_reconnect: calling connect"),this.connect())}_setupReconnect(){!this.disconnecting&&!this.reconnectTimer&&this.options.reconnectPeriod>0?(this.reconnecting||(this.log("_setupReconnect :: emit `offline` state"),this.emit("offline"),this.log("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),this.log("_setupReconnect :: setting reconnectTimer for %d ms",this.options.reconnectPeriod),this.reconnectTimer=setInterval(()=>{this.log("reconnectTimer :: reconnect triggered!"),this._reconnect()},this.options.reconnectPeriod)):this.log("_setupReconnect :: doing nothing...")}_clearReconnect(){this.log("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)}_cleanUp(O,C,x={}){if(C&&(this.log("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",C)),this.log("_cleanUp :: forced? %s",O),O)this.options.reconnectPeriod===0&&this.options.clean&&this._flush(),this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{let W=Object.assign({cmd:"disconnect"},x);this.log("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(W,()=>{this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),k(()=>{this.stream.end(()=>{this.log("_cleanUp :: (%s) :: stream destroyed",this.options.clientId)})})})}!this.disconnecting&&!this.reconnecting&&(this.log("_cleanUp :: client not disconnecting/reconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),this._destroyKeepaliveManager(),C&&!this.connected&&(this.log("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",C),C())}_storeAndSend(O,C,x){this.log("storeAndSend :: store packet with cmd %s to outgoingStore",O.cmd);let W=O,Q;if(W.cmd==="publish"&&(W=(0,l.default)(O),Q=this._removeTopicAliasAndRecoverTopicName(W),Q))return C&&C(Q);this.outgoingStore.put(W,ee=>{if(ee)return C&&C(ee);x(),this._writePacket(O,C)})}_applyTopicAlias(O){if(this.options.protocolVersion===5&&O.cmd==="publish"){let C;O.properties&&(C=O.properties.topicAlias);let x=O.topic.toString();if(this.topicAliasSend)if(C){if(x.length!==0&&(this.log("applyTopicAlias :: register topic: %s - alias: %d",x,C),!this.topicAliasSend.put(x,C)))return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",x,C),new Error("Sending Topic Alias out of range")}else x.length!==0&&(this.options.autoAssignTopicAlias?(C=this.topicAliasSend.getAliasByTopic(x),C?(O.topic="",O.properties=Object.assign(Object.assign({},O.properties),{topicAlias:C}),this.log("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",x,C)):(C=this.topicAliasSend.getLruAlias(),this.topicAliasSend.put(x,C),O.properties=Object.assign(Object.assign({},O.properties),{topicAlias:C}),this.log("applyTopicAlias :: auto assign topic: %s - alias: %d",x,C))):this.options.autoUseTopicAlias&&(C=this.topicAliasSend.getAliasByTopic(x),C&&(O.topic="",O.properties=Object.assign(Object.assign({},O.properties),{topicAlias:C}),this.log("applyTopicAlias :: auto use topic: %s - alias: %d",x,C))));else if(C)return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",x,C),new Error("Sending Topic Alias out of range")}}_noop(O){this.log("noop ::",O)}_writePacket(O,C){this.log("_writePacket :: packet: %O",O),this.log("_writePacket :: emitting `packetsend`"),this.emit("packetsend",O),this.log("_writePacket :: writing to stream");let x=i.default.writeToStream(O,this.stream,this.options);this.log("_writePacket :: writeToStream result %s",x),!x&&C&&C!==this.noop?(this.log("_writePacket :: handle events on `drain` once through callback."),this.stream.once("drain",C)):C&&(this.log("_writePacket :: invoking cb"),C())}_sendPacket(O,C,x,W){this.log("_sendPacket :: (%s) ::  start",this.options.clientId),x=x||this.noop,C=C||this.noop;let Q=this._applyTopicAlias(O);if(Q){C(Q);return}if(!this.connected){if(O.cmd==="auth"){this._writePacket(O,C);return}this.log("_sendPacket :: client not connected. Storing packet offline."),this._storePacket(O,C,x);return}if(W){this._writePacket(O,C);return}switch(O.cmd){case"publish":break;case"pubrel":this._storeAndSend(O,C,x);return;default:this._writePacket(O,C);return}switch(O.qos){case 2:case 1:this._storeAndSend(O,C,x);break;case 0:default:this._writePacket(O,C);break}this.log("_sendPacket :: (%s) ::  end",this.options.clientId)}_storePacket(O,C,x){this.log("_storePacket :: packet: %o",O),this.log("_storePacket :: cb? %s",!!C),x=x||this.noop;let W=O;if(W.cmd==="publish"){W=(0,l.default)(O);let ee=this._removeTopicAliasAndRecoverTopicName(W);if(ee)return C&&C(ee)}let Q=W.qos||0;Q===0&&this.queueQoSZero||W.cmd!=="publish"?this.queue.push({packet:W,cb:C}):Q>0?(C=this.outgoing[W.messageId]?this.outgoing[W.messageId].cb:null,this.outgoingStore.put(W,ee=>{if(ee)return C&&C(ee);x()})):C&&C(new Error("No connection to broker"))}_setupKeepaliveManager(){this.log("_setupKeepaliveManager :: keepalive %d (seconds)",this.options.keepalive),!this.keepaliveManager&&this.options.keepalive&&(this.keepaliveManager=new I.default(this,this.options.timerVariant))}_destroyKeepaliveManager(){this.keepaliveManager&&(this.log("_destroyKeepaliveManager :: destroying keepalive manager"),this.keepaliveManager.destroy(),this.keepaliveManager=null)}reschedulePing(O=!1){this.keepaliveManager&&this.options.keepalive&&(O||this.options.reschedulePings)&&this._reschedulePing()}_reschedulePing(){this.log("_reschedulePing :: rescheduling ping"),this.keepaliveManager.reschedule()}sendPing(){this.log("_sendPing :: sending pingreq"),this._sendPacket({cmd:"pingreq"})}onKeepaliveTimeout(){this.emit("error",new Error("Keepalive timeout")),this.log("onKeepaliveTimeout :: calling _cleanUp with force true"),this._cleanUp(!0)}_resubscribe(){this.log("_resubscribe");let O=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||this.options.protocolVersion>=4&&!this.connackPacket.sessionPresent)&&O.length>0)if(this.options.resubscribe)if(this.options.protocolVersion===5){this.log("_resubscribe: protocolVersion 5");for(let C=0;C<O.length;C++){let x={};x[O[C]]=this._resubscribeTopics[O[C]],x.resubscribe=!0,this.subscribe(x,{properties:x[O[C]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1}_onConnect(O){if(this.disconnected){this.emit("connect",O);return}this.connackPacket=O,this.messageIdProvider.clear(),this._setupKeepaliveManager(),this.connected=!0;let C=()=>{let x=this.outgoingStore.createStream(),W=()=>{x.destroy(),x=null,this._flushStoreProcessingQueue(),Q()},Q=()=>{this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={}};this.once("close",W),x.on("error",S=>{Q(),this._flushStoreProcessingQueue(),this.removeListener("close",W),this.emit("error",S)});let ee=()=>{if(!x)return;let S=x.read(1),q;if(!S){x.once("readable",ee);return}if(this._storeProcessing=!0,this._packetIdsDuringStoreProcessing[S.messageId]){ee();return}!this.disconnecting&&!this.reconnectTimer?(q=this.outgoing[S.messageId]?this.outgoing[S.messageId].cb:null,this.outgoing[S.messageId]={volatile:!1,cb(Z,K){q&&q(Z,K),ee()}},this._packetIdsDuringStoreProcessing[S.messageId]=!0,this.messageIdProvider.register(S.messageId)?this._sendPacket(S,void 0,void 0,!0):this.log("messageId: %d has already used.",S.messageId)):x.destroy&&x.destroy()};x.on("end",()=>{let S=!0;for(let q in this._packetIdsDuringStoreProcessing)if(!this._packetIdsDuringStoreProcessing[q]){S=!1;break}this.removeListener("close",W),S?(Q(),this._invokeAllStoreProcessingQueue(),this.emit("connect",O)):C()}),ee()};C()}_invokeStoreProcessingQueue(){if(!this._storeProcessing&&this._storeProcessingQueue.length>0){let O=this._storeProcessingQueue[0];if(O&&O.invoke())return this._storeProcessingQueue.shift(),!0}return!1}_invokeAllStoreProcessingQueue(){for(;this._invokeStoreProcessingQueue(););}_flushStoreProcessingQueue(){for(let O of this._storeProcessingQueue)O.cbStorePut&&O.cbStorePut(new Error("Connection closed")),O.callback&&O.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)}_removeOutgoingAndStoreMessage(O,C){delete this.outgoing[O],this.outgoingStore.del({messageId:O},(x,W)=>{C(x,W),this.messageIdProvider.deallocate(O),this._invokeStoreProcessingQueue()})}};N.VERSION=b.MQTTJS_VERSION,e.default=N}),xh=me(e=>{oe(),ae(),se(),Object.defineProperty(e,"__esModule",{value:!0});var r=na(),t=class{constructor(){this.numberAllocator=new r.NumberAllocator(1,65535)}allocate(){return this.lastId=this.numberAllocator.alloc(),this.lastId}getLastAllocated(){return this.lastId}register(a){return this.numberAllocator.use(a)}deallocate(a){this.numberAllocator.free(a)}clear(){this.numberAllocator.clear()}};e.default=t});function Jt(e){throw new RangeError(aa[e])}function ko(e,r){let t=e.split("@"),a="";t.length>1&&(a=t[0]+"@",e=t[1]);let h=function(n,i){let s=[],o=n.length;for(;o--;)s[o]=i(n[o]);return s}((e=e.replace(sa,".")).split("."),r).join(".");return a+h}function Co(e){let r=[],t=0,a=e.length;for(;t<a;){let h=e.charCodeAt(t++);if(h>=55296&&h<=56319&&t<a){let n=e.charCodeAt(t++);(64512&n)==56320?r.push(((1023&h)<<10)+(1023&n)+65536):(r.push(h),t--)}else r.push(h)}return r}var Ro,Oo,sa,aa,bt,xr,di,pi,gi,mi,Ht,Lh=tt(()=>{oe(),ae(),se(),Ro=/^xn--/,Oo=/[^\0-\x7E]/,sa=/[\x2E\u3002\uFF0E\uFF61]/g,aa={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},bt=Math.floor,xr=String.fromCharCode,di=function(e,r){return e+22+75*(e<26)-((r!=0)<<5)},pi=function(e,r,t){let a=0;for(e=t?bt(e/700):e>>1,e+=bt(e/r);e>455;a+=36)e=bt(e/35);return bt(a+36*e/(e+38))},gi=function(e){let r=[],t=e.length,a=0,h=128,n=72,i=e.lastIndexOf("-");i<0&&(i=0);for(let o=0;o<i;++o)e.charCodeAt(o)>=128&&Jt("not-basic"),r.push(e.charCodeAt(o));for(let o=i>0?i+1:0;o<t;){let l=a;for(let d=1,g=36;;g+=36){o>=t&&Jt("invalid-input");let m=(s=e.charCodeAt(o++))-48<10?s-22:s-65<26?s-65:s-97<26?s-97:36;(m>=36||m>bt((2147483647-a)/d))&&Jt("overflow"),a+=m*d;let b=g<=n?1:g>=n+26?26:g-n;if(m<b)break;let y=36-b;d>bt(2147483647/y)&&Jt("overflow"),d*=y}let c=r.length+1;n=pi(a-l,c,l==0),bt(a/c)>2147483647-h&&Jt("overflow"),h+=bt(a/c),a%=c,r.splice(a++,0,h)}var s;return String.fromCodePoint(...r)},mi=function(e){let r=[],t=(e=Co(e)).length,a=128,h=0,n=72;for(let o of e)o<128&&r.push(xr(o));let i=r.length,s=i;for(i&&r.push("-");s<t;){let o=2147483647;for(let c of e)c>=a&&c<o&&(o=c);let l=s+1;o-a>bt((2147483647-h)/l)&&Jt("overflow"),h+=(o-a)*l,a=o;for(let c of e)if(c<a&&++h>2147483647&&Jt("overflow"),c==a){let d=h;for(let g=36;;g+=36){let m=g<=n?1:g>=n+26?26:g-n;if(d<m)break;let b=d-m,y=36-m;r.push(xr(di(m+b%y,0))),d=bt(b/y)}r.push(xr(di(d,0))),n=pi(h,l,s==i),h=0,++s}++h,++a}return r.join("")},Ht={version:"2.1.0",ucs2:{decode:Co,encode:e=>String.fromCodePoint(...e)},decode:gi,encode:mi,toASCII:function(e){return ko(e,function(r){return Oo.test(r)?"xn--"+mi(r):r})},toUnicode:function(e){return ko(e,function(r){return Ro.test(r)?gi(r.slice(4).toLowerCase()):r})}},Ht.decode,Ht.encode,Ht.toASCII,Ht.toUnicode,Ht.ucs2,Ht.version});function Uh(e,r){return Object.prototype.hasOwnProperty.call(e,r)}var Po,dr,Bo,Et,Nh=tt(()=>{oe(),ae(),se(),Po=function(e,r,t,a){r=r||"&",t=t||"=";var h={};if(typeof e!="string"||e.length===0)return h;var n=/\+/g;e=e.split(r);var i=1e3;a&&typeof a.maxKeys=="number"&&(i=a.maxKeys);var s=e.length;i>0&&s>i&&(s=i);for(var o=0;o<s;++o){var l,c,d,g,m=e[o].replace(n,"%20"),b=m.indexOf(t);b>=0?(l=m.substr(0,b),c=m.substr(b+1)):(l=m,c=""),d=decodeURIComponent(l),g=decodeURIComponent(c),Uh(h,d)?Array.isArray(h[d])?h[d].push(g):h[d]=[h[d],g]:h[d]=g}return h},dr=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},Bo=function(e,r,t,a){return r=r||"&",t=t||"=",e===null&&(e=void 0),typeof e=="object"?Object.keys(e).map(function(h){var n=encodeURIComponent(dr(h))+t;return Array.isArray(e[h])?e[h].map(function(i){return n+encodeURIComponent(dr(i))}).join(r):n+encodeURIComponent(dr(e[h]))}).join(r):a?encodeURIComponent(dr(a))+t+encodeURIComponent(dr(e)):""},Et={},Et.decode=Et.parse=Po,Et.encode=Et.stringify=Bo,Et.decode,Et.encode,Et.parse,Et.stringify});function Un(){throw new Error("setTimeout has not been defined")}function Nn(){throw new Error("clearTimeout has not been defined")}function la(e){if(Rt===setTimeout)return setTimeout(e,0);if((Rt===Un||!Rt)&&setTimeout)return Rt=setTimeout,setTimeout(e,0);try{return Rt(e,0)}catch{try{return Rt.call(null,e,0)}catch{return Rt.call(this||sr,e,0)}}}function jh(){ar&&ir&&(ar=!1,ir.length?At=ir.concat(At):Or=-1,At.length&&ha())}function ha(){if(!ar){var e=la(jh);ar=!0;for(var r=At.length;r;){for(ir=At,At=[];++Or<r;)ir&&ir[Or].run();Or=-1,r=At.length}ir=null,ar=!1,function(t){if(Ot===clearTimeout)return clearTimeout(t);if((Ot===Nn||!Ot)&&clearTimeout)return Ot=clearTimeout,clearTimeout(t);try{Ot(t)}catch{try{return Ot.call(null,t)}catch{return Ot.call(this||sr,t)}}}(e)}}function Mo(e,r){(this||sr).fun=e,(this||sr).array=r}function It(){}var xo,Rt,Ot,sr,He,ir,At,ar,Or,We,Dh=tt(()=>{oe(),ae(),se(),sr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:global,He=xo={},function(){try{Rt=typeof setTimeout=="function"?setTimeout:Un}catch{Rt=Un}try{Ot=typeof clearTimeout=="function"?clearTimeout:Nn}catch{Ot=Nn}}(),At=[],ar=!1,Or=-1,He.nextTick=function(e){var r=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)r[t-1]=arguments[t];At.push(new Mo(e,r)),At.length!==1||ar||la(ha)},Mo.prototype.run=function(){(this||sr).fun.apply(null,(this||sr).array)},He.title="browser",He.browser=!0,He.env={},He.argv=[],He.version="",He.versions={},He.on=It,He.addListener=It,He.once=It,He.off=It,He.removeListener=It,He.removeAllListeners=It,He.emit=It,He.prependListener=It,He.prependOnceListener=It,He.listeners=function(e){return[]},He.binding=function(e){throw new Error("process.binding is not supported")},He.cwd=function(){return"/"},He.chdir=function(e){throw new Error("process.chdir is not supported")},He.umask=function(){return 0},We=xo,We.addListener,We.argv,We.binding,We.browser,We.chdir,We.cwd,We.emit,We.env,We.listeners,We.nextTick,We.off,We.on,We.once,We.prependListener,We.prependOnceListener,We.removeAllListeners,We.removeListener,We.title,We.umask,We.version,We.versions});function Fh(){if(jn)return Hr;jn=!0;var e=Hr={},r,t;function a(){throw new Error("setTimeout has not been defined")}function h(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?r=setTimeout:r=a}catch{r=a}try{typeof clearTimeout=="function"?t=clearTimeout:t=h}catch{t=h}})();function n(y){if(r===setTimeout)return setTimeout(y,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(y,0);try{return r(y,0)}catch{try{return r.call(null,y,0)}catch{return r.call(this||er,y,0)}}}function i(y){if(t===clearTimeout)return clearTimeout(y);if((t===h||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(y);try{return t(y)}catch{try{return t.call(null,y)}catch{return t.call(this||er,y)}}}var s=[],o=!1,l,c=-1;function d(){!o||!l||(o=!1,l.length?s=l.concat(s):c=-1,s.length&&g())}function g(){if(!o){var y=n(d);o=!0;for(var I=s.length;I;){for(l=s,s=[];++c<I;)l&&l[c].run();c=-1,I=s.length}l=null,o=!1,i(y)}}e.nextTick=function(y){var I=new Array(arguments.length-1);if(arguments.length>1)for(var L=1;L<arguments.length;L++)I[L-1]=arguments[L];s.push(new m(y,I)),s.length===1&&!o&&n(g)};function m(y,I){(this||er).fun=y,(this||er).array=I}m.prototype.run=function(){(this||er).fun.apply(null,(this||er).array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={};function b(){}return e.on=b,e.addListener=b,e.once=b,e.off=b,e.removeListener=b,e.removeAllListeners=b,e.emit=b,e.prependListener=b,e.prependOnceListener=b,e.listeners=function(y){return[]},e.binding=function(y){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(y){throw new Error("process.chdir is not supported")},e.umask=function(){return 0},Hr}var Hr,jn,er,je,ua=tt(()=>{oe(),ae(),se(),Hr={},jn=!1,er=typeof globalThis<"u"?globalThis:typeof self<"u"?self:global,je=Fh(),je.platform="browser",je.addListener,je.argv,je.binding,je.browser,je.chdir,je.cwd,je.emit,je.env,je.listeners,je.nextTick,je.off,je.on,je.once,je.prependListener,je.prependOnceListener,je.removeAllListeners,je.removeListener,je.title,je.umask,je.version,je.versions});function Wh(){if(Dn)return zr;Dn=!0;var e=je;function r(n){if(typeof n!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(n))}function t(n,i){for(var s="",o=0,l=-1,c=0,d,g=0;g<=n.length;++g){if(g<n.length)d=n.charCodeAt(g);else{if(d===47)break;d=47}if(d===47){if(!(l===g-1||c===1))if(l!==g-1&&c===2){if(s.length<2||o!==2||s.charCodeAt(s.length-1)!==46||s.charCodeAt(s.length-2)!==46){if(s.length>2){var m=s.lastIndexOf("/");if(m!==s.length-1){m===-1?(s="",o=0):(s=s.slice(0,m),o=s.length-1-s.lastIndexOf("/")),l=g,c=0;continue}}else if(s.length===2||s.length===1){s="",o=0,l=g,c=0;continue}}i&&(s.length>0?s+="/..":s="..",o=2)}else s.length>0?s+="/"+n.slice(l+1,g):s=n.slice(l+1,g),o=g-l-1;l=g,c=0}else d===46&&c!==-1?++c:c=-1}return s}function a(n,i){var s=i.dir||i.root,o=i.base||(i.name||"")+(i.ext||"");return s?s===i.root?s+o:s+n+o:o}var h={resolve:function(){for(var n="",i=!1,s,o=arguments.length-1;o>=-1&&!i;o--){var l;o>=0?l=arguments[o]:(s===void 0&&(s=e.cwd()),l=s),r(l),l.length!==0&&(n=l+"/"+n,i=l.charCodeAt(0)===47)}return n=t(n,!i),i?n.length>0?"/"+n:"/":n.length>0?n:"."},normalize:function(n){if(r(n),n.length===0)return".";var i=n.charCodeAt(0)===47,s=n.charCodeAt(n.length-1)===47;return n=t(n,!i),n.length===0&&!i&&(n="."),n.length>0&&s&&(n+="/"),i?"/"+n:n},isAbsolute:function(n){return r(n),n.length>0&&n.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var n,i=0;i<arguments.length;++i){var s=arguments[i];r(s),s.length>0&&(n===void 0?n=s:n+="/"+s)}return n===void 0?".":h.normalize(n)},relative:function(n,i){if(r(n),r(i),n===i||(n=h.resolve(n),i=h.resolve(i),n===i))return"";for(var s=1;s<n.length&&n.charCodeAt(s)===47;++s);for(var o=n.length,l=o-s,c=1;c<i.length&&i.charCodeAt(c)===47;++c);for(var d=i.length,g=d-c,m=l<g?l:g,b=-1,y=0;y<=m;++y){if(y===m){if(g>m){if(i.charCodeAt(c+y)===47)return i.slice(c+y+1);if(y===0)return i.slice(c+y)}else l>m&&(n.charCodeAt(s+y)===47?b=y:y===0&&(b=0));break}var I=n.charCodeAt(s+y),L=i.charCodeAt(c+y);if(I!==L)break;I===47&&(b=y)}var k="";for(y=s+b+1;y<=o;++y)(y===o||n.charCodeAt(y)===47)&&(k.length===0?k+="..":k+="/..");return k.length>0?k+i.slice(c+b):(c+=b,i.charCodeAt(c)===47&&++c,i.slice(c))},_makeLong:function(n){return n},dirname:function(n){if(r(n),n.length===0)return".";for(var i=n.charCodeAt(0),s=i===47,o=-1,l=!0,c=n.length-1;c>=1;--c)if(i=n.charCodeAt(c),i===47){if(!l){o=c;break}}else l=!1;return o===-1?s?"/":".":s&&o===1?"//":n.slice(0,o)},basename:function(n,i){if(i!==void 0&&typeof i!="string")throw new TypeError('"ext" argument must be a string');r(n);var s=0,o=-1,l=!0,c;if(i!==void 0&&i.length>0&&i.length<=n.length){if(i.length===n.length&&i===n)return"";var d=i.length-1,g=-1;for(c=n.length-1;c>=0;--c){var m=n.charCodeAt(c);if(m===47){if(!l){s=c+1;break}}else g===-1&&(l=!1,g=c+1),d>=0&&(m===i.charCodeAt(d)?--d===-1&&(o=c):(d=-1,o=g))}return s===o?o=g:o===-1&&(o=n.length),n.slice(s,o)}else{for(c=n.length-1;c>=0;--c)if(n.charCodeAt(c)===47){if(!l){s=c+1;break}}else o===-1&&(l=!1,o=c+1);return o===-1?"":n.slice(s,o)}},extname:function(n){r(n);for(var i=-1,s=0,o=-1,l=!0,c=0,d=n.length-1;d>=0;--d){var g=n.charCodeAt(d);if(g===47){if(!l){s=d+1;break}continue}o===-1&&(l=!1,o=d+1),g===46?i===-1?i=d:c!==1&&(c=1):i!==-1&&(c=-1)}return i===-1||o===-1||c===0||c===1&&i===o-1&&i===s+1?"":n.slice(i,o)},format:function(n){if(n===null||typeof n!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof n);return a("/",n)},parse:function(n){r(n);var i={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return i;var s=n.charCodeAt(0),o=s===47,l;o?(i.root="/",l=1):l=0;for(var c=-1,d=0,g=-1,m=!0,b=n.length-1,y=0;b>=l;--b){if(s=n.charCodeAt(b),s===47){if(!m){d=b+1;break}continue}g===-1&&(m=!1,g=b+1),s===46?c===-1?c=b:y!==1&&(y=1):c!==-1&&(y=-1)}return c===-1||g===-1||y===0||y===1&&c===g-1&&c===d+1?g!==-1&&(d===0&&o?i.base=i.name=n.slice(1,g):i.base=i.name=n.slice(d,g)):(d===0&&o?(i.name=n.slice(1,c),i.base=n.slice(1,g)):(i.name=n.slice(d,c),i.base=n.slice(d,g)),i.ext=n.slice(c,g)),d>0?i.dir=n.slice(0,d-1):o&&(i.dir="/"),i},sep:"/",delimiter:":",win32:null,posix:null};return h.posix=h,zr=h,zr}var zr,Dn,Fn,$h=tt(()=>{oe(),ae(),se(),ua(),zr={},Dn=!1,Fn=Wh()}),ca={};lr(ca,{URL:()=>Ra,Url:()=>Aa,default:()=>Me,fileURLToPath:()=>fa,format:()=>Ia,parse:()=>Ca,pathToFileURL:()=>da,resolve:()=>Ta,resolveObject:()=>ka});function gt(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function Ar(e,r,t){if(e&&wt.isObject(e)&&e instanceof gt)return e;var a=new gt;return a.parse(e,r,t),a}function qh(){if(Wn)return Vr;Wn=!0;var e=We;function r(n){if(typeof n!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(n))}function t(n,i){for(var s="",o=0,l=-1,c=0,d,g=0;g<=n.length;++g){if(g<n.length)d=n.charCodeAt(g);else{if(d===47)break;d=47}if(d===47){if(!(l===g-1||c===1))if(l!==g-1&&c===2){if(s.length<2||o!==2||s.charCodeAt(s.length-1)!==46||s.charCodeAt(s.length-2)!==46){if(s.length>2){var m=s.lastIndexOf("/");if(m!==s.length-1){m===-1?(s="",o=0):(s=s.slice(0,m),o=s.length-1-s.lastIndexOf("/")),l=g,c=0;continue}}else if(s.length===2||s.length===1){s="",o=0,l=g,c=0;continue}}i&&(s.length>0?s+="/..":s="..",o=2)}else s.length>0?s+="/"+n.slice(l+1,g):s=n.slice(l+1,g),o=g-l-1;l=g,c=0}else d===46&&c!==-1?++c:c=-1}return s}function a(n,i){var s=i.dir||i.root,o=i.base||(i.name||"")+(i.ext||"");return s?s===i.root?s+o:s+n+o:o}var h={resolve:function(){for(var n="",i=!1,s,o=arguments.length-1;o>=-1&&!i;o--){var l;o>=0?l=arguments[o]:(s===void 0&&(s=e.cwd()),l=s),r(l),l.length!==0&&(n=l+"/"+n,i=l.charCodeAt(0)===47)}return n=t(n,!i),i?n.length>0?"/"+n:"/":n.length>0?n:"."},normalize:function(n){if(r(n),n.length===0)return".";var i=n.charCodeAt(0)===47,s=n.charCodeAt(n.length-1)===47;return n=t(n,!i),n.length===0&&!i&&(n="."),n.length>0&&s&&(n+="/"),i?"/"+n:n},isAbsolute:function(n){return r(n),n.length>0&&n.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var n,i=0;i<arguments.length;++i){var s=arguments[i];r(s),s.length>0&&(n===void 0?n=s:n+="/"+s)}return n===void 0?".":h.normalize(n)},relative:function(n,i){if(r(n),r(i),n===i||(n=h.resolve(n),i=h.resolve(i),n===i))return"";for(var s=1;s<n.length&&n.charCodeAt(s)===47;++s);for(var o=n.length,l=o-s,c=1;c<i.length&&i.charCodeAt(c)===47;++c);for(var d=i.length,g=d-c,m=l<g?l:g,b=-1,y=0;y<=m;++y){if(y===m){if(g>m){if(i.charCodeAt(c+y)===47)return i.slice(c+y+1);if(y===0)return i.slice(c+y)}else l>m&&(n.charCodeAt(s+y)===47?b=y:y===0&&(b=0));break}var I=n.charCodeAt(s+y),L=i.charCodeAt(c+y);if(I!==L)break;I===47&&(b=y)}var k="";for(y=s+b+1;y<=o;++y)(y===o||n.charCodeAt(y)===47)&&(k.length===0?k+="..":k+="/..");return k.length>0?k+i.slice(c+b):(c+=b,i.charCodeAt(c)===47&&++c,i.slice(c))},_makeLong:function(n){return n},dirname:function(n){if(r(n),n.length===0)return".";for(var i=n.charCodeAt(0),s=i===47,o=-1,l=!0,c=n.length-1;c>=1;--c)if(i=n.charCodeAt(c),i===47){if(!l){o=c;break}}else l=!1;return o===-1?s?"/":".":s&&o===1?"//":n.slice(0,o)},basename:function(n,i){if(i!==void 0&&typeof i!="string")throw new TypeError('"ext" argument must be a string');r(n);var s=0,o=-1,l=!0,c;if(i!==void 0&&i.length>0&&i.length<=n.length){if(i.length===n.length&&i===n)return"";var d=i.length-1,g=-1;for(c=n.length-1;c>=0;--c){var m=n.charCodeAt(c);if(m===47){if(!l){s=c+1;break}}else g===-1&&(l=!1,g=c+1),d>=0&&(m===i.charCodeAt(d)?--d===-1&&(o=c):(d=-1,o=g))}return s===o?o=g:o===-1&&(o=n.length),n.slice(s,o)}else{for(c=n.length-1;c>=0;--c)if(n.charCodeAt(c)===47){if(!l){s=c+1;break}}else o===-1&&(l=!1,o=c+1);return o===-1?"":n.slice(s,o)}},extname:function(n){r(n);for(var i=-1,s=0,o=-1,l=!0,c=0,d=n.length-1;d>=0;--d){var g=n.charCodeAt(d);if(g===47){if(!l){s=d+1;break}continue}o===-1&&(l=!1,o=d+1),g===46?i===-1?i=d:c!==1&&(c=1):i!==-1&&(c=-1)}return i===-1||o===-1||c===0||c===1&&i===o-1&&i===s+1?"":n.slice(i,o)},format:function(n){if(n===null||typeof n!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof n);return a("/",n)},parse:function(n){r(n);var i={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return i;var s=n.charCodeAt(0),o=s===47,l;o?(i.root="/",l=1):l=0;for(var c=-1,d=0,g=-1,m=!0,b=n.length-1,y=0;b>=l;--b){if(s=n.charCodeAt(b),s===47){if(!m){d=b+1;break}continue}g===-1&&(m=!1,g=b+1),s===46?c===-1?c=b:y!==1&&(y=1):c!==-1&&(y=-1)}return c===-1||g===-1||y===0||y===1&&c===g-1&&c===d+1?g!==-1&&(d===0&&o?i.base=i.name=n.slice(1,g):i.base=i.name=n.slice(d,g)):(d===0&&o?(i.name=n.slice(1,c),i.base=n.slice(1,g)):(i.name=n.slice(d,c),i.base=n.slice(d,g)),i.ext=n.slice(c,g)),d>0?i.dir=n.slice(0,d-1):o&&(i.dir="/"),i},sep:"/",delimiter:":",win32:null,posix:null};return h.posix=h,Vr=h,Vr}function Hh(e){if(typeof e=="string")e=new URL(e);else if(!(e instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(e.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return Qr?zh(e):Vh(e)}function zh(e){let r=e.hostname,t=e.pathname;for(let a=0;a<t.length;a++)if(t[a]==="%"){let h=t.codePointAt(a+2)||32;if(t[a+1]==="2"&&h===102||t[a+1]==="5"&&h===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(t=t.replace(ya,"\\"),t=decodeURIComponent(t),r!=="")return`\\\\${r}${t}`;{let a=t.codePointAt(1)|32,h=t[2];if(a<ma||a>ba||h!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return t.slice(1)}}function Vh(e){if(e.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let r=e.pathname;for(let t=0;t<r.length;t++)if(r[t]==="%"){let a=r.codePointAt(t+2)||32;if(r[t+1]==="2"&&a===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(r)}function Kh(e){let r=$n.resolve(e),t=e.charCodeAt(e.length-1);(t===ga||Qr&&t===pa)&&r[r.length-1]!==$n.sep&&(r+="/");let a=new URL("file://");return r.includes("%")&&(r=r.replace(wa,"%25")),!Qr&&r.includes("\\")&&(r=r.replace(va,"%5C")),r.includes(`
`)&&(r=r.replace(_a,"%0A")),r.includes("\r")&&(r=r.replace(Ea,"%0D")),r.includes("	")&&(r=r.replace(Sa,"%09")),a.pathname=r,a}function fa(e){if(typeof e=="string")e=new URL(e);else if(!(e instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if(e.protocol!=="file:")throw new Deno.errors.InvalidData("invalid url scheme");return Xr?Yh(e):Gh(e)}function Yh(e){let r=e.hostname,t=e.pathname;for(let a=0;a<t.length;a++)if(t[a]==="%"){let h=t.codePointAt(a+2)||32;if(t[a+1]==="2"&&h===102||t[a+1]==="5"&&h===99)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(t=t.replace(xa,"\\"),t=decodeURIComponent(t),r!=="")return`\\\\${r}${t}`;{let a=t.codePointAt(1)|32,h=t[2];if(a<Ba||a>Ma||h!==":")throw new Deno.errors.InvalidData("file url path must be absolute");return t.slice(1)}}function Gh(e){if(e.hostname!=="")throw new Deno.errors.InvalidData("invalid file url hostname");let r=e.pathname;for(let t=0;t<r.length;t++)if(r[t]==="%"){let a=r.codePointAt(t+2)||32;if(r[t+1]==="2"&&a===102)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(r)}function da(e){let r=Fn.resolve(e),t=e.charCodeAt(e.length-1);(t===Pa||Xr&&t===Oa)&&r[r.length-1]!==Fn.sep&&(r+="/");let a=new URL("file://");return r.includes("%")&&(r=r.replace(La,"%25")),!Xr&&r.includes("\\")&&(r=r.replace(Ua,"%5C")),r.includes(`
`)&&(r=r.replace(Na,"%0A")),r.includes("\r")&&(r=r.replace(ja,"%0D")),r.includes("	")&&(r=r.replace(Da,"%09")),a.pathname=r,a}var Me,Lo,wt,Uo,No,jo,Do,Lr,bi,yi,wi,Fo,Wo,Ur,Zt,Nr,Vr,Wn,$n,$o,pa,ga,ma,ba,Qr,ya,wa,va,_a,Ea,Sa,qo,Aa,Ia,Ta,ka,Ca,Ra,Oa,Pa,Ba,Ma,Xr,xa,La,Ua,Na,ja,Da,Qh=tt(()=>{oe(),ae(),se(),Lh(),Nh(),Dh(),$h(),ua(),Me={},Lo=Ht,wt={isString:function(e){return typeof e=="string"},isObject:function(e){return typeof e=="object"&&e!==null},isNull:function(e){return e===null},isNullOrUndefined:function(e){return e==null}},Me.parse=Ar,Me.resolve=function(e,r){return Ar(e,!1,!0).resolve(r)},Me.resolveObject=function(e,r){return e?Ar(e,!1,!0).resolveObject(r):r},Me.format=function(e){return wt.isString(e)&&(e=Ar(e)),e instanceof gt?e.format():gt.prototype.format.call(e)},Me.Url=gt,Uo=/^([a-z0-9.+-]+:)/i,No=/:[0-9]*$/,jo=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Do=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r",`
`,"	"]),Lr=["'"].concat(Do),bi=["%","/","?",";","#"].concat(Lr),yi=["/","?","#"],wi=/^[+a-z0-9A-Z_-]{0,63}$/,Fo=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Wo={javascript:!0,"javascript:":!0},Ur={javascript:!0,"javascript:":!0},Zt={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Nr=Et,gt.prototype.parse=function(e,r,t){if(!wt.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var a=e.indexOf("?"),h=a!==-1&&a<e.indexOf("#")?"?":"#",n=e.split(h);n[0]=n[0].replace(/\\/g,"/");var i=e=n.join(h);if(i=i.trim(),!t&&e.split("#").length===1){var s=jo.exec(i);if(s)return this.path=i,this.href=i,this.pathname=s[1],s[2]?(this.search=s[2],this.query=r?Nr.parse(this.search.substr(1)):this.search.substr(1)):r&&(this.search="",this.query={}),this}var o=Uo.exec(i);if(o){var l=(o=o[0]).toLowerCase();this.protocol=l,i=i.substr(o.length)}if(t||o||i.match(/^\/\/[^@\/]+@[^@\/]+/)){var c=i.substr(0,2)==="//";!c||o&&Ur[o]||(i=i.substr(2),this.slashes=!0)}if(!Ur[o]&&(c||o&&!Zt[o])){for(var d,g,m=-1,b=0;b<yi.length;b++)(y=i.indexOf(yi[b]))!==-1&&(m===-1||y<m)&&(m=y);for((g=m===-1?i.lastIndexOf("@"):i.lastIndexOf("@",m))!==-1&&(d=i.slice(0,g),i=i.slice(g+1),this.auth=decodeURIComponent(d)),m=-1,b=0;b<bi.length;b++){var y;(y=i.indexOf(bi[b]))!==-1&&(m===-1||y<m)&&(m=y)}m===-1&&(m=i.length),this.host=i.slice(0,m),i=i.slice(m),this.parseHost(),this.hostname=this.hostname||"";var I=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!I)for(var L=this.hostname.split(/\./),k=(b=0,L.length);b<k;b++){var _=L[b];if(_&&!_.match(wi)){for(var N="",j=0,O=_.length;j<O;j++)_.charCodeAt(j)>127?N+="x":N+=_[j];if(!N.match(wi)){var C=L.slice(0,b),x=L.slice(b+1),W=_.match(Fo);W&&(C.push(W[1]),x.unshift(W[2])),x.length&&(i="/"+x.join(".")+i),this.hostname=C.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),I||(this.hostname=Lo.toASCII(this.hostname));var Q=this.port?":"+this.port:"",ee=this.hostname||"";this.host=ee+Q,this.href+=this.host,I&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),i[0]!=="/"&&(i="/"+i))}if(!Wo[l])for(b=0,k=Lr.length;b<k;b++){var S=Lr[b];if(i.indexOf(S)!==-1){var q=encodeURIComponent(S);q===S&&(q=escape(S)),i=i.split(S).join(q)}}var Z=i.indexOf("#");Z!==-1&&(this.hash=i.substr(Z),i=i.slice(0,Z));var K=i.indexOf("?");if(K!==-1?(this.search=i.substr(K),this.query=i.substr(K+1),r&&(this.query=Nr.parse(this.query)),i=i.slice(0,K)):r&&(this.search="",this.query={}),i&&(this.pathname=i),Zt[l]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){Q=this.pathname||"";var ge=this.search||"";this.path=Q+ge}return this.href=this.format(),this},gt.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var r=this.protocol||"",t=this.pathname||"",a=this.hash||"",h=!1,n="";this.host?h=e+this.host:this.hostname&&(h=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(h+=":"+this.port)),this.query&&wt.isObject(this.query)&&Object.keys(this.query).length&&(n=Nr.stringify(this.query));var i=this.search||n&&"?"+n||"";return r&&r.substr(-1)!==":"&&(r+=":"),this.slashes||(!r||Zt[r])&&h!==!1?(h="//"+(h||""),t&&t.charAt(0)!=="/"&&(t="/"+t)):h||(h=""),a&&a.charAt(0)!=="#"&&(a="#"+a),i&&i.charAt(0)!=="?"&&(i="?"+i),r+h+(t=t.replace(/[?#]/g,function(s){return encodeURIComponent(s)}))+(i=i.replace("#","%23"))+a},gt.prototype.resolve=function(e){return this.resolveObject(Ar(e,!1,!0)).format()},gt.prototype.resolveObject=function(e){if(wt.isString(e)){var r=new gt;r.parse(e,!1,!0),e=r}for(var t=new gt,a=Object.keys(this),h=0;h<a.length;h++){var n=a[h];t[n]=this[n]}if(t.hash=e.hash,e.href==="")return t.href=t.format(),t;if(e.slashes&&!e.protocol){for(var i=Object.keys(e),s=0;s<i.length;s++){var o=i[s];o!=="protocol"&&(t[o]=e[o])}return Zt[t.protocol]&&t.hostname&&!t.pathname&&(t.path=t.pathname="/"),t.href=t.format(),t}if(e.protocol&&e.protocol!==t.protocol){if(!Zt[e.protocol]){for(var l=Object.keys(e),c=0;c<l.length;c++){var d=l[c];t[d]=e[d]}return t.href=t.format(),t}if(t.protocol=e.protocol,e.host||Ur[e.protocol])t.pathname=e.pathname;else{for(var g=(e.pathname||"").split("/");g.length&&!(e.host=g.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),g[0]!==""&&g.unshift(""),g.length<2&&g.unshift(""),t.pathname=g.join("/")}if(t.search=e.search,t.query=e.query,t.host=e.host||"",t.auth=e.auth,t.hostname=e.hostname||e.host,t.port=e.port,t.pathname||t.search){var m=t.pathname||"",b=t.search||"";t.path=m+b}return t.slashes=t.slashes||e.slashes,t.href=t.format(),t}var y=t.pathname&&t.pathname.charAt(0)==="/",I=e.host||e.pathname&&e.pathname.charAt(0)==="/",L=I||y||t.host&&e.pathname,k=L,_=t.pathname&&t.pathname.split("/")||[],N=(g=e.pathname&&e.pathname.split("/")||[],t.protocol&&!Zt[t.protocol]);if(N&&(t.hostname="",t.port=null,t.host&&(_[0]===""?_[0]=t.host:_.unshift(t.host)),t.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(g[0]===""?g[0]=e.host:g.unshift(e.host)),e.host=null),L=L&&(g[0]===""||_[0]==="")),I)t.host=e.host||e.host===""?e.host:t.host,t.hostname=e.hostname||e.hostname===""?e.hostname:t.hostname,t.search=e.search,t.query=e.query,_=g;else if(g.length)_||(_=[]),_.pop(),_=_.concat(g),t.search=e.search,t.query=e.query;else if(!wt.isNullOrUndefined(e.search))return N&&(t.hostname=t.host=_.shift(),(W=!!(t.host&&t.host.indexOf("@")>0)&&t.host.split("@"))&&(t.auth=W.shift(),t.host=t.hostname=W.shift())),t.search=e.search,t.query=e.query,wt.isNull(t.pathname)&&wt.isNull(t.search)||(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.href=t.format(),t;if(!_.length)return t.pathname=null,t.search?t.path="/"+t.search:t.path=null,t.href=t.format(),t;for(var j=_.slice(-1)[0],O=(t.host||e.host||_.length>1)&&(j==="."||j==="..")||j==="",C=0,x=_.length;x>=0;x--)(j=_[x])==="."?_.splice(x,1):j===".."?(_.splice(x,1),C++):C&&(_.splice(x,1),C--);if(!L&&!k)for(;C--;C)_.unshift("..");!L||_[0]===""||_[0]&&_[0].charAt(0)==="/"||_.unshift(""),O&&_.join("/").substr(-1)!=="/"&&_.push("");var W,Q=_[0]===""||_[0]&&_[0].charAt(0)==="/";return N&&(t.hostname=t.host=Q?"":_.length?_.shift():"",(W=!!(t.host&&t.host.indexOf("@")>0)&&t.host.split("@"))&&(t.auth=W.shift(),t.host=t.hostname=W.shift())),(L=L||t.host&&_.length)&&!Q&&_.unshift(""),_.length?t.pathname=_.join("/"):(t.pathname=null,t.path=null),wt.isNull(t.pathname)&&wt.isNull(t.search)||(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.auth=e.auth||t.auth,t.slashes=t.slashes||e.slashes,t.href=t.format(),t},gt.prototype.parseHost=function(){var e=this.host,r=No.exec(e);r&&((r=r[0])!==":"&&(this.port=r.substr(1)),e=e.substr(0,e.length-r.length)),e&&(this.hostname=e)},Me.Url,Me.format,Me.resolve,Me.resolveObject,Vr={},Wn=!1,$n=qh(),$o=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0,Me.URL=typeof URL<"u"?URL:null,Me.pathToFileURL=Kh,Me.fileURLToPath=Hh,Me.Url,Me.format,Me.resolve,Me.resolveObject,Me.URL,pa=92,ga=47,ma=97,ba=122,Qr=$o==="win32",ya=/\//g,wa=/%/g,va=/\\/g,_a=/\n/g,Ea=/\r/g,Sa=/\t/g,qo=typeof Deno<"u"?Deno.build.os==="windows"?"win32":Deno.build.os:void 0,Me.URL=typeof URL<"u"?URL:null,Me.pathToFileURL=da,Me.fileURLToPath=fa,Aa=Me.Url,Ia=Me.format,Ta=Me.resolve,ka=Me.resolveObject,Ca=Me.parse,Ra=Me.URL,Oa=92,Pa=47,Ba=97,Ma=122,Xr=qo==="win32",xa=/\//g,La=/%/g,Ua=/\\/g,Na=/\n/g,ja=/\r/g,Da=/\t/g}),Xh=me((e,r)=>{oe(),ae(),se(),r.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}}),Zn=me(e=>{oe(),ae(),se(),Object.defineProperty(e,"__esModule",{value:!0}),e.BufferedDuplex=e.writev=void 0;var r=cr(),t=(it(),Ue(rt));function a(n,i){let s=new Array(n.length);for(let o=0;o<n.length;o++)typeof n[o].chunk=="string"?s[o]=t.Buffer.from(n[o].chunk,"utf8"):s[o]=n[o].chunk;this._write(t.Buffer.concat(s),"binary",i)}e.writev=a;var h=class extends r.Duplex{constructor(n,i,s){super({objectMode:!0}),this.proxy=i,this.socket=s,this.writeQueue=[],n.objectMode||(this._writev=a.bind(this)),this.isSocketOpen=!1,this.proxy.on("data",o=>{this.destroyed||this.push(o)})}_read(n){this.proxy.read(n)}_write(n,i,s){this.isSocketOpen?this.writeToProxy(n,i,s):this.writeQueue.push({chunk:n,encoding:i,cb:s})}_final(n){this.writeQueue=[],this.proxy.end(n)}_destroy(n,i){this.writeQueue=[],this.proxy.destroy(),i(n)}socketReady(){this.emit("connect"),this.isSocketOpen=!0,this.processWriteQueue()}writeToProxy(n,i,s){this.proxy.write(n,i)===!1?this.proxy.once("drain",s):s()}processWriteQueue(){for(;this.writeQueue.length>0;){let{chunk:n,encoding:i,cb:s}=this.writeQueue.shift();this.writeToProxy(n,i,s)}}};e.BufferedDuplex=h}),jr=me(e=>{oe(),ae(),se();var r=e&&e.__importDefault||function(L){return L&&L.__esModule?L:{default:L}};Object.defineProperty(e,"__esModule",{value:!0}),e.streamBuilder=e.browserStreamBuilder=void 0;var t=(it(),Ue(rt)),a=r(Xh()),h=r(Ut()),n=cr(),i=r(ii()),s=Zn(),o=(0,h.default)("mqttjs:ws"),l=["rejectUnauthorized","ca","cert","key","pfx","passphrase"];function c(L,k){let _=`${L.protocol}://${L.hostname}:${L.port}${L.path}`;return typeof L.transformWsUrl=="function"&&(_=L.transformWsUrl(_,L,k)),_}function d(L){let k=L;return L.port||(L.protocol==="wss"?k.port=443:k.port=80),L.path||(k.path="/"),L.wsOptions||(k.wsOptions={}),!i.default&&!L.forceNativeWebSocket&&L.protocol==="wss"&&l.forEach(_=>{Object.prototype.hasOwnProperty.call(L,_)&&!Object.prototype.hasOwnProperty.call(L.wsOptions,_)&&(k.wsOptions[_]=L[_])}),k}function g(L){let k=d(L);if(k.hostname||(k.hostname=k.host),!k.hostname){if(typeof document>"u")throw new Error("Could not determine host. Specify host manually.");let _=new URL(document.URL);k.hostname=_.hostname,k.port||(k.port=Number(_.port))}return k.objectMode===void 0&&(k.objectMode=!(k.binary===!0||k.binary===void 0)),k}function m(L,k,_){o("createWebSocket"),o(`protocol: ${_.protocolId} ${_.protocolVersion}`);let N=_.protocolId==="MQIsdp"&&_.protocolVersion===3?"mqttv3.1":"mqtt";o(`creating new Websocket for url: ${k} and protocol: ${N}`);let j;return _.createWebsocket?j=_.createWebsocket(k,[N],_):j=new a.default(k,[N],_.wsOptions),j}function b(L,k){let _=k.protocolId==="MQIsdp"&&k.protocolVersion===3?"mqttv3.1":"mqtt",N=c(k,L),j;return k.createWebsocket?j=k.createWebsocket(N,[_],k):j=new WebSocket(N,[_]),j.binaryType="arraybuffer",j}var y=(L,k)=>{o("streamBuilder");let _=d(k);_.hostname=_.hostname||_.host||"localhost";let N=c(_,L),j=m(L,N,_),O=a.default.createWebSocketStream(j,_.wsOptions);return O.url=N,j.on("close",()=>{O.destroy()}),O};e.streamBuilder=y;var I=(L,k)=>{o("browserStreamBuilder");let _,N=g(k).browserBufferSize||1024*512,j=k.browserBufferTimeout||1e3,O=!k.objectMode,C=b(L,k),x=Q(k,K,ge);k.objectMode||(x._writev=s.writev.bind(x)),x.on("close",()=>{C.close()});let W=typeof C.addEventListener<"u";C.readyState===C.OPEN?(_=x,_.socket=C):(_=new s.BufferedDuplex(k,x,C),W?C.addEventListener("open",ee):C.onopen=ee),W?(C.addEventListener("close",S),C.addEventListener("error",q),C.addEventListener("message",Z)):(C.onclose=S,C.onerror=q,C.onmessage=Z);function Q(ne,$,be){let re=new n.Transform({objectMode:ne.objectMode});return re._write=$,re._flush=be,re}function ee(){o("WebSocket onOpen"),_ instanceof s.BufferedDuplex&&_.socketReady()}function S(ne){o("WebSocket onClose",ne),_.end(),_.destroy()}function q(ne){o("WebSocket onError",ne);let $=new Error("WebSocket error");$.event=ne,_.destroy($)}async function Z(ne){let{data:$}=ne;$ instanceof ArrayBuffer?$=t.Buffer.from($):$ instanceof Blob?$=t.Buffer.from(await new Response($).arrayBuffer()):$=t.Buffer.from($,"utf8"),x&&!x.destroyed&&x.push($)}function K(ne,$,be){if(C.bufferedAmount>N){setTimeout(K,j,ne,$,be);return}O&&typeof ne=="string"&&(ne=t.Buffer.from(ne,"utf8"));try{C.send(ne)}catch(re){return be(re)}be()}function ge(ne){C.close(),ne()}return _};e.browserStreamBuilder=I}),eo={};lr(eo,{Server:()=>De,Socket:()=>De,Stream:()=>De,_createServerHandle:()=>De,_normalizeArgs:()=>De,_setSimultaneousAccepts:()=>De,connect:()=>De,createConnection:()=>De,createServer:()=>De,default:()=>Fa,isIP:()=>De,isIPv4:()=>De,isIPv6:()=>De});function De(){throw new Error("Node.js net module is not supported by JSPM core outside of Node.js")}var Fa,Wa=tt(()=>{oe(),ae(),se(),Fa={_createServerHandle:De,_normalizeArgs:De,_setSimultaneousAccepts:De,connect:De,createConnection:De,createServer:De,isIP:De,isIPv4:De,isIPv6:De,Server:De,Socket:De,Stream:De}}),Ho=me(e=>{oe(),ae(),se();var r=e&&e.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(e,"__esModule",{value:!0});var t=r((Wa(),Ue(eo))),a=r(Ut()),h=(0,a.default)("mqttjs:tcp"),n=(i,s)=>{s.port=s.port||1883,s.hostname=s.hostname||s.host||"localhost";let{port:o,path:l}=s,c=s.hostname;return h("port %d and host %s",o,c),t.default.createConnection({port:o,host:c,path:l})};e.default=n}),$a={};lr($a,{default:()=>qa});var qa,Jh=tt(()=>{oe(),ae(),se(),qa={}}),zo=me(e=>{oe(),ae(),se();var r=e&&e.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0});var t=r((Jh(),Ue($a))),a=r((Wa(),Ue(eo))),h=r(Ut()),n=(0,h.default)("mqttjs:tls"),i=(s,o)=>{o.port=o.port||8883,o.host=o.hostname||o.host||"localhost",a.default.isIP(o.host)===0&&(o.servername=o.host),o.rejectUnauthorized=o.rejectUnauthorized!==!1,delete o.path,n("port %d host %s rejectUnauthorized %b",o.port,o.host,o.rejectUnauthorized);let l=t.default.connect(o);l.on("secureConnect",()=>{o.rejectUnauthorized&&!l.authorized?l.emit("error",new Error("TLS not authorized")):l.removeListener("error",c)});function c(d){o.rejectUnauthorized&&s.emit("error",d),l.end()}return l.on("error",c),l};e.default=i}),Vo=me(e=>{oe(),ae(),se(),Object.defineProperty(e,"__esModule",{value:!0});var r=(it(),Ue(rt)),t=cr(),a=Zn(),h,n,i;function s(){let g=new t.Transform;return g._write=(m,b,y)=>{h.send({data:m.buffer,success(){y()},fail(I){y(new Error(I))}})},g._flush=m=>{h.close({success(){m()}})},g}function o(g){g.hostname||(g.hostname="localhost"),g.path||(g.path="/"),g.wsOptions||(g.wsOptions={})}function l(g,m){let b=g.protocol==="wxs"?"wss":"ws",y=`${b}://${g.hostname}${g.path}`;return g.port&&g.port!==80&&g.port!==443&&(y=`${b}://${g.hostname}:${g.port}${g.path}`),typeof g.transformWsUrl=="function"&&(y=g.transformWsUrl(y,g,m)),y}function c(){h.onOpen(()=>{i.socketReady()}),h.onMessage(g=>{let{data:m}=g;m instanceof ArrayBuffer?m=r.Buffer.from(m):m=r.Buffer.from(m,"utf8"),n.push(m)}),h.onClose(()=>{i.emit("close"),i.end(),i.destroy()}),h.onError(g=>{let m=new Error(g.errMsg);i.destroy(m)})}var d=(g,m)=>{if(m.hostname=m.hostname||m.host,!m.hostname)throw new Error("Could not determine host. Specify host manually.");let b=m.protocolId==="MQIsdp"&&m.protocolVersion===3?"mqttv3.1":"mqtt";o(m);let y=l(m,g);h=wx.connectSocket({url:y,protocols:[b]}),n=s(),i=new a.BufferedDuplex(m,n,h),i._destroy=(L,k)=>{h.close({success(){k&&k(L)}})};let I=i.destroy;return i.destroy=(L,k)=>(i.destroy=I,setTimeout(()=>{h.close({fail(){i._destroy(L,k)}})},0),i),c(),i};e.default=d}),Ko=me(e=>{oe(),ae(),se(),Object.defineProperty(e,"__esModule",{value:!0});var r=(it(),Ue(rt)),t=cr(),a=Zn(),h,n,i,s=!1;function o(){let m=new t.Transform;return m._write=(b,y,I)=>{h.sendSocketMessage({data:b.buffer,success(){I()},fail(){I(new Error)}})},m._flush=b=>{h.closeSocket({success(){b()}})},m}function l(m){m.hostname||(m.hostname="localhost"),m.path||(m.path="/"),m.wsOptions||(m.wsOptions={})}function c(m,b){let y=m.protocol==="alis"?"wss":"ws",I=`${y}://${m.hostname}${m.path}`;return m.port&&m.port!==80&&m.port!==443&&(I=`${y}://${m.hostname}:${m.port}${m.path}`),typeof m.transformWsUrl=="function"&&(I=m.transformWsUrl(I,m,b)),I}function d(){s||(s=!0,h.onSocketOpen(()=>{i.socketReady()}),h.onSocketMessage(m=>{if(typeof m.data=="string"){let b=r.Buffer.from(m.data,"base64");n.push(b)}else{let b=new FileReader;b.addEventListener("load",()=>{let y=b.result;y instanceof ArrayBuffer?y=r.Buffer.from(y):y=r.Buffer.from(y,"utf8"),n.push(y)}),b.readAsArrayBuffer(m.data)}}),h.onSocketClose(()=>{i.end(),i.destroy()}),h.onSocketError(m=>{i.destroy(m)}))}var g=(m,b)=>{if(b.hostname=b.hostname||b.host,!b.hostname)throw new Error("Could not determine host. Specify host manually.");let y=b.protocolId==="MQIsdp"&&b.protocolVersion===3?"mqttv3.1":"mqtt";l(b);let I=c(b,m);return h=b.my,h.connectSocket({url:I,protocols:y}),n=o(),i=new a.BufferedDuplex(b,n,h),d(),i};e.default=g}),Zh=me(e=>{oe(),ae(),se();var r=e&&e.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(e,"__esModule",{value:!0}),e.connectAsync=void 0;var t=r(Ut()),a=r((Qh(),Ue(ca))),h=r(xn()),n=r(ii());typeof(Be==null?void 0:Be.nextTick)!="function"&&(Be.nextTick=setImmediate);var i=(0,t.default)("mqttjs"),s=null;function o(d){let g;d.auth&&(g=d.auth.match(/^(.+):(.+)$/),g?(d.username=g[1],d.password=g[2]):d.username=d.auth)}function l(d,g){var m,b,y,I;if(i("connecting to an MQTT broker..."),typeof d=="object"&&!g&&(g=d,d=""),g=g||{},d&&typeof d=="string"){let _=a.default.parse(d,!0),N={};if(_.port!=null&&(N.port=Number(_.port)),N.host=_.hostname,N.query=_.query,N.auth=_.auth,N.protocol=_.protocol,N.path=_.path,N.protocol=(m=N.protocol)===null||m===void 0?void 0:m.replace(/:$/,""),g=Object.assign(Object.assign({},N),g),!g.protocol)throw new Error("Missing protocol")}if(g.unixSocket=g.unixSocket||((b=g.protocol)===null||b===void 0?void 0:b.includes("+unix")),g.unixSocket?g.protocol=g.protocol.replace("+unix",""):!(!((y=g.protocol)===null||y===void 0)&&y.startsWith("ws"))&&!(!((I=g.protocol)===null||I===void 0)&&I.startsWith("wx"))&&delete g.path,o(g),g.query&&typeof g.query.clientId=="string"&&(g.clientId=g.query.clientId),g.cert&&g.key)if(g.protocol){if(["mqtts","wss","wxs","alis"].indexOf(g.protocol)===-1)switch(g.protocol){case"mqtt":g.protocol="mqtts";break;case"ws":g.protocol="wss";break;case"wx":g.protocol="wxs";break;case"ali":g.protocol="alis";break;default:throw new Error(`Unknown protocol for secure connection: "${g.protocol}"!`)}}else throw new Error("Missing secure protocol key");if(s||(s={},!n.default&&!g.forceNativeWebSocket?(s.ws=jr().streamBuilder,s.wss=jr().streamBuilder,s.mqtt=Ho().default,s.tcp=Ho().default,s.ssl=zo().default,s.tls=s.ssl,s.mqtts=zo().default):(s.ws=jr().browserStreamBuilder,s.wss=jr().browserStreamBuilder,s.wx=Vo().default,s.wxs=Vo().default,s.ali=Ko().default,s.alis=Ko().default)),!s[g.protocol]){let _=["mqtts","wss"].indexOf(g.protocol)!==-1;g.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter((N,j)=>_&&j%2===0?!1:typeof s[N]=="function")[0]}if(g.clean===!1&&!g.clientId)throw new Error("Missing clientId for unclean clients");g.protocol&&(g.defaultProtocol=g.protocol);function L(_){return g.servers&&((!_._reconnectCount||_._reconnectCount===g.servers.length)&&(_._reconnectCount=0),g.host=g.servers[_._reconnectCount].host,g.port=g.servers[_._reconnectCount].port,g.protocol=g.servers[_._reconnectCount].protocol?g.servers[_._reconnectCount].protocol:g.defaultProtocol,g.hostname=g.host,_._reconnectCount++),i("calling streambuilder for",g.protocol),s[g.protocol](_,g)}let k=new h.default(L,g);return k.on("error",()=>{}),k}function c(d,g,m=!0){return new Promise((b,y)=>{let I=l(d,g),L={connect:_=>{k(),b(I)},end:()=>{k(),b(I)},error:_=>{k(),I.end(),y(_)}};m===!1&&(L.close=()=>{L.error(new Error("Couldn't connect to server"))});function k(){Object.keys(L).forEach(_=>{I.off(_,L[_])})}Object.keys(L).forEach(_=>{I.on(_,L[_])})})}e.connectAsync=c,e.default=l}),Yo=me(e=>{oe(),ae(),se();var r=e&&e.__createBinding||(Object.create?function(m,b,y,I){I===void 0&&(I=y);var L=Object.getOwnPropertyDescriptor(b,y);(!L||("get"in L?!b.__esModule:L.writable||L.configurable))&&(L={enumerable:!0,get:function(){return b[y]}}),Object.defineProperty(m,I,L)}:function(m,b,y,I){I===void 0&&(I=y),m[I]=b[y]}),t=e&&e.__setModuleDefault||(Object.create?function(m,b){Object.defineProperty(m,"default",{enumerable:!0,value:b})}:function(m,b){m.default=b}),a=e&&e.__importStar||function(m){if(m&&m.__esModule)return m;var b={};if(m!=null)for(var y in m)y!=="default"&&Object.prototype.hasOwnProperty.call(m,y)&&r(b,m,y);return t(b,m),b},h=e&&e.__exportStar||function(m,b){for(var y in m)y!=="default"&&!Object.prototype.hasOwnProperty.call(b,y)&&r(b,m,y)},n=e&&e.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(e,"__esModule",{value:!0}),e.ReasonCodes=e.KeepaliveManager=e.UniqueMessageIdProvider=e.DefaultMessageIdProvider=e.Store=e.MqttClient=e.connectAsync=e.connect=e.Client=void 0;var i=n(xn());e.MqttClient=i.default;var s=n($s());e.DefaultMessageIdProvider=s.default;var o=n(xh());e.UniqueMessageIdProvider=o.default;var l=n(qs());e.Store=l.default;var c=a(Zh());e.connect=c.default,Object.defineProperty(e,"connectAsync",{enumerable:!0,get:function(){return c.connectAsync}});var d=n(oa());e.KeepaliveManager=d.default,e.Client=i.default,h(xn(),e),h(wr(),e);var g=ri();Object.defineProperty(e,"ReasonCodes",{enumerable:!0,get:function(){return g.ReasonCodes}})}),eu=me(e=>{oe(),ae(),se();var r=e&&e.__createBinding||(Object.create?function(i,s,o,l){l===void 0&&(l=o);var c=Object.getOwnPropertyDescriptor(s,o);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[o]}}),Object.defineProperty(i,l,c)}:function(i,s,o,l){l===void 0&&(l=o),i[l]=s[o]}),t=e&&e.__setModuleDefault||(Object.create?function(i,s){Object.defineProperty(i,"default",{enumerable:!0,value:s})}:function(i,s){i.default=s}),a=e&&e.__importStar||function(i){if(i&&i.__esModule)return i;var s={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&r(s,i,o);return t(s,i),s},h=e&&e.__exportStar||function(i,s){for(var o in i)o!=="default"&&!Object.prototype.hasOwnProperty.call(s,o)&&r(s,i,o)};Object.defineProperty(e,"__esModule",{value:!0});var n=a(Yo());e.default=n,h(Yo(),e)});const tu=eu();/*! Bundled license information:

@jspm/core/nodelibs/browser/buffer.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/const ru="wss://"+$e.MQTT["brokerUrl+port"],iu={clientId:`mqttjs_${Math.random().toString(16).slice(2,8)}`},ni=tu.connect(ru,iu);ni.on("connect",()=>{console.log("Connected to MQTT broker")});ni.on("message",(e,r)=>{console.log(`Received message: ${r.toString()} on topic: ${e}`)});const nu=(e,r)=>{e=$e.MQTT.topicBase+e,ni.publish(e,r,{},t=>{t?console.error("Publish error:",t):console.log(`Message sent to ${e}: ${r}`)})},ou=e=>{e=$e.MQTT.topicBase+e,ni.subscribe(e,r=>{r?console.error("Subscribe error:",r):console.log(`Subscribed to topic: ${e}`)})};ou("test");nu("test","Hello from MQTT service");const zt=document.querySelector("#game-canvas"),Tt=zt.getContext("2d"),dt=new ul({position:new Fe(0,0)});dt.setLevel(new fl);dt.registerMouseMovement(zt);const su=e=>{var r;dt.stepEntry(e,dt),(r=dt.input)==null||r.update()},au=()=>{Tt.clearRect(0,0,zt.width,zt.height),dt.drawBackground(Tt),Tt.save(),dt.camera&&(Tt.translate(zt.width/2,zt.height/2),Tt.scale(dt.camera.zoom,dt.camera.zoom),Tt.translate(-zt.width/2+dt.camera.position.x,-zt.height/2+dt.camera.position.y)),dt.drawObjects(Tt,0,0),Tt.restore(),dt.drawForeground(Tt)},lu=new Ga(su,au);lu.start();
